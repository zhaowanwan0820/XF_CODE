<!DOCTYPE html>
<html>
<head>
    {include file='web/views/hongbao/shareLogo.html'}
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!--public js&css start-->
    <link href="<?php echo $this->asset->makeUrl('v1/css/m-base-1.css', 1);?>" rel="stylesheet" type="text/css" />
    <link href="<?php echo $this->asset->makeUrl('v1/css/m-common-1.css', 1);?>" rel="stylesheet" type="text/css" />
    <script src="<?php echo $this->asset->makeUrl('v1/js/zepto.min.js', 1);?>"></script>
    <!--public js&css end-->
    <link href="<?php echo $this->asset->makeUrl('v1/css/hongbao/gongxinweishi.css', 1);?>" rel="stylesheet" type="text/css">

</head>
<body>
<div class="change_tel">     
    <form id="register-form" action="" method="post">
        <input type="tel" class="tel-box" id="input-mobile" placeholder="请输入您的手机号" maxlength="11">
        <input type="submit" class="tel-btn no-change" value="更改手机号">
    </form>
    <p class="p_tip">说明：下次领红包，自动放入新账户</p>
</div>
{include file="web/views/hongbao/jsapi_config.html"}
<script>
    wx.ready(function() {
        wx.hideOptionMenu();
    });
</script>
    <script type="text/javascript">
		$(function(){
function onBridgeReady() {
            WeixinJSBridge.call('hideOptionMenu');
        }

        if (typeof WeixinJSBridge == "undefined") {
            if (document.addEventListener) {
                document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
            } else if (document.attachEvent) {
                document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
                document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
            }
        } else {
            onBridgeReady();
        }
            var mobileRegEx = /^0?(13[0-9]|15[0-9]|18[0-9]|17[0678]|14[457])[0-9]{8}$/;
			$('.tel-btn').addClass('no-change').attr('disabled','disabled');
			$('.tel-box').on('input propertychange', function() {
				var tel= $('.tel-box').val();
				if(!tel || tel==null){
					$('.tel-btn').addClass('no-change').attr('disabled','disabled');
					//$('.tel-box').focus();
					return false;
				}else if(!mobileRegEx.test(tel)){
					$('.tel-btn').addClass('no-change').attr('disabled','disabled');
					//$('.tel-box').focus();
					return false;
				}else{
					$('.tel-btn').removeClass('no-change').removeAttr('disabled','disabled');
					return true;
				}
			}); 
		})
    </script>
</body>
</html>
