<?php

/*
获取某年的可提现日，根据百度搜索结果页的日历，在控制台执行以下js，可得到json字符
r = {};
jQuery('.op-calendar-new-relative').each(function(i, day){
    if (!jQuery(day).find('a').hasClass('op-calendar-new-table-other-month')) {
        
         || 
        
        }else 
        // 若是 周五及周末
        if(jQuery(day).parent('td').index() > 4){
            // 若是 周末
            if (jQuery(day).find('a').hasClass('op-calendar-new-table-weekend')){
                // 若是 休
                if(jQuery(day).find('a').hasClass('op-calendar-new-table-rest')){
                    r[jQuery(day).find('a').attr('date')] = false;
                // 若是 周末 且工作
                }else if(jQuery(day).find('a').hasClass('op-calendar-new-table-work')){
                    r[jQuery(day).find('a').attr('date')] = true;
                }
                r[jQuery(day).find('a').attr('date')] = false;
            }
        }else{
            r[jQuery(day).find('a').attr('date')] = true;
        }
    }
})
JSON.Stringify(r)
*/

class withdrawDay{

    // 2015年可银行可进行操作的提现日
    private static $days = array(
        "2015-1-1"      =>false,
        "2015-1-2"      =>false,
        "2015-1-3"      =>false,
        "2015-1-4"      =>false,
        "2015-1-5"      =>true,
        "2015-1-6"      =>true,
        "2015-1-7"      =>true,
        "2015-1-8"      =>true,
        "2015-1-9"      =>true,
        "2015-1-10"     =>false,
        "2015-1-11"     =>false,
        "2015-1-12"     =>true,
        "2015-1-13"     =>true,
        "2015-1-14"     =>true,
        "2015-1-15"     =>true,
        "2015-1-16"     =>true,
        "2015-1-17"     =>false,
        "2015-1-18"     =>false,
        "2015-1-19"     =>true,
        "2015-1-20"     =>true,
        "2015-1-21"     =>true,
        "2015-1-22"     =>true,
        "2015-1-23"     =>true,
        "2015-1-24"     =>false,
        "2015-1-25"     =>false,
        "2015-1-26"     =>true,
        "2015-1-27"     =>true,
        "2015-1-28"     =>true,
        "2015-1-29"     =>true,
        "2015-1-30"     =>true,
        "2015-1-31"     =>false,
        "2015-2-1"      =>false,
        "2015-2-2"      =>true,
        "2015-2-3"      =>true,
        "2015-2-4"      =>true,
        "2015-2-5"      =>true,
        "2015-2-6"      =>true,
        "2015-2-7"      =>false,
        "2015-2-8"      =>false,
        "2015-2-9"      =>true,
        "2015-2-10"     =>true,
        "2015-2-11"     =>true,
        "2015-2-12"     =>true,
        "2015-2-13"     =>true,
        "2015-2-14"     =>false,
        "2015-2-15"     =>false,
        "2015-2-16"     =>true,
        "2015-2-17"     =>true,
        "2015-2-18"     =>false,
        "2015-2-19"     =>false,
        "2015-2-20"     =>false,
        "2015-2-21"     =>false,
        "2015-2-22"     =>false,
        "2015-2-23"     =>false,
        "2015-2-24"     =>false,
        "2015-2-25"     =>true,
        "2015-2-26"     =>true,
        "2015-2-27"     =>true,
        "2015-2-28"     =>false,
        "2015-3-1"      =>false,
        "2015-3-2"      =>true,
        "2015-3-3"      =>true,
        "2015-3-4"      =>true,
        "2015-3-5"      =>true,
        "2015-3-6"      =>true,
        "2015-3-7"      =>false,
        "2015-3-8"      =>false,
        "2015-3-9"      =>true,
        "2015-3-10"     =>true,
        "2015-3-11"     =>true,
        "2015-3-12"     =>true,
        "2015-3-13"     =>true,
        "2015-3-14"     =>false,
        "2015-3-15"     =>false,
        "2015-3-16"     =>true,
        "2015-3-17"     =>true,
        "2015-3-18"     =>true,
        "2015-3-19"     =>true,
        "2015-3-20"     =>true,
        "2015-3-21"     =>false,
        "2015-3-22"     =>false,
        "2015-3-23"     =>true,
        "2015-3-24"     =>true,
        "2015-3-25"     =>true,
        "2015-3-26"     =>true,
        "2015-3-27"     =>true,
        "2015-3-28"     =>false,
        "2015-3-29"     =>false,
        "2015-3-30"     =>true,
        "2015-3-31"     =>true,
        "2015-4-1"      =>true,
        "2015-4-2"      =>true,
        "2015-4-3"      =>true,
        "2015-4-4"      =>false,
        "2015-4-5"      =>false,
        "2015-4-6"      =>false,
        "2015-4-7"      =>true,
        "2015-4-8"      =>true,
        "2015-4-9"      =>true,
        "2015-4-10"     =>true,
        "2015-4-11"     =>false,
        "2015-4-12"     =>false,
        "2015-4-13"     =>true,
        "2015-4-14"     =>true,
        "2015-4-15"     =>true,
        "2015-4-16"     =>true,
        "2015-4-17"     =>true,
        "2015-4-18"     =>false,
        "2015-4-19"     =>false,
        "2015-4-20"     =>true,
        "2015-4-21"     =>true,
        "2015-4-22"     =>true,
        "2015-4-23"     =>true,
        "2015-4-24"     =>true,
        "2015-4-25"     =>false,
        "2015-4-26"     =>false,
        "2015-4-27"     =>true,
        "2015-4-28"     =>true,
        "2015-4-29"     =>true,
        "2015-4-30"     =>true,
        "2015-5-1"      =>false,
        "2015-5-2"      =>false,
        "2015-5-3"      =>false,
        "2015-5-4"      =>true,
        "2015-5-5"      =>true,
        "2015-5-6"      =>true,
        "2015-5-7"      =>true,
        "2015-5-8"      =>true,
        "2015-5-9"      =>false,
        "2015-5-10"     =>false,
        "2015-5-11"     =>true,
        "2015-5-12"     =>true,
        "2015-5-13"     =>true,
        "2015-5-14"     =>true,
        "2015-5-15"     =>true,
        "2015-5-16"     =>false,
        "2015-5-17"     =>false,
        "2015-5-18"     =>true,
        "2015-5-19"     =>true,
        "2015-5-20"     =>true,
        "2015-5-21"     =>true,
        "2015-5-22"     =>true,
        "2015-5-23"     =>false,
        "2015-5-24"     =>false,
        "2015-5-25"     =>true,
        "2015-5-26"     =>true,
        "2015-5-27"     =>true,
        "2015-5-28"     =>true,
        "2015-5-29"     =>true,
        "2015-5-30"     =>false,
        "2015-5-31"     =>false,
        "2015-6-1"      =>true,
        "2015-6-2"      =>true,
        "2015-6-3"      =>true,
        "2015-6-4"      =>true,
        "2015-6-5"      =>true,
        "2015-6-6"      =>false,
        "2015-6-7"      =>false,
        "2015-6-8"      =>true,
        "2015-6-9"      =>true,
        "2015-6-10"     =>true,
        "2015-6-11"     =>true,
        "2015-6-12"     =>true,
        "2015-6-13"     =>false,
        "2015-6-14"     =>false,
        "2015-6-15"     =>true,
        "2015-6-16"     =>true,
        "2015-6-17"     =>true,
        "2015-6-18"     =>true,
        "2015-6-19"     =>true,
        "2015-6-20"     =>false,
        "2015-6-21"     =>false,
        "2015-6-22"     =>false,
        "2015-6-23"     =>true,
        "2015-6-24"     =>true,
        "2015-6-25"     =>true,
        "2015-6-26"     =>true,
        "2015-6-27"     =>false,
        "2015-6-28"     =>false,
        "2015-6-29"     =>true,
        "2015-6-30"     =>true,
        "2015-7-1"      =>true,
        "2015-7-2"      =>true,
        "2015-7-3"      =>true,
        "2015-7-4"      =>false,
        "2015-7-5"      =>false,
        "2015-7-6"      =>true,
        "2015-7-7"      =>true,
        "2015-7-8"      =>true,
        "2015-7-9"      =>true,
        "2015-7-10"     =>true,
        "2015-7-11"     =>false,
        "2015-7-12"     =>false,
        "2015-7-13"     =>true,
        "2015-7-14"     =>true,
        "2015-7-15"     =>true,
        "2015-7-16"     =>true,
        "2015-7-17"     =>true,
        "2015-7-18"     =>false,
        "2015-7-19"     =>false,
        "2015-7-20"     =>true,
        "2015-7-21"     =>true,
        "2015-7-22"     =>true,
        "2015-7-23"     =>true,
        "2015-7-24"     =>true,
        "2015-7-25"     =>false,
        "2015-7-26"     =>false,
        "2015-7-27"     =>true,
        "2015-7-28"     =>true,
        "2015-7-29"     =>true,
        "2015-7-30"     =>true,
        "2015-7-31"     =>true,
        "2015-8-1"      =>false,
        "2015-8-2"      =>false,
        "2015-8-3"      =>true,
        "2015-8-4"      =>true,
        "2015-8-5"      =>true,
        "2015-8-6"      =>true,
        "2015-8-7"      =>true,
        "2015-8-8"      =>false,
        "2015-8-9"      =>false,
        "2015-8-10"     =>true,
        "2015-8-11"     =>true,
        "2015-8-12"     =>true,
        "2015-8-13"     =>true,
        "2015-8-14"     =>true,
        "2015-8-15"     =>false,
        "2015-8-16"     =>false,
        "2015-8-17"     =>true,
        "2015-8-18"     =>true,
        "2015-8-19"     =>true,
        "2015-8-20"     =>true,
        "2015-8-21"     =>true,
        "2015-8-22"     =>false,
        "2015-8-23"     =>false,
        "2015-8-24"     =>true,
        "2015-8-25"     =>true,
        "2015-8-26"     =>true,
        "2015-8-27"     =>true,
        "2015-8-28"     =>true,
        "2015-8-29"     =>false,
        "2015-8-30"     =>false,
        "2015-8-31"     =>true,
        "2015-9-1"      =>true,
        "2015-9-2"      =>true,
        "2015-9-3"      =>true,
        "2015-9-4"      =>true,
        "2015-9-5"      =>false,
        "2015-9-6"      =>false,
        "2015-9-7"      =>true,
        "2015-9-8"      =>true,
        "2015-9-9"      =>true,
        "2015-9-10"     =>true,
        "2015-9-11"     =>true,
        "2015-9-12"     =>false,
        "2015-9-13"     =>false,
        "2015-9-14"     =>true,
        "2015-9-15"     =>true,
        "2015-9-16"     =>true,
        "2015-9-17"     =>true,
        "2015-9-18"     =>true,
        "2015-9-19"     =>false,
        "2015-9-20"     =>false,
        "2015-9-21"     =>true,
        "2015-9-22"     =>true,
        "2015-9-23"     =>true,
        "2015-9-24"     =>true,
        "2015-9-25"     =>true,
        "2015-9-26"     =>false,
        "2015-9-27"     =>false,
        "2015-9-28"     =>true,
        "2015-9-29"     =>true,
        "2015-9-30"     =>true,
        "2015-10-1"     =>false,
        "2015-10-2"     =>false,
        "2015-10-3"     =>false,
        "2015-10-4"     =>false,
        "2015-10-5"     =>false,
        "2015-10-6"     =>false,
        "2015-10-7"     =>false,
        "2015-10-8"     =>true,
        "2015-10-9"     =>true,
        "2015-10-10"    =>true,
        "2015-10-11"    =>false,
        "2015-10-12"    =>true,
        "2015-10-13"    =>true,
        "2015-10-14"    =>true,
        "2015-10-15"    =>true,
        "2015-10-16"    =>true,
        "2015-10-17"    =>false,
        "2015-10-18"    =>false,
        "2015-10-19"    =>true,
        "2015-10-20"    =>true,
        "2015-10-21"    =>true,
        "2015-10-22"    =>true,
        "2015-10-23"    =>true,
        "2015-10-24"    =>false,
        "2015-10-25"    =>false,
        "2015-10-26"    =>true,
        "2015-10-27"    =>true,
        "2015-10-28"    =>true,
        "2015-10-29"    =>true,
        "2015-10-30"    =>true,
        "2015-10-31"    =>false,
        "2015-11-1"     =>false,
        "2015-11-2"     =>true,
        "2015-11-3"     =>true,
        "2015-11-4"     =>true,
        "2015-11-5"     =>true,
        "2015-11-6"     =>true,
        "2015-11-7"     =>false,
        "2015-11-8"     =>false,
        "2015-11-9"     =>true,
        "2015-11-10"    =>true,
        "2015-11-11"    =>true,
        "2015-11-12"    =>true,
        "2015-11-13"    =>true,
        "2015-11-14"    =>false,
        "2015-11-15"    =>false,
        "2015-11-16"    =>true,
        "2015-11-17"    =>true,
        "2015-11-18"    =>true,
        "2015-11-19"    =>true,
        "2015-11-20"    =>true,
        "2015-11-21"    =>false,
        "2015-11-22"    =>false,
        "2015-11-23"    =>true,
        "2015-11-24"    =>true,
        "2015-11-25"    =>true,
        "2015-11-26"    =>true,
        "2015-11-27"    =>true,
        "2015-11-28"    =>false,
        "2015-11-29"    =>false,
        "2015-11-30"    =>true,
        "2015-12-1"     =>true,
        "2015-12-2"     =>true,
        "2015-12-3"     =>true,
        "2015-12-4"     =>true,
        "2015-12-5"     =>false,
        "2015-12-6"     =>false,
        "2015-12-7"     =>true,
        "2015-12-8"     =>true,
        "2015-12-9"     =>true,
        "2015-12-10"    =>true,
        "2015-12-11"    =>true,
        "2015-12-12"    =>false,
        "2015-12-13"    =>false,
        "2015-12-14"    =>true,
        "2015-12-15"    =>true,
        "2015-12-16"    =>true,
        "2015-12-17"    =>true,
        "2015-12-18"    =>true,
        "2015-12-19"    =>false,
        "2015-12-20"    =>false,
        "2015-12-21"    =>true,
        "2015-12-22"    =>true,
        "2015-12-23"    =>true,
        "2015-12-24"    =>true,
        "2015-12-25"    =>true,
        "2015-12-26"    =>false,
        "2015-12-27"    =>false,
        "2015-12-28"    =>true,
        "2015-12-29"    =>true,
        "2015-12-30"    =>true,
        "2015-12-31"    =>true
    );
    private static $weeks = array(
        '1' => '一',
        '2' => '二',
        '3' => '三',
        '4' => '四',
        '5' => '五',
        '6' => '六',
        '7' => '日'
    );

    private function getWeekDay( $i ){
        $prefix = '';
        $date = '';
        if( $i == 2){
            $prefix = '后天：';
            $date = date('n月j日', time()+(86400*$i));
        }else{
            if( date('N') < 4 && $i < 6 ){
                $prefix = '本周';
            }else{
                if( $i < 6 ){
                    $prefix = '下周';
                }else{
                    $prefix = '下下周';
                }
            }
            $date = self::$weeks[date('N', time()+(86400*$i))].' '.date('n月j日', time()+(86400*$i));
        }

        return $prefix.$date;
    }

    public function getWithdrawDay(){

        // case 1:  明天银行上班且今天的提现申请是下午5点5分之前  就是  明天到账
        if ( self::$days[date('Y-n-j', time()+86400)] === true && ( (int)date('Gi') < 1750 ? true : false) ) {
            return '明天 '.date('n月j日', time()+86400);
        // case n:  取决于后天银行上不上班
        }else{

            // 因为放假最大天数是7天
            for ($i=2; $i <= 9; $i++) { 
                // 8天内哪天银行上班就是哪天进行提现操作
                if (self::$days[date('Y-n-j', time()+(86400*$i))] === true){
                    return self::getWeekDay( $i );
                    break;
                }else{
                    continue;
                }
            }

        }

    }

}
