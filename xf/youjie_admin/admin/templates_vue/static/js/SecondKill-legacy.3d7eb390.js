(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SecondKill"],{"01fd":function(t,e,a){},"0a49":function(t,e,a){var s=a("9b43"),i=a("626a"),o=a("4bf8"),r=a("9def"),n=a("cd1c");t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,u=4==t,d=6==t,_=5==t||d,p=e||n;return function(e,n,m){for(var f,g,b=o(e),v=i(b),y=s(n,m,3),h=r(v.length),w=0,k=a?p(e,h):l?p(e,0):void 0;h>w;w++)if((_||w in v)&&(f=v[w],g=y(f,w,b),t))if(a)k[w]=g;else if(g)switch(t){case 3:return!0;case 5:return f;case 6:return w;case 2:k.push(f)}else if(u)return!1;return d?-1:c||u?u:k}}},1169:function(t,e,a){var s=a("2d95");t.exports=Array.isArray||function(t){return"Array"==s(t)}},1937:function(t,e,a){"use strict";var s=a("3b9c"),i=a.n(s);i.a},"1ea9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("有解商城管理中心")]),a("el-breadcrumb-item",[t._v("活动详情")])],1)],1),a("div",{staticClass:"activity-info-wrapper"},[a("p",[t._v("活动名称："+t._s(t.secbuy_info.secbuy_name))]),a("p",[t._v("活动时间："+t._s(t.fmtTime(t.secbuy_info.start_time)+" ~ "+t.fmtTime(t.secbuy_info.end_time)))])]),a("div",{staticClass:"goods-list-wrapper"},[a("p",[t._v("已绑定商品")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.goods_info,stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"商品ID",prop:"goods_id"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"goods_name","min-width":"300%","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"所属商家",prop:"shop_name","min-width":"200%","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"可售库存",prop:"goods_number"}}),a("el-table-column",{attrs:{label:"活动限购数量",prop:"secbuy_quantity","min-width":"120%"}}),a("el-table-column",{attrs:{label:"促销现金结算价",prop:"secbuy_close_price","min-width":"120%",formatter:t.fmtMoney}}),a("el-table-column",{attrs:{label:"促销积分结算价",prop:"ssettlement_surplus","min-width":"120%",formatter:t.fmtMoney}}),a("el-table-column",{attrs:{label:"原价","min-width":"200%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.utils.formatMoney(e.row.goods_shop_price)))]),a("p",[t._v("\n            "+t._s("(现金:"+t.utils.formatMoney(e.row.goods_cash)+" + 积分:"+t.utils.formatMoney(e.row.goods_money_line)+")")+"\n          ")])]}}])}),a("el-table-column",{attrs:{label:"促销价","min-width":"200%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.utils.formatMoney(e.row.shop_price)))]),a("p",[t._v("\n            "+t._s("(现金:"+t.utils.formatMoney(e.row.cash_price)+" + 积分:"+t.utils.formatMoney(e.row.huanbi_price)+")")+"\n          ")])]}}])})],1)],1),a("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":t.params.pageNumber,"page-size":t.params.pageSize,background:"",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.params,"pageNumber",e)},"update:current-page":function(e){return t.$set(t.params,"pageNumber",e)}}}),a("div",{staticClass:"btn-wrapper"},[a("el-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1)],1)},i=[],o=a("3b8b"),r=(a("873b"),{name:"SecondKillDetail",data:function(){return{secbuy_info:[],goods_info:[],params:{secbuy_id:this.$route.params.id,pageNumber:1,pageSize:5},currentPage:1,total:0,loading:!1}},created:function(){this.getActivityDetail()},methods:{getActivityDetail:function(){var t=this;this.loading=!0,Object(o["a"])(this.params).then(function(e){t.secbuy_info=e.secbuy_info,t.goods_info=e.list,t.total=e.total,t.loading=!1})},handleCurrentChange:function(){this.getActivityDetail()},fmtTime:function(t){return this.utils.formatDate("YYYY-MM-DD HH:mm:ss",this.utils.formatStamp(t,"1"))},fmtMoney:function(t,e){return this.utils.formatMoney(t[e.property])}}}),n=r,l=(a("8867"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"488f5142",null);e["default"]=c.exports},"20d6":function(t,e,a){"use strict";var s=a("5ca1"),i=a("0a49")(6),o="findIndex",r=!0;o in[]&&Array(1)[o](function(){r=!1}),s(s.P+s.F*r,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},"217b":function(t,e,a){"use strict";var s=a("f644"),i=a.n(s);i.a},"21a6":function(t,e,a){(function(a){var s,i,o;(function(a,r){i=[],s=r,o="function"===typeof s?s.apply(e,i):s,void 0===o||(t.exports=o)})(0,function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function s(t,e,a){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){n(s.response,e,a)},s.onerror=function(){console.error("could not download file")},s.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(s){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,n=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,a){var n=r.URL||r.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?o(l):i(l.href)?s(t,e,a):o(l,l.target="_blank")):(l.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(l.href)},4e4),setTimeout(function(){o(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,a,r){if(a=a||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,r),a);else if(i(t))s(t,a,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){o(n)})}}:function(t,e,a,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return s(t,e,a);var o="application/octet-stream"===t.type,n=/constructor/i.test(r.HTMLElement)||r.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&n)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},c.readAsDataURL(t)}else{var u=r.URL||r.webkitURL,d=u.createObjectURL(t);i?i.location=d:location.href=d,i=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});r.saveAs=n.saveAs=n,t.exports=n})}).call(this,a("c8ba"))},"2f40":function(t,e,a){"use strict";var s=a("6e82"),i=a.n(s);i.a},"37ba":function(t,e,a){"use strict";var s=a("4739"),i=a.n(s);i.a},3837:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"container"},[a("page-title",{attrs:{"first-title":"编辑商品"}}),a("div",{staticClass:"good-info-wrapper"},[a("el-form",{ref:"goodForm",attrs:{"label-width":"120px",rules:t.goodRules,model:t.good_infos}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.goods_name,callback:function(e){t.$set(t.good_infos,"goods_name",e)},expression:"good_infos.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品编号",prop:"goods_id"}},[a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.goods_id,callback:function(e){t.$set(t.good_infos,"goods_id",e)},expression:"good_infos.goods_id"}})],1),a("el-form-item",{attrs:{label:"所属店铺",prop:"shop_name"}},[a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.shop_name,callback:function(e){t.$set(t.good_infos,"shop_name",e)},expression:"good_infos.shop_name"}})],1),a("el-form-item",{attrs:{label:"秒杀结算价",prop:"secbuy_close_price"}},[a("el-input",{attrs:{clearable:""},model:{value:t.good_infos.secbuy_close_price,callback:function(e){t.$set(t.good_infos,"secbuy_close_price",e)},expression:"good_infos.secbuy_close_price"}}),a("span",[t._v("注：请输入数字(下同)")])],1),a("el-form-item",{attrs:{label:"秒杀价",prop:"shop_price"}},[a("el-input",{attrs:{clearable:""},model:{value:t.good_infos.shop_price,callback:function(e){t.$set(t.good_infos,"shop_price",e)},expression:"good_infos.shop_price"}}),a("div",{staticClass:"price-wrapper"},[a("p",[a("label",[t._v("现金价")]),a("el-input",{attrs:{clearable:""},model:{value:t.good_infos.cash_price,callback:function(e){t.$set(t.good_infos,"cash_price",e)},expression:"good_infos.cash_price"}})],1),a("p",[a("label",[t._v("积分支付上限")]),a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.huanbi_price,callback:function(e){t.$set(t.good_infos,"huanbi_price",e)},expression:"good_infos.huanbi_price"}})],1)])],1),a("el-form-item",{attrs:{label:"原价",prop:"goods_shop_price"}},[a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.goods_shop_price,callback:function(e){t.$set(t.good_infos,"goods_shop_price",e)},expression:"good_infos.goods_shop_price"}}),a("div",{staticClass:"price-wrapper"},[a("p",[a("label",[t._v("现金价")]),a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.goods_cash,callback:function(e){t.$set(t.good_infos,"goods_cash",e)},expression:"good_infos.goods_cash"}})],1),a("p",[a("label",[t._v("积分支付上限")]),a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.goods_money_line,callback:function(e){t.$set(t.good_infos,"goods_money_line",e)},expression:"good_infos.goods_money_line"}})],1)])],1),a("el-form-item",{attrs:{label:"可售库存",prop:"goods_number"}},[a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.goods_number,callback:function(e){t.$set(t.good_infos,"goods_number",e)},expression:"good_infos.goods_number"}})],1),a("el-form-item",{attrs:{label:"秒杀库存",prop:"secbuy_quantity"}},[a("el-input",{attrs:{clearable:""},model:{value:t.good_infos.secbuy_quantity,callback:function(e){t.$set(t.good_infos,"secbuy_quantity",e)},expression:"good_infos.secbuy_quantity"}})],1),a("el-form-item",{attrs:{label:"每人限购",prop:"max_quantity"}},[a("el-input",{model:{value:t.good_infos.max_quantity,callback:function(e){t.$set(t.good_infos,"max_quantity",e)},expression:"good_infos.max_quantity"}})],1),a("el-form-item",{attrs:{label:"排序值",prop:"goods_order"}},[a("el-input",{attrs:{clearable:""},model:{value:t.good_infos.goods_order,callback:function(e){t.$set(t.good_infos,"goods_order",e)},expression:"good_infos.goods_order"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.saveGood}},[t._v("确定")]),a("el-button",{on:{click:t.goBack}},[t._v("返回")])],1)],1)],1)],1)},i=[],o=(a("a481"),a("c5f6"),a("3b8b")),r={name:"KillGoodEdit",data:function(){var t=this,e=function(e,a,s){a&&(Number(a)>Number(t.good_infos.goods_number)?s(new Error("活动限购数量不得大于库存")):s())},a=function(e,a,s){t.good_infos.secbuy_quantity&&Number(a)>Number(t.good_infos.secbuy_quantity)?s(new Error("每人限购不得大于活动限购数量")):s()},s=function(e,a,s){""!=a&&""!=t.good_infos.cash_price&&Number(a)<Number(t.good_infos.cash_price)?(s(new Error("秒杀价需大于等于现金价")),t.good_infos.shop_price="",t.good_infos.cash_price=""):s()},i=function(t,e,a){e&&(isNaN(e)?a(new Error("请输入数字")):a())};return{notEdit:!0,good_infos:{},goodRules:{secbuy_close_price:[{required:!0,message:"秒杀结算价必填",trigger:"blur"},{validator:i,message:"请输入数字",trigger:"blur"}],shop_price:[{required:!0,message:"秒杀价必填",trigger:"blur"},{validator:i,message:"请输入数字",trigger:"blur"},{validator:s,trigger:"blur"}],secbuy_quantity:[{required:!0,message:"活动限购数量必填",trigger:"blur"},{validator:e,trigger:"blur"},{validator:i,message:"请输入数字",trigger:"blur"}],max_quantity:[{required:!0,message:"每人限购数量必填",trigger:"blur"},{validator:a,trigger:"blur"},{validator:i,message:"请输入数字",trigger:"blur"}],goods_order:[{required:!0,message:"排序值必填",trigger:"blur"},{validator:i,message:"请输入数字",trigger:"blur"}]},current_token_type:"",loading:!0,javaData:{ori_secbuy_quantity:"",secbuy_goods_id:this.$route.params.goodID?this.$route.params.goodID:""}}},created:function(){var t=this;Object(o["f"])(this.$route.params.goodID).then(function(e){t.good_infos=e[0],t.current_token_type=e[0].token_type,t.loading=!1,t.javaData.ori_secbuy_quantity=e[0].secbuy_quantity})},watch:{shop_cash_price:function(t){this.good_infos.huanbi_price=Number(t.shop_price)-Number(t.cash_price)}},computed:{shop_cash_price:function(){var t={shop_price:this.good_infos.shop_price,cash_price:this.good_infos.cash_price};return t}},methods:{saveGood:function(){var t=this;this.$refs["goodForm"].validate(function(e){if(e){if(Number(t.good_infos.shop_price)!==Number(t.good_infos.cash_price)+Number(t.good_infos.huanbi_price))return void t.$message.error("秒杀价为现金价与积分支付上限的和");console.log(t.javaData.ori_secbuy_quantity),console.log(t.good_infos.secbuy_quantity),t.javaData.ori_secbuy_quantity!=Number(t.good_infos.secbuy_quantity)?(console.log(t.javaData),console.log(t.javaData.secbuy_goods_id),t.$api.put("hd/itzSecbuyGoods/secbuy/goods?secbuy_goods_id=".concat(t.javaData.secbuy_goods_id,"&ori_secbuy_quantity=").concat(t.javaData.ori_secbuy_quantity,"&secbuy_quantity=").concat(t.good_infos.secbuy_quantity),null,function(e){200==e.status&&Object(o["i"])(t.good_infos).then(function(e){e&&(t.$message.success("保存成功"),t.goBack())},function(e){t.$message({message:e.errorMsg,type:"error"}),"1001"==e.errorCode?t.good_infos.shop_price="":"1002"==e.errorCode?t.good_infos.cash_price="":"1003"==e.errorCode?t.good_infos.shop_price="":"1004"==e.errorCode&&(t.good_infos.cash_price="")})})):Object(o["i"])(t.good_infos).then(function(e){e&&(t.$message.success("保存成功"),t.goBack())},function(e){t.$message({message:e.errorMsg,type:"error"}),"1001"==e.errorCode?t.good_infos.shop_price="":"1002"==e.errorCode?t.good_infos.cash_price="":"1003"==e.errorCode?t.good_infos.shop_price="":"1004"==e.errorCode&&(t.good_infos.cash_price="")})}})},goBack:function(){this.$router.replace({name:"SecondKillAdd",query:{id:this.$route.params.actID}})}}},n=r,l=(a("8220"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"ed7e764c",null);e["default"]=c.exports},"3b8b":function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"a",function(){return o}),a.d(e,"e",function(){return r}),a.d(e,"g",function(){return n}),a.d(e,"d",function(){return l}),a.d(e,"b",function(){return c}),a.d(e,"i",function(){return u}),a.d(e,"h",function(){return d}),a.d(e,"f",function(){return _}),a.d(e,"k",function(){return p}),a.d(e,"j",function(){return m}),a.d(e,"l",function(){return f});var s=a("65c6"),i=function(t){return Object(s["a"])("/admin/api.seckill.activity.add","POST",{secbuy_id:t.secbuy_id,secbuy_name:t.secbuy_name,start_time:t.start_time,end_time:t.end_time,pageNumber:t.pageNumber,pageSize:t.pageSize,is_select:t.is_select,secbuy_status:t.secbuy_status,data:t.productlist})},o=function(t){return Object(s["a"])("/admin/api.seckill.activity.look","POST",{secbuy_id:t.secbuy_id,pageNumber:t.pageNumber,pageSize:t.pageSize})},r=function(t){return Object(s["a"])("/admin/api.seckill.activity.disable","POST",{secbuy_id:t})},n=function(t){return Object(s["a"])("/admin/api.seckill.activity.open","POST",{secbuy_id:t})},l=function(t){return Object(s["a"])("/admin/api.seckill.activity.del","POST",{secbuy_id:t})},c=function(t){return Object(s["a"])("/admin/api.seckill.activity.find","POST",t)},u=function(t){return Object(s["a"])("/admin/api.seckill.goods.edit","POST",t)},d=function(t){return Object(s["a"])("/admin/api.seckill.goods.del","POST",{id:t})},_=function(t){return Object(s["a"])("/admin/api.seckill.goods.single","POST",{id:t})},p=function(t){return Object(s["a"])("/admin/api.seckill.goods.sale","POST",{id:t})},m=function(t){return Object(s["a"])("/admin/api.seckill.activity.add","POST",t)},f=function(t){return Object(s["b"])("/admin/api.seckill.goods.template","POST")}},"3b9c":function(t,e,a){},4739:function(t,e,a){},5147:function(t,e,a){var s=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[s]=!1,!"/./"[t](e)}catch(i){}}return!0}},5416:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("有解商城管理中心")]),a("el-breadcrumb-item",[t._v("运营活动管理")]),a("el-breadcrumb-item",[t._v("编辑商品")])],1)],1),a("div",{staticClass:"good-info-wrapper"},[a("el-form",{ref:"goodForm",attrs:{"label-width":"150px",rules:t.goodRules,model:t.good_infos}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.goods_name,callback:function(e){t.$set(t.good_infos,"goods_name",e)},expression:"good_infos.goods_name"}})],1),a("el-form-item",{attrs:{label:"可售库存",prop:"goods_number"}},[a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.remain_goods_number,callback:function(e){t.remain_goods_number=e},expression:"remain_goods_number"}})],1),a("el-form-item",{attrs:{label:"活动限购数量",prop:"secbuy_quantity"}},[a("el-input",{attrs:{clearable:""},model:{value:t.good_infos.secbuy_quantity,callback:function(e){t.$set(t.good_infos,"secbuy_quantity",e)},expression:"good_infos.secbuy_quantity"}}),a("span",[t._v("注：请输入数字(下同)")])],1),a("el-form-item",{attrs:{label:"促销现金结算价",prop:"secbuy_close_price"}},[a("el-input",{model:{value:t.good_infos.secbuy_close_price,callback:function(e){t.$set(t.good_infos,"secbuy_close_price",e)},expression:"good_infos.secbuy_close_price"}})],1),a("el-form-item",{attrs:{label:"促销积分结算价",prop:"settlement_surplus"}},[a("el-input",{model:{value:t.good_infos.settlement_surplus,callback:function(e){t.$set(t.good_infos,"settlement_surplus",e)},expression:"good_infos.settlement_surplus"}})],1),a("el-form-item",{attrs:{label:"原价",prop:"goods_shop_price"}},[a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.goods_shop_price,callback:function(e){t.$set(t.good_infos,"goods_shop_price",e)},expression:"good_infos.goods_shop_price"}}),a("div",{staticClass:"price-wrapper"},[a("p",[a("label",[t._v("现金")]),a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.goods_cash,callback:function(e){t.$set(t.good_infos,"goods_cash",e)},expression:"good_infos.goods_cash"}})],1),a("p",[a("label",[t._v("积分")]),a("el-input",{attrs:{disabled:t.notEdit},model:{value:t.good_infos.goods_money_line,callback:function(e){t.$set(t.good_infos,"goods_money_line",e)},expression:"good_infos.goods_money_line"}})],1)])],1),a("el-form-item",{attrs:{label:"促销价",prop:"shop_price"}},[2==t.good_infos.secbuy_type?[a("el-input",{attrs:{disabled:t.notEdit,clearable:""},model:{value:t.total_cash_price,callback:function(e){t.total_cash_price=e},expression:"total_cash_price"}}),a("span",[t._v("折扣: "+t._s(t.currentDiscount))]),a("div",{staticClass:"price-wrapper"},[a("p",[a("label",[t._v("现金")]),a("el-input",{attrs:{clearable:""},model:{value:t.good_infos.cash_price,callback:function(e){t.$set(t.good_infos,"cash_price",e)},expression:"good_infos.cash_price"}})],1),a("p",[a("label",[t._v("积分")]),a("el-input",{attrs:{clearable:""},model:{value:t.good_infos.huanbi_price,callback:function(e){t.$set(t.good_infos,"huanbi_price",e)},expression:"good_infos.huanbi_price"}})],1)])]:[a("el-input",{attrs:{disabled:t.notEdit,clearable:""},model:{value:t.good_infos.shop_price,callback:function(e){t.$set(t.good_infos,"shop_price",e)},expression:"good_infos.shop_price"}}),a("div",{staticClass:"price-wrapper"},[a("p",[a("label",[t._v("现金")]),a("el-input",{attrs:{clearable:""},model:{value:t.good_infos.cash_price,callback:function(e){t.$set(t.good_infos,"cash_price",e)},expression:"good_infos.cash_price"}})],1),a("p",[a("label",[t._v("积分")]),a("el-input",{attrs:{clearable:""},model:{value:t.good_infos.huanbi_price,callback:function(e){t.$set(t.good_infos,"huanbi_price",e)},expression:"good_infos.huanbi_price"}})],1)])]],2),a("el-form-item",{attrs:{label:"每人限购",prop:"max_quantity"}},[a("p",{staticClass:"radio-wrapper-p"},[a("el-radio",{attrs:{label:"1"},model:{value:t.limit_buy,callback:function(e){t.limit_buy=e},expression:"limit_buy"}},[t._v("不限")])],1),a("p",{staticClass:"radio-wrapper-p"},[a("el-radio",{attrs:{label:"2"},model:{value:t.limit_buy,callback:function(e){t.limit_buy=e},expression:"limit_buy"}},[t._v("数量")]),a("el-input",{attrs:{disabled:"2"!=t.limit_buy},model:{value:t.good_infos.max_quantity,callback:function(e){t.$set(t.good_infos,"max_quantity",e)},expression:"good_infos.max_quantity"}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.saveGood}},[t._v("确定")]),a("el-button",{on:{click:t.goBack}},[t._v("返回")])],1)],1)],1)])},i=[],o=(a("a481"),a("c5f6"),a("3b8b")),r={name:"KillGoodEdit",data:function(){var t=this,e=function(e,a,s){a&&(Number(a)>t.total_goods_number?s(new Error("活动限购数量不得大于库存")):s())},a=function(e,a,s){t.good_infos.secbuy_quantity&&Number(a)>Number(t.good_infos.secbuy_quantity)?s(new Error("每人限购不得大于活动限购数量")):s()},s=function(e,a,s){2==t.good_infos.secbuy_type&&Number(a)>=Number(t.good_infos.goods_shop_price)?s(new Error("促销价需小于原价")):s()},i=function(t,e,a){e&&(isNaN(e)?a(new Error("请输入数字")):a())};return{notEdit:!0,good_infos:{},goodRules:{secbuy_close_price:[{required:!0,message:"促销现金结算价必填",trigger:"blur"},{validator:i,message:"请输入数字",trigger:"blur"}],shop_price:[{required:!0,message:"促销价必填",trigger:"blur"},{validator:i,message:"请输入数字",trigger:"blur"},{validator:s,trigger:"blur"}],secbuy_quantity:[{required:!0,message:"活动限购数量必填",trigger:"blur"},{validator:e,trigger:"blur"},{validator:i,message:"请输入数字",trigger:"blur"}],max_quantity:[{required:!0,message:"每人限购数量必填",trigger:"blur"},{validator:a,trigger:"blur"},{validator:i,message:"请输入数字",trigger:"blur"}],goods_order:[{required:!0,message:"排序值必填",trigger:"blur"},{validator:i,message:"请输入数字",trigger:"blur"}]},loading:!1,limit_buy:"1",total_goods_number:void 0}},computed:{total_cash_price:function(){return this.good_infos.shop_price=Number(this.good_infos.huanbi_price)+Number(this.good_infos.cash_price),this.good_infos.shop_price},current_cash_price:function(){return this.good_infos.cash_price},current_huanbi_price:function(){return this.good_infos.huanbi_price},remain_goods_number:function(){return this.total_goods_number-Number(this.good_infos.secbuy_quantity)},currentDiscount:function(){return(10*Number(this.good_infos.shop_price)/Number(this.good_infos.goods_shop_price)).toFixed(1)}},watch:{current_cash_price:function(){1==this.good_infos.secbuy_type&&(this.good_infos.huanbi_price=Number(this.good_infos.shop_price)-Number(this.good_infos.cash_price))},current_huanbi_price:function(){1==this.good_infos.secbuy_type&&(this.good_infos.cash_price=Number(this.good_infos.shop_price)-Number(this.good_infos.huanbi_price))}},created:function(){var t=this;this.loading=!0,Object(o["f"])(this.$route.params.goodID).then(function(e){t.good_infos=e[0],t.total_goods_number=Number(t.good_infos.goods_number)+Number(t.good_infos.secbuy_quantity),t.limit_buy=t.good_infos.max_quantity>0?"2":"1",t.loading=!1})},methods:{saveGood:function(){var t=this;this.$refs["goodForm"].validate(function(e){if(e){if(1==t.good_infos.secbuy_type&&t.good_infos.huanbi_price<=t.good_infos.goods_money_line)return void t.$message.error("积分尊享活动的积分价必须大于原价的积分价");"1"==t.limit_buy&&(t.good_infos.max_quantity=0),Object(o["i"])(t.good_infos).then(function(e){e&&(t.$message.success("保存成功"),t.goBack())})}})},goBack:function(){this.$router.replace({name:"PromoteSaleAdd",query:{id:this.$route.params.actID}})}}},n=r,l=(a("37ba"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"68ddeae0",null);e["default"]=c.exports},"5d6b":function(t,e,a){var s=a("e53d").parseInt,i=a("a1ce").trim,o=a("e692"),r=/^[-+]?0[xX]/;t.exports=8!==s(o+"08")||22!==s(o+"0x16")?function(t,e){var a=i(String(t),3);return s(a,e>>>0||(r.test(a)?16:10))}:s},"5e1b":function(t,e,a){},6045:function(t,e,a){"use strict";a.d(e,"b",function(){return s}),a.d(e,"a",function(){return i});var s=[{status_id:0,status_name:"未开始"},{status_id:1,status_name:"进行中"},{status_id:2,status_name:"已结束"},{status_id:3,status_name:"已禁用"}],i=[{type_id:0,type_name:"不限"},{type_id:1,type_name:"仅积分"},{type_id:2,type_name:"仅浣豆"}]},"6e82":function(t,e,a){},7445:function(t,e,a){var s=a("63b6"),i=a("5d6b");s(s.G+s.F*(parseInt!=i),{parseInt:i})},"814c":function(t,e,a){"use strict";var s=a("8d01"),i=a.n(s);i.a},8220:function(t,e,a){"use strict";var s=a("b58d"),i=a.n(s);i.a},"873b":function(t,e,a){"use strict";a.d(e,"c",function(){return s}),a.d(e,"b",function(){return i}),a.d(e,"a",function(){return o});var s=[{status_id:0,status_name:"未开始"},{status_id:1,status_name:"进行中"},{status_id:2,status_name:"已结束"}],i=[{type_id:0,type_name:"不限"},{type_id:1,type_name:"仅积分"},{type_id:2,type_name:"仅浣豆"}],o=[{id:1,name:"积分专享"},{id:2,name:"限时折扣"}]},8867:function(t,e,a){"use strict";var s=a("bb74"),i=a.n(s);i.a},"8d01":function(t,e,a){},"8f78":function(t,e,a){"use strict";var s=a("b21a"),i=a.n(s);i.a},aef6:function(t,e,a){"use strict";var s=a("5ca1"),i=a("9def"),o=a("d2c8"),r="endsWith",n=""[r];s(s.P+s.F*a("5147")(r),"String",{endsWith:function(t){var e=o(this,t,r),a=arguments.length>1?arguments[1]:void 0,s=i(e.length),l=void 0===a?s:Math.min(i(a),s),c=String(t);return n?n.call(e,c,l):e.slice(l-c.length,l)===c}})},b21a:function(t,e,a){},b58d:function(t,e,a){},b5dc:function(t,e,a){"use strict";var s=a("01fd"),i=a.n(s);i.a},b9e9:function(t,e,a){a("7445"),t.exports=a("584a").parseInt},bb68:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"限时抢购"}}),a("div",{staticClass:"search-wrapper"},[a("el-form",{attrs:{inline:!0}},[a("el-row",{staticStyle:{"margin-right":"0"},attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{placeholder:"活动名称",clearable:""},model:{value:t.params.secbuy_name,callback:function(e){t.$set(t.params,"secbuy_name",e)},expression:"params.secbuy_name"}})],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间","value-format":"timestamp"},model:{value:t.params.create_start_time,callback:function(e){t.$set(t.params,"create_start_time",e)},expression:"params.create_start_time"}}),a("span",[t._v("  ~  ")]),a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间","value-format":"timestamp"},model:{value:t.params.create_end_time,callback:function(e){t.$set(t.params,"create_end_time",e)},expression:"params.create_end_time"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addNewActivity}},[t._v("\n              新增\n            ")])],1)],1),a("el-row",{staticStyle:{"margin-right":"0"},attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"活动状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"活动状态"},model:{value:t.params.secbuy_status,callback:function(e){t.$set(t.params,"secbuy_status",e)},expression:"params.secbuy_status"}},t._l(t.statusList,function(t){return a("el-option",{key:t.status_id,attrs:{label:t.status_name,value:t.status_id}})}),1)],1),a("el-form-item",{attrs:{label:"活动时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间","value-format":"timestamp"},model:{value:t.params.start_time,callback:function(e){t.$set(t.params,"start_time",e)},expression:"params.start_time"}}),a("span",[t._v("  ~  ")]),a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间","value-format":"timestamp"},model:{value:t.params.end_time,callback:function(e){t.$set(t.params,"end_time",e)},expression:"params.end_time"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:t.getActivityList}},[t._v("\n              搜索\n            ")])],1)],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.activityList,stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"secbuy_id",label:"序号"}}),a("el-table-column",{attrs:{prop:"secbuy_name",label:"活动名称","min-width":"450px"}}),a("el-table-column",{attrs:{label:"活动时间","min-width":"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.timeStampFmt(e.row,"start_time")))]),t._v("\n              至  \n            "),a("span",[t._v(t._s(t.timeStampFmt(e.row,"end_time")))])]}}])}),a("el-table-column",{attrs:{prop:"secbuy_status",label:"活动状态",formatter:t.statusFmt}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"180px",formatter:t.timeStampFmt}}),a("el-table-column",{attrs:{label:"操作","min-width":"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goDetail(e.row.secbuy_id)}}},[t._v("\n              查看\n            ")]),0===e.row.secbuy_status||1===e.row.secbuy_status||3===e.row.secbuy_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goEdit(e.row)}}},[t._v("\n              编辑\n            ")]):t._e(),0===e.row.secbuy_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goForbid(e.row)}}},[t._v("\n              禁用\n            ")]):t._e(),0===e.row.secbuy_status||3===e.row.secbuy_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goRemove(e.row.secbuy_id)}}},[t._v("\n              移除\n            ")]):t._e()]}}])})],1)],1),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper",total:t.total,"hide-on-single-page":!0},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},i=[],o=a("e814"),r=a.n(o),n=(a("aef6"),a("f499")),l=a.n(n),c=a("6045"),u=a("3b8b"),d={name:"SecondKill",data:function(){return{params:{pageNumber:1,pageSize:10,secbuy_name:"",start_time:"",end_time:"",create_start_time:"",create_end_time:"",secbuy_status:""},currentPage:1,total:0,activityList:[],statusList:c["b"],loading:null,isStart:!1}},created:function(){this.getActivityList()},computed:{canEdit:function(){}},methods:{getActivityList:function(){var t=this;this.loading=!0;var e=JSON.parse(l()(this.params));for(var a in e)a.endsWith("_time")&&e[a]&&(e[a]=this.utils.formatStamp(e[a]));Object(u["b"])(e).then(function(e){t.activityList=e.data,t.total=e.total,t.loading=!1})},addNewActivity:function(){this.$router.push({name:"SecondKillAdd",query:{operate:"add"}})},goDetail:function(t){this.$router.push({name:"SecondKillDetail",params:{id:t}})},goEdit:function(t){this.$router.push({name:"SecondKillAdd",query:{id:t.secbuy_id,status:t.secbuy_status}})},goForbid:function(t){var e=this;this.$confirm("确定禁用本场活动吗","提示").then(function(){Object(u["e"])(t.secbuy_id).then(function(a){a&&(t.secbuy_status=3,e.$message.success("禁用成功"))})})},goRemove:function(t){var e=this;this.$confirm("确定移除该活动吗？","提示").then(function(){e.loading=!0,e.$api.delete("hd/itzSecbuyGoods/batch?secbuy_id=".concat(t),null,function(a){200==a.status&&Object(u["d"])(t).then(function(t){t&&e.getActivityList()})})})},goStart:function(t){var e=this;this.$confirm("确定开启本场活动吗？","提示").then(function(){var a=r()(e.utils.formatStamp((new Date).getTime()));t.start_time<=a?e.$confirm("活动开始时间需大于当前时间，请修改活动时间","提示").then(function(){e.isStart=!0,e.goEdit(t)}):Object(u["g"])(t.secbuy_id).then(function(e){t.secbuy_status=0})})},timeStampFmt:function(t,e){var a="string"===typeof e?e:e.property,s=t[a];return s?this.utils.formatDate("YYYY-MM-DD HH:mm:ss",this.utils.formatStamp(s,1)):s},statusFmt:function(t,e){var a=t[e.property];return c["b"].map(function(t){return t.status_id===a?t.status_name:void 0})},handleCurrentChange:function(){this.params.pageNumber=this.currentPage,this.getActivityList()},addNewEnroll:function(){this.$router.push({name:"addNewEnroll"})}}},_=d,p=(a("b5dc"),a("2877")),m=Object(p["a"])(_,s,i,!1,null,"2fa82400",null);e["default"]=m.exports},bb74:function(t,e,a){},c612:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"活动详情"}}),a("div",{staticClass:"activity-info-wrapper"},[a("p",[t._v("活动名称："+t._s(t.secbuy_info.secbuy_name))]),a("p",[t._v("活动时间："+t._s(t.fmtTime(t.secbuy_info.start_time)+" ~ "+t.fmtTime(t.secbuy_info.end_time)))])]),a("div",{staticClass:"goods-list-wrapper"},[a("p",[t._v("已绑定商品")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.goods_info,stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{label:"序号",prop:"id"}}),a("el-table-column",{attrs:{label:"商品编号",prop:"goods_id"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"goods_name"}}),a("el-table-column",{attrs:{label:"排序值",prop:"goods_order"}}),a("el-table-column",{attrs:{label:"可售库存",prop:"goods_number"}}),a("el-table-column",{attrs:{label:"活动限购数量",prop:"secbuy_quantity"}}),a("el-table-column",{attrs:{label:"每人限购",prop:"max_quantity"}}),a("el-table-column",{attrs:{label:"秒杀结算价",prop:"secbuy_close_price",formatter:t.fmtMoney}}),a("el-table-column",{attrs:{label:"原价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.utils.formatMoney(e.row.goods_shop_price)))]),a("p",[t._v("\n              "+t._s("(现金价:"+t.utils.formatMoney(e.row.goods_cash)+" + 积分支付上限:"+t.utils.formatMoney(e.row.goods_money_line)+")")+"\n            ")])]}}])}),a("el-table-column",{attrs:{label:"秒杀总价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.utils.formatMoney(e.row.shop_price)))]),a("p",[t._v("\n              "+t._s("(现金价:"+t.utils.formatMoney(e.row.cash_price)+" + 积分支付上限:"+t.utils.formatMoney(e.row.huanbi_price)+")")+"\n            ")])]}}])}),a("el-table-column",{attrs:{label:"秒杀支付类型",prop:"token_type",formatter:t.fmtPayType}}),a("el-table-column",{attrs:{label:"所属店铺",prop:"shop_name"}})],1)],1),a("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":t.currentPage,"page-size":t.params.pageSize,background:"",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}),a("div",{staticClass:"btn-wrapper"},[a("el-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1)],1)},i=[],o=a("3b8b"),r=a("6045"),n={name:"SecondKillDetail",data:function(){return{secbuy_info:[],goods_info:[],params:{secbuy_id:this.$route.params.id,pageNumber:1,pageSize:5},currentPage:1,total:0,loading:null}},created:function(){this.getActivityDetail()},methods:{getActivityDetail:function(){var t=this;this.loading=!0,Object(o["a"])(this.params).then(function(e){t.secbuy_info=e.secbuy_info,t.goods_info=e.list,t.total=e.total,t.loading=!1})},handleCurrentChange:function(){console.log("current page is ",this.currentPage),this.params.pageNumber=this.currentPage,this.getActivityDetail()},fmtTime:function(t){return this.utils.formatDate("YYYY-MM-DD HH:mm:ss",this.utils.formatStamp(t,"1"))},fmtMoney:function(t,e){return this.utils.formatMoney(t[e.property])},fmtPayType:function(t,e){var a=t[e.property];return r["a"].map(function(t){return t.type_id===a?t.type_name:void 0})}}},l=n,c=(a("814c"),a("2877")),u=Object(c["a"])(l,s,i,!1,null,"24a7a60a",null);e["default"]=u.exports},c727:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.isLoading,expression:"isLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"container"},[a("page-title",{attrs:{"first-title":t.isAdd?"新增活动":"编辑活动"}}),a("div",{staticClass:"activity-info-wrapper"},[a("el-form",{ref:"activityForm",attrs:{"label-width":"120px",rules:t.addRules,model:t.activity_infos}},[a("el-form-item",{attrs:{label:"活动名称",prop:"secbuy_name"}},[a("el-input",{attrs:{placeholder:"请输入活动名称",clearable:"",disabled:t.isDisable},model:{value:t.activity_infos.secbuy_name,callback:function(e){t.$set(t.activity_infos,"secbuy_name",e)},expression:"activity_infos.secbuy_name"}})],1),a("el-form-item",{attrs:{label:"活动开始时间",prop:"start_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择活动开始时间","value-format":"timestamp","default-time":"00:00:00",disabled:t.isDisable},model:{value:t.activity_infos.start_time,callback:function(e){t.$set(t.activity_infos,"start_time",e)},expression:"activity_infos.start_time"}})],1),a("el-form-item",{attrs:{label:"活动结束时间",prop:"end_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择活动结束时间","value-format":"timestamp","default-time":"23:59:59",disabled:t.isDisable},model:{value:t.activity_infos.end_time,callback:function(e){t.$set(t.activity_infos,"end_time",e)},expression:"activity_infos.end_time"}})],1)],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.submitLoading,expression:"submitLoading"}],staticClass:"goods-list-wrapper"},[a("div",{staticClass:"import-good-wrapper"},[a("span",[t._v("*")]),a("label",[t._v("关联商品")]),a("el-upload",{ref:"uploadFile",attrs:{headers:t.importHeaders,action:t.action,data:t.postParams,name:"myfile","auto-upload":!1,"on-success":t.uploadSuccess,"on-change":t.addFile,"before-remove":t.removeFile,limit:1,"on-exceed":t.overFile}},[a("el-button",{attrs:{type:"primary",disabled:t.isDisable||t.mutex0}},[t._v("导入商品")])],1),a("el-button",{staticClass:"tpl-download",attrs:{type:"text",disabled:t.isDisable},on:{click:t.downloadTpl}},[t._v("模板下载")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticStyle:{width:"100%"},attrs:{data:t.goods_info,stripe:"",border:"","header-cell-style":{background:"#eef1f6"}}},[[t.isProduct?a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}):a("el-table-column",{attrs:{label:"序号",prop:"id",width:"50"}})],a("el-table-column",{attrs:{label:"商品编号:",prop:"goods_id"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"goods_name"}}),a("el-table-column",{attrs:{label:"排序值",prop:"goods_order"}}),a("el-table-column",{attrs:{label:"可售库存",prop:"goods_number"}}),a("el-table-column",{attrs:{label:"秒杀库存",prop:"secbuy_quantity"}}),a("el-table-column",{attrs:{label:"每人限购",prop:"max_quantity"}}),a("el-table-column",{attrs:{label:"秒杀结算价",prop:"secbuy_close_price",formatter:t.fmtMoney}}),a("el-table-column",{attrs:{label:"原价",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.utils.formatMoney(e.row.goods_shop_price)))]),a("p",[t._v("\n            "+t._s("(现金价:"+t.utils.formatMoney(e.row.goods_cash)+" + 积分支付上限:"+t.utils.formatMoney(e.row.goods_money_line)+")")+"\n          ")])]}}])}),a("el-table-column",{attrs:{label:"秒杀总价",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.utils.formatMoney(e.row.shop_price)))]),a("p",[t._v("\n            "+t._s("(现金价:"+t.utils.formatMoney(e.row.cash_price)+" + 积分支付上限:"+t.utils.formatMoney(e.row.huanbi_price)+")")+"\n          ")])]}}])}),a("el-table-column",{attrs:{label:"所属店铺",prop:"shop_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.curStatus?a("div",[a("el-button",{attrs:{type:"text",size:"small",disabled:!e.row.is_on_sale},on:{click:function(a){return t.sellNone(e.row)}}},[t._v("售罄")])],1):a("div",[!t.isProduct||t.isProduct&t.activity_infos.secbuy_id?[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goEdit(e.row.id)}}},[t._v("\n                编辑\n              ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goRemove(e.row.id)}}},[t._v("\n                移除\n              ")])]:[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.Removepro(e.row.goods_id)}}},[t._v("\n                移除\n              ")])]],2)]}}])})],2)],1),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper","page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}),a("div",{staticClass:"btn-groups-wrapper"},[a("el-button",{attrs:{type:"primary",disabled:t.notSave},on:{click:t.saveNewActivity}},[t._v("确定")]),a("el-button",{attrs:{type:""},on:{click:t.goback}},[t._v("返回")])],1),a("div",{staticClass:"error-good-info-wrapper"},[a("el-dialog",{attrs:{visible:t.centerDialogVisible,width:"50%","show-close":!1},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("导入商品提示")]),a("div",[a("div",[t.data_type.sale?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("已下架")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.sale))])],1):t._e(),t.data_type.goods_number?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("已售罄")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.goods_number))])],1):t._e(),t.data_type.sale_goods_number?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("售罄并下架")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.sale_goods_number))])],1):t._e(),t.data_type.check_zero?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("未审核")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.check_zero))])],1):t._e(),t.data_type.export_fail?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("导入失败")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.export_fail))])],1):t._e(),t.data_type.param_error?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("数据错误")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.param_error))])],1):t._e(),t.data_type.money_error?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("金额错误")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.money_error))])],1):t._e(),t.data_type.sku_goods?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("多规格SKU")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.sku_goods))])],1):t._e(),t.data_type.seckill_price?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("设置的秒杀价不能高于本店售价")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.seckill_price))])],1):t._e(),t.data_type.seckill_casg?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("设置的秒杀现金价不能高于本店售价中的现金价")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.seckill_casg))])],1):t._e(),t.data_type.shop_seckill_price?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("售价 - 秒杀价需大于等于 1")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.shop_seckill_price))])],1):t._e(),t.data_type.shop_seckill_cash?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("售价现金价 - 秒杀现金价需大于等于 1")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.shop_seckill_cash))])],1):t._e(),t.data_type.goods_name?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("商品编号与商品名称不一致，请修改后重新提交。")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.goods_name))])],1):t._e(),t.data_type.discount_activity_shop_price?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("限时折扣活动价要低于本店售价。")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.discount_activity_shop_price))])],1):t._e(),t.data_type.special_activity_shop_price?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("积分专享活动价不等于本店售价。")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.special_activity_shop_price))])],1):t._e(),t.data_type.special_activity_money_line?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("积分专享抵扣上限小于默认权限抵扣上限。")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.special_activity_money_line))])],1):t._e(),t.data_type.other_activity_running?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("已参与其他活动")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.other_activity_running))])],1):t._e(),a("p",[t._v("请仔细核对商品信息后重新上传失败数据")])],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("确 定")])],1)])],1)],1)},i=[],o=(a("20d6"),a("a481"),a("cebc")),r=(a("c5f6"),a("f499")),n=a.n(r),l=a("3b8b"),c=a("21a6"),u=a("6045"),d=(a("2f62"),{name:"SecondKillAdd",data:function(){var t=this,e=function(e,a,s){""!==a&&(""!==t.activity_infos.start_time&&a<=t.activity_infos.start_time?(s(new Error("结束时间不能小于开始时间")),t.activity_infos.end_time=""):s())},a=function(e,a,s){""!==a&&(""!==t.activity_infos.end_time&&a>=t.activity_infos.end_time?(s(new Error("活动时间不得大于结束时间")),t.activity_infos.start_time=""):s())},s=null;return window.token&&(s=window.token),{action:"https://api.youjiemall.com/admin/api.seckill.activity.add",importHeaders:{"X-ADMIN-Authorization":s,"X-HH-Ver":Object({NODE_ENV:"production",VUE_APP_APPSERVER_HOST:"https://api.youjiemall.com",VUE_APP_HDSERVER_HOST:"https://hd.youjiemall.com",VUE_APP_JAVASERVER_HOST:"https://docker.youjiemall.com",VUE_APP_STORENAME:"有解",BASE_URL:"templates_vue/"}).VUE_APP_APPSERVER_VERSION},hasFile:!1,activity_infos:{secbuy_id:"",secbuy_name:"",start_time:"",end_time:""},pageSize:5,pageNumber:1,currentPage:1,total:0,goods_info:[],data_type:{sale:"",goods_number:"",sale_goods_number:"",check_zero:"",export_fail:"",param_error:"",money_error:"",sku_goods:"",discount_activity_shop_price:"",special_activity_shop_price:"",special_activity_money_line:"",goods_name:"",other_activity_running:"",seckill_casg:"",seckill_price:"",shop_seckill_cash:"",shop_seckill_price:""},secbuy_infos:{},addRules:{secbuy_name:[{required:!0,message:"请输入活动名称",trigger:"change"},{min:3,max:30,message:"活动名称长度3~30",trigger:"change"}],start_time:[{required:!0,message:"请选择开始时间",trigger:"blur"},{validator:a,trigger:"blur"}],end_time:[{required:!0,message:"请选择结束时间",trigger:"blur"},{validator:e,trigger:"blur"}]},fullscreenLoading:!0,submitLoading:!1,pageLoading:!1,notSave:!1,centerDialogVisible:!1,mutex0:!1,mutex1:!1,ProductList:localStorage.getItem("productlist")?JSON.parse(localStorage.getItem("productlist")):[]}},created:function(){this.isAdd||this.isProduct||(this.activity_infos.secbuy_id=this.$route.query.id,this.getActivityInfos()),this.isAdd&&(localStorage.clear(),this.goods_info=this.ProductList=[]),this.isProduct&&this.ProductList.length>0&&(this.ProductList.forEach(function(t){t.secbuy_close_price=t.cash_price,t.settlement_surplus=t.huanbi_price}),localStorage.setItem("productlist",n()(this.ProductList)),this.goods_info=this.ProductList,this.mutex0=!0,this.mutex1=!0,this.pageLoading=!1)},computed:{isAdd:function(){return"add"===this.$route.query.operate},curStatus:function(){return 1===Number(this.$route.query.status)},isDisable:function(){return!this.isAdd&&this.curStatus},isValid:function(){var t=!1;return this.$refs["activityForm"].validate(function(e){t=e}),t},isLoading:function(){return this.fullscreenLoading&&!this.isAdd&&!this.isProduct},postParams:function(){var t,e,a,s=this.pageNumber,i=this.pageSize;return this.isProduct?(t=1,a=0,e=localStorage.getItem("productlist")):t=0,Object(o["a"])({},this.activity_infos,{pageNumber:s,pageSize:i,is_select:t,productlist:e,secbuy_status:a})},isProduct:function(){return"productlist"===this.$route.query.operate}},methods:{getActivityInfos:function(){var t=this;this.pageLoading=!0,Object(l["a"])(this.postParams).then(function(e){t.activity_infos=e.secbuy_info,t.activity_infos.start_time=t.utils.formatStamp(t.activity_infos.start_time,1),t.activity_infos.end_time=t.utils.formatStamp(t.activity_infos.end_time,1),t.goods_info=e.list,t.fullscreenLoading=!1,t.pageLoading=!1,t.isProduct?t.ProductList&&t.ProductList.length>0&&(t.goods_info=t.ProductList):t.total=e.total})},handleCurrentChange:function(){console.log("current page is ",this.currentPage),this.pageNumber=this.currentPage,this.getActivityInfos()},goEdit:function(t){this.$router.replace({name:"KillGoodEdit",params:{actID:this.activity_infos.secbuy_id,goodID:t}})},goRemove:function(t){var e=this;this.$confirm("确定移除该商品吗","提示").then(function(){e.pageLoading=!0,e.$api.delete("hd/itzSecbuyGoods?secbuy_goods_id=".concat(t),null,function(a){200==a.status&&Object(l["h"])(t).then(function(t){t&&(console.log(t),e.handleCurrentChange())})})})},sellNone:function(t){var e=this;Object(l["k"])(t.id).then(function(a){a&&(e.$message.success("该商品下架成功"),t.is_on_sale=0)})},saveNewActivity:function(){var t=this;if(this.isValid)if(this.isAdd)this.hasFile?(this.submitLoading=!0,this.$refs.uploadFile.submit()):this.$message.error("新增活动必须导入商品");else if(this.isProduct)if(console.log(this.postParams),this.postParams.productlist&&"[]"!=this.postParams.productlist){this.submitLoading=!1;var e=JSON.parse(localStorage.getItem("productlist")),a=[];e.forEach(function(t){var e={};e["quantity"]=t.secbuy_quantity,e["id"]=t.signup_id,a.push(e)}),console.log(a),this.$api.put("hd/itzSecbuyGoods",a,function(e){200==e.status&&(console.log(t.postParams),Object(l["c"])(t.postParams).then(function(e){if(e){for(var a in console.log(e),t.data_type=e.data.data_type,t.data_type)t.data_type[a].length>0&&(t.centerDialogVisible=!0,t.submitLoading=!1),t.data_type[a]=t.data_type[a].join();if(t.total=e.total,e.list.length<1)return void t.$confirm("保存失败,请移除问题商品之后重新保存","提示",{confirmButtonText:"确定",type:"warning"});t.submitLoading=!1,t.$message.success("保存成功"),localStorage.clear(),t.mutex0=!1,t.mutex1=!1,t.submitLoading=!1,t.goods_info=e.list,t.activity_infos=e.secbuy_info,t.activity_infos.start_time=t.utils.formatStamp(t.activity_infos.start_time,1),t.activity_infos.end_time=t.utils.formatStamp(t.activity_infos.end_time,1)}}))})}else this.$message.error("新增活动必须导入商品");else{if((new Date).getTime()>=this.activity_infos.start_time)return void this.$message.error("活动已经开始了");this.hasFile?(this.submitLoading=!0,this.$refs.uploadFile.submit()):(this.submitLoading=!0,Object(l["c"])(this.postParams).then(function(e){e&&(t.$message.success("保存成功"),t.submitLoading=!1)}))}},uploadSuccess:function(t){this.submitLoading=!1,this.$refs.uploadFile.clearFiles();var e=t.data;for(var a in this.data_type=e.data.data_type,this.data_type)this.data_type[a].length>0&&(this.centerDialogVisible=!0),this.data_type[a]=this.data_type[a].join();if(this.isAdd&&!this.centerDialogVisible&&(this.notSave=!0),this.total=e.total,t.code||0===e.list.length)return this.$message.error("保存失败,请重新导入商品"),void(this.hasFile=!1);this.$message.success("保存成功"),this.goods_info=e.list,this.submitLoading=!1,this.activity_infos=e.secbuy_info,this.activity_infos.start_time=this.utils.formatStamp(this.activity_infos.start_time,1),this.activity_infos.end_time=this.utils.formatStamp(this.activity_infos.end_time,1)},overFile:function(){this.$message.error("只能上传一个文件")},addFile:function(t){"ready"===t.status&&(this.hasFile=!0,this.mutex1=!1,this.mutex0=!1)},removeFile:function(){this.hasFile=!1,this.mutex1=!1,this.mutex0=!0},downloadTpl:function(){Object(l["l"])().then(function(t){Object(c["saveAs"])(new Blob([t.data]),t.filename)})},fmtMoney:function(t,e){return this.utils.formatMoney(t[e.property])},fmtPayType:function(t,e){var a=t[e.property];return u["a"].map(function(t){return t.type_id===a?t.type_name:void 0})},ChoiceOnline:function(){this.mutex1=!1,this.mutex0=!0;var t=this.$route.query.id?this.$route.query.id:"",e=this.$route.query.ststus?this.$route.query.status:"";this.$router.push({name:"ChoiceOnline",query:{id:t,status:e}})},goback:function(){localStorage.clear(),this.$router.replace({name:"SecondKill"})},Removepro:function(t){var e=this.ProductList.findIndex(function(e){return e.goods_id==t});this.ProductList.splice(e,1),this.postParams.productlist=this.ProductList,localStorage.setItem("productlist",n()(this.ProductList)),console.log(this.ProductList.length),this.ProductList.length<1&&(this.mutex1=!1,this.mutex0=!1)}}}),_=d,p=(a("1937"),a("217b"),a("2877")),m=Object(p["a"])(_,s,i,!1,null,"7a0e9a0a",null);e["default"]=m.exports},cba1:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("有解商城管理中心")]),a("el-breadcrumb-item",[t._v("运营活动管理")]),a("el-breadcrumb-item",[t._v("限时促销")])],1)],1),a("div",{staticClass:"search-wrapper"},[a("el-form",{attrs:{inline:!0}},[a("el-row",{staticStyle:{"margin-right":"0"},attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{placeholder:"活动名称",clearable:""},model:{value:t.params.secbuy_name,callback:function(e){t.$set(t.params,"secbuy_name",e)},expression:"params.secbuy_name"}})],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间","value-format":"timestamp"},model:{value:t.params.create_start_time,callback:function(e){t.$set(t.params,"create_start_time",e)},expression:"params.create_start_time"}}),a("span",[t._v("  ~  ")]),a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间","value-format":"timestamp"},model:{value:t.params.create_end_time,callback:function(e){t.$set(t.params,"create_end_time",e)},expression:"params.create_end_time"}})],1)],1),a("el-row",{staticStyle:{"margin-right":"0"},attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"活动状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"活动状态"},model:{value:t.params.secbuy_status,callback:function(e){t.$set(t.params,"secbuy_status",e)},expression:"params.secbuy_status"}},t._l(t.statusList,function(t){return a("el-option",{key:t.status_id,attrs:{label:t.status_name,value:t.status_id}})}),1)],1),a("el-form-item",{attrs:{label:"活动形式"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"活动形式"},model:{value:t.params.type,callback:function(e){t.$set(t.params,"type",e)},expression:"params.type"}},t._l(t.typeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getActivityList}},[t._v("\n            搜索\n          ")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:t.clearSearchParams}},[t._v("\n            清空\n          ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addNewActivity}},[t._v("\n            创建活动\n          ")])],1)],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.activityList,stripe:"",border:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"secbuy_id",label:"编号"}}),a("el-table-column",{attrs:{prop:"secbuy_name",label:"活动名称","min-width":"200%","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"type",label:"活动形式",formatter:t.fmtType}}),a("el-table-column",{attrs:{label:"活动时间","min-width":"300%","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.timeStampFmt(e.row,"start_time")))]),t._v("\n            至  \n          "),a("span",[t._v(t._s(t.timeStampFmt(e.row,"end_time")))])]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"180px",formatter:t.timeStampFmt,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"secbuy_status",label:"活动状态",formatter:t.statusFmt}}),a("el-table-column",{attrs:{label:"操作","min-width":"150%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goActivityUrl(e.row.secbuy_id)}}},[t._v("\n            链接\n          ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goDetail(e.row.secbuy_id)}}},[t._v("\n            查看\n          ")]),0===e.row.secbuy_status||1===e.row.secbuy_status||3===e.row.secbuy_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goEdit(e.row)}}},[t._v("\n            编辑\n          ")]):t._e(),0===e.row.secbuy_status||3===e.row.secbuy_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goRemove(e.row.secbuy_id)}}},[t._v("\n            删除\n          ")]):t._e()]}}])})],1)],1),a("el-pagination",{attrs:{"current-page":t.params.pageNumber,background:"",layout:"prev, pager, next, jumper",total:t.total,"hide-on-single-page":!0},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.params,"pageNumber",e)},"update:current-page":function(e){return t.$set(t.params,"pageNumber",e)}}}),a("el-dialog",{attrs:{title:"活动链接",visible:t.showUrl,width:"50%"},on:{"update:visible":function(e){t.showUrl=e}}},[a("div",{staticClass:"url-info"},[t._v(t._s(t.urlInfo))]),a("div",{staticClass:"btn-box"},[a("el-button",{on:{click:function(e){t.showUrl=!1}}},[t._v("取消")]),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.urlInfo,expression:"urlInfo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{type:"primary"}},[t._v("复制")])],1)])],1)},i=[],o=(a("7f7f"),a("06db"),a("aef6"),a("f499")),r=a.n(o),n=a("873b"),l=a("3b8b"),c={name:"SecondKill",data:function(){return{params:{pageNumber:1,pageSize:10,secbuy_name:"",start_time:"",end_time:"",create_start_time:"",create_end_time:"",secbuy_status:"",type:"",activity_type:1},total:0,activityList:[],statusList:n["c"],typeList:n["a"],loading:!1,showUrl:!1,urlInfo:""}},created:function(){this.getActivityList()},computed:{fmtParams:function(){var t=JSON.parse(r()(this.params));for(var e in t)e.endsWith("_time")&&t[e]&&(t[e]=this.utils.formatStamp(t[e]));return""===t.type&&(t.type=0),t}},methods:{getActivityList:function(){var t=this;this.loading=!0,Object(l["b"])(this.fmtParams).then(function(e){t.activityList=e.data,t.total=e.total}).finally(function(){t.loading=!1})},clearSearchParams:function(){for(var t in this.params)this.params[t]="";this.params.pageNumber=1,this.params.pageSize=10,this.getActivityList()},addNewActivity:function(){this.$router.push({name:"PromoteSaleAdd",query:{operate:"add"}})},goDetail:function(t){this.$router.push({name:"PromoteSaleDetail",params:{id:t}})},goEdit:function(t){this.$router.push({name:"PromoteSaleAdd",query:{id:t.secbuy_id,status:t.secbuy_status}})},goActivityUrl:function(t){this.urlInfo="https://m.huanhuanyiwu.com/h5/#/promotionList/"+t,this.showUrl=!0},onCopy:function(t){this.$message.success("复制成功"),this.showUrl=!1},onError:function(t){this.$message.error("复制失败")},goRemove:function(t){var e=this;this.$confirm("确定删除该活动吗？","提示").then(function(){e.loading=!0,Object(l["d"])(t).then(function(t){t&&(e.$message.success("删除成功"),e.getActivityList())})})},timeStampFmt:function(t,e){var a="string"===typeof e?e:e.property,s=t[a];return s?this.utils.formatDate("YYYY-MM-DD HH:mm:ss",this.utils.formatStamp(s,1)):s},fmtType:function(t,e,a){var s="";return this.typeList.forEach(function(t){t.id==a&&(s=t.name)}),s},statusFmt:function(t,e,a){var s="";return this.statusList.forEach(function(t){t.status_id==a&&(s=t.status_name)}),s},handleCurrentChange:function(){this.getActivityList()}}},u=c,d=(a("2f40"),a("2877")),_=Object(d["a"])(u,s,i,!1,null,"5fa88289",null);e["default"]=_.exports},cd1c:function(t,e,a){var s=a("e853");t.exports=function(t,e){return new(s(t))(e)}},d2c8:function(t,e,a){var s=a("aae3"),i=a("be13");t.exports=function(t,e,a){if(s(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(i(t))}},dc6f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.isLoading,expression:"isLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("有解商城管理中心")]),a("el-breadcrumb-item",[t._v("运营活动管理")]),a("el-breadcrumb-item",[t._v("\n        "+t._s(t.isAdd?"新增活动":"活动编辑")+"\n      ")])],1)],1),a("div",{staticClass:"activity-info-wrapper"},[a("el-form",{ref:"activityForm",attrs:{"label-width":"120px",rules:t.addRules,model:t.activity_infos}},[a("el-form-item",{attrs:{label:"活动名称",prop:"secbuy_name"}},[a("el-input",{attrs:{placeholder:"请输入活动名称",clearable:"",disabled:t.isDisable},model:{value:t.activity_infos.secbuy_name,callback:function(e){t.$set(t.activity_infos,"secbuy_name",e)},expression:"activity_infos.secbuy_name"}}),a("span",{staticClass:"tip-info"},[t._v("最多20个字符")])],1),a("el-form-item",{attrs:{label:"活动形式"}},[a("p",[a("el-radio",{attrs:{label:1,disabled:t.createandimport},model:{value:t.activity_infos.type,callback:function(e){t.$set(t.activity_infos,"type",e)},expression:"activity_infos.type"}},[t._v("积分专享")])],1),a("p",[a("el-radio",{attrs:{label:2,disabled:t.createandimport},model:{value:t.activity_infos.type,callback:function(e){t.$set(t.activity_infos,"type",e)},expression:"activity_infos.type"}},[t._v("限时折扣")])],1),2==t.activity_infos.type?[a("p",[a("label",{staticClass:"el-form-item__label"},[t._v("折扣是否在前台显示")]),a("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:t.isDisable},model:{value:t.activity_infos.is_show_discount,callback:function(e){t.$set(t.activity_infos,"is_show_discount",e)},expression:"activity_infos.is_show_discount"}})],1),t.activity_infos.is_show_discount?a("p",[a("label",{staticClass:"el-form-item__label"},[t._v("折扣底色")]),a("el-input",{attrs:{placeholder:"手动输入颜色，十六进制",clearable:"",disabled:t.isDisable},model:{value:t.activity_infos.discount_colour,callback:function(e){t.$set(t.activity_infos,"discount_colour",e)},expression:"activity_infos.discount_colour"}}),a("colorPicker",{attrs:{disabled:t.isDisable},model:{value:t.activity_infos.discount_colour,callback:function(e){t.$set(t.activity_infos,"discount_colour",e)},expression:"activity_infos.discount_colour"}})],1):t._e()]:t._e()],2),a("el-form-item",{attrs:{label:"标签名称",prop:"tags_name"}},[a("el-input",{attrs:{placeholder:"请输入标签名称",clearable:"",disabled:t.isDisable},model:{value:t.activity_infos.tags_name,callback:function(e){t.$set(t.activity_infos,"tags_name",e)},expression:"activity_infos.tags_name"}}),a("span",{staticClass:"tip-info"},[t._v("最多5个字符")])],1),a("el-form-item",{attrs:{label:"标签底色",prop:"tags_colour"}},[a("el-input",{attrs:{placeholder:"手动输入颜色，十六进制",clearable:"",disabled:t.isDisable},model:{value:t.activity_infos.tags_colour,callback:function(e){t.$set(t.activity_infos,"tags_colour",e)},expression:"activity_infos.tags_colour"}}),a("colorPicker",{attrs:{disabled:t.isDisable},model:{value:t.activity_infos.tags_colour,callback:function(e){t.$set(t.activity_infos,"tags_colour",e)},expression:"activity_infos.tags_colour"}})],1),a("el-form-item",{attrs:{label:"活动时间"}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{prop:"start_time"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"活动开始时间","value-format":"timestamp","default-time":"00:00:00",disabled:t.isDisable},model:{value:t.activity_infos.start_time,callback:function(e){t.$set(t.activity_infos,"start_time",e)},expression:"activity_infos.start_time"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:1}},[t._v("-")]),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{prop:"end_time"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"活动结束时间","value-format":"timestamp","default-time":"23:59:59",disabled:t.isDisable},model:{value:t.activity_infos.end_time,callback:function(e){t.$set(t.activity_infos,"end_time",e)},expression:"activity_infos.end_time"}})],1)],1)],1),a("el-form-item",{attrs:{label:"适用人群"}},[a("p",[a("el-radio",{attrs:{label:0,disabled:t.isDisable},model:{value:t.activity_infos.range,callback:function(e){t.$set(t.activity_infos,"range",e)},expression:"activity_infos.range"}},[t._v("换换全部用户")])],1),a("p",[a("el-radio",{attrs:{label:1,disabled:t.isDisable},model:{value:t.activity_infos.range,callback:function(e){t.$set(t.activity_infos,"range",e)},expression:"activity_infos.range"}},[t._v("换换新用户")])],1),a("p",[a("el-radio",{attrs:{label:2,disabled:t.isDisable},model:{value:t.activity_infos.range,callback:function(e){t.$set(t.activity_infos,"range",e)},expression:"activity_infos.range"}},[t._v("爱投资全部用户")])],1)])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.submitLoading,expression:"submitLoading"}],staticClass:"goods-list-wrapper"},[a("div",{staticClass:"import-good-wrapper"},[a("span",[t._v("*")]),a("label",[t._v("导入商品")]),a("el-upload",{ref:"uploadFile",attrs:{headers:t.importHeaders,action:t.action,data:t.fmtParams,name:"myfile","auto-upload":!1,"on-success":t.uploadSuccess,"on-change":t.addFile,"before-remove":t.removeFile,limit:1,"on-exceed":t.overFile}},[a("el-button",{attrs:{type:"primary",disabled:t.isDisable}},[t._v("导入商品")])],1),a("el-button",{staticClass:"tpl-download",attrs:{type:"text",disabled:t.isDisable},on:{click:t.downloadTpl}},[t._v("模板下载")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticStyle:{width:"100%"},attrs:{data:t.goods_info,stripe:"",border:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"商品ID",prop:"goods_id"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"goods_name","min-width":"300%","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"所属商家",prop:"shop_name","min-width":"200%","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"可售库存",prop:"goods_number"}}),a("el-table-column",{attrs:{label:"活动限购数量",prop:"secbuy_quantity","min-width":"120%"}}),a("el-table-column",{attrs:{label:"促销现金结算价",prop:"secbuy_close_price","min-width":"120%",formatter:t.fmtMoney}}),a("el-table-column",{attrs:{label:"促销积分结算价",prop:"settlement_surplus","min-width":"120%",formatter:t.fmtMoney}}),a("el-table-column",{attrs:{label:"原价","min-width":"200%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.utils.formatMoney(e.row.goods_shop_price)))]),a("p",[t._v("\n            "+t._s("(现金:"+t.utils.formatMoney(e.row.goods_cash)+" + 积分:"+t.utils.formatMoney(e.row.goods_money_line)+")")+"\n          ")])]}}])}),a("el-table-column",{attrs:{label:"促销价","min-width":"200%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.utils.formatMoney(e.row.shop_price)))]),a("p",[t._v("\n            "+t._s("(现金:"+t.utils.formatMoney(e.row.cash_price)+" + 积分:"+t.utils.formatMoney(e.row.huanbi_price)+")")+"\n          ")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.curStatus?a("div",[a("el-button",{attrs:{type:"text",size:"small",disabled:!e.row.is_on_sale},on:{click:function(a){return t.sellNone(e.row)}}},[t._v("售罄")])],1):a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goEdit(e.row.id)}}},[t._v("\n              编辑\n            ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goRemove(e.row.id)}}},[t._v("\n              移除\n            ")])],1)]}}])})],1)],1),a("el-pagination",{attrs:{"current-page":t.pageNumber,background:"",layout:"prev, pager, next, jumper","page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pageNumber=e},"update:current-page":function(e){t.pageNumber=e}}}),a("div",{staticClass:"btn-groups-wrapper"},[a("el-button",{attrs:{type:""},on:{click:t.goback}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",disabled:t.notSave},on:{click:t.saveNewActivity}},[t._v("确定")])],1),a("div",{staticClass:"error-good-info-wrapper"},[a("el-dialog",{attrs:{visible:t.centerDialogVisible,width:"50%","show-close":!1},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("导入商品提示")]),a("div",[a("div",[t.data_type.sale?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("已下架")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.sale))])],1):t._e(),t.data_type.goods_number?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("已售罄")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.goods_number))])],1):t._e(),t.data_type.sale_goods_number?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("售罄并下架")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.sale_goods_number))])],1):t._e(),t.data_type.check_zero?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("未审核")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.check_zero))])],1):t._e(),t.data_type.export_fail?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("导入失败")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.export_fail))])],1):t._e(),t.data_type.param_error?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("数据错误")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.param_error))])],1):t._e(),t.data_type.money_error?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("金额错误")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.money_error))])],1):t._e(),t.data_type.sku_goods?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("多规格SKU")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.sku_goods))])],1):t._e(),t.data_type.seckill_price?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("设置的秒杀价不能高于本店售价")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.seckill_price))])],1):t._e(),t.data_type.seckill_casg?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("设置的秒杀现金价不能高于本店售价中的现金价")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.seckill_casg))])],1):t._e(),t.data_type.shop_seckill_price?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("售价 - 促销价需大于等于 1")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.shop_seckill_price))])],1):t._e(),t.data_type.shop_seckill_cash?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("售价现金价 - 促销现金价需大于等于 1")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.shop_seckill_cash))])],1):t._e(),t.data_type.goods_name?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("商品编号与商品名称不一致，请修改后重新提交。")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.goods_name))])],1):t._e(),t.data_type.discount_activity_shop_price?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("限时折扣活动价要低于本店售价。")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.discount_activity_shop_price))])],1):t._e(),t.data_type.special_activity_shop_price?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("积分专享活动价不等于本店售价。")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.special_activity_shop_price))])],1):t._e(),t.data_type.special_activity_money_line?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("积分专享抵扣上限小于默认权限抵扣上限。")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.special_activity_money_line))])],1):t._e(),t.data_type.other_activity_running?a("el-row",{attrs:{gutter:22}},[a("el-col",{attrs:{span:3}},[t._v("状态:")]),a("el-col",{staticClass:"word-style",attrs:{span:9}},[t._v("已参与其他活动")]),a("el-col",{attrs:{span:4}},[t._v("商品编号:")]),a("el-col",{staticClass:"over-hid",attrs:{span:8}},[t._v(t._s(t.data_type.other_activity_running))])],1):t._e(),a("p",[t._v("请仔细核对商品信息后重新上传失败数据")])],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("确 定")])],1)])],1)],1)},i=[],o=(a("06db"),a("a481"),a("cebc")),r=a("f499"),n=a.n(r),l=(a("c5f6"),a("3b8b")),c=a("21a6"),u=a("873b"),d=(a("2f62"),{name:"SecondKillAdd",data:function(){var t=this,e=function(e,a,s){""!==a&&(""!==t.activity_infos.start_time&&a<=t.activity_infos.start_time?(s(new Error("结束时间不能小于开始时间")),t.activity_infos.end_time=""):s())},a=function(e,a,s){""!==a&&(""!==t.activity_infos.end_time&&a>=t.activity_infos.end_time?(s(new Error("活动时间不得大于结束时间")),t.activity_infos.start_time=""):s())},s=null;return window.token&&(s=window.token),{action:"https://api.youjiemall.com/admin/api.seckill.activity.add",importHeaders:{"X-ADMIN-Authorization":s,"X-HH-Ver":Object({NODE_ENV:"production",VUE_APP_APPSERVER_HOST:"https://api.youjiemall.com",VUE_APP_HDSERVER_HOST:"https://hd.youjiemall.com",VUE_APP_JAVASERVER_HOST:"https://docker.youjiemall.com",VUE_APP_STORENAME:"有解",BASE_URL:"templates_vue/"}).VUE_APP_APPSERVER_VERSION},hasFile:!1,activity_infos:{secbuy_id:"",type:1,secbuy_name:"",tags_name:"",tags_colour:"#000000",start_time:"",end_time:"",range:0,discount_colour:"#000000",is_show_discount:0},pageNumber:1,pageSize:5,total:0,goods_info:[],data_type:{sale:"",goods_number:"",sale_goods_number:"",check_zero:"",export_fail:"",param_error:"",money_error:"",sku_goods:"",discount_activity_shop_price:"",special_activity_shop_price:"",special_activity_money_line:"",goods_name:"",other_activity_running:"",seckill_casg:"",seckill_price:"",shop_seckill_cash:"",shop_seckill_price:""},secbuy_infos:{},addRules:{secbuy_name:[{required:!0,message:"请输入活动名称",trigger:"change"},{min:3,max:20,message:"活动名称长度3~20",trigger:"change"}],tags_name:[{required:!0,message:"请输入标签名称",trigger:"change"},{max:5,message:"标签名称长度过长",trigger:"change"}],tags_colour:[{required:!0,message:"请选择标签颜色",trigger:"change"}],start_time:[{required:!0,message:"请选择开始时间",trigger:"blur"},{validator:a,trigger:"blur"}],end_time:[{required:!0,message:"请选择结束时间",trigger:"blur"},{validator:e,trigger:"blur"}]},fullscreenLoading:!0,submitLoading:!1,pageLoading:!1,notSave:!1,centerDialogVisible:!1}},computed:{isAdd:function(){return"add"===this.$route.query.operate},curStatus:function(){return 1===Number(this.$route.query.status)},isDisable:function(){return!this.isAdd&&this.curStatus},isValid:function(){var t=!1;return this.$refs["activityForm"].validate(function(e){t=e}),t},isLoading:function(){return this.fullscreenLoading&&!this.isAdd},fmtParams:function(){var t=JSON.parse(n()(this.activity_infos));t.start_time=t.start_time/1e3,t.end_time=t.end_time/1e3;var e=this.pageNumber,a=this.pageSize;return Object(o["a"])({},t,{pageNumber:e,pageSize:a})},createandimport:function(){return!this.isAdd&&this.goods_info.length>0}},created:function(){this.isAdd||(this.activity_infos.secbuy_id=this.$route.query.id,this.getActivityInfos())},methods:{getActivityInfos:function(){var t=this;this.pageLoading=!0,Object(l["a"])(this.fmtParams).then(function(e){t.activity_infos=e.secbuy_info,t.goods_info=e.list,t.fullscreenLoading=!1,t.pageLoading=!1,t.total=e.total,t.activity_infos.start_time=t.utils.formatStamp(t.activity_infos.start_time,1),t.activity_infos.end_time=t.utils.formatStamp(t.activity_infos.end_time,1)})},handleCurrentChange:function(){this.getActivityInfos()},goEdit:function(t){this.$router.replace({name:"PromoteSaleGoodEdit",params:{actID:this.activity_infos.secbuy_id,goodID:t}})},goRemove:function(t){var e=this;this.$confirm("确定移除该商品吗","提示").then(function(){e.pageLoading=!0,Object(l["h"])(t).then(function(t){t&&e.handleCurrentChange()})})},sellNone:function(t){var e=this;Object(l["k"])(t.id).then(function(a){a&&(e.$message.success("该商品下架成功"),t.is_on_sale=0)})},saveNewActivity:function(){var t=this;if(this.isValid)if(this.isAdd)this.hasFile?(this.submitLoading=!0,this.$refs.uploadFile.submit()):this.$message.error("新增活动必须导入商品");else{if((new Date).getTime()>=this.activity_infos.start_time)return void this.$message.error("活动已经开始了");this.hasFile?(this.submitLoading=!0,this.$refs.uploadFile.submit()):(this.submitLoading=!0,Object(l["j"])(this.fmtParams).then(function(e){e&&t.$message.success("保存成功")}).finally(function(){t.submitLoading=!1}))}},uploadSuccess:function(t){this.submitLoading=!1,this.$refs.uploadFile.clearFiles();var e=t.data;for(var a in this.data_type=e.data.data_type,this.data_type)this.data_type[a].length>0&&(this.centerDialogVisible=!0),this.data_type[a]=this.data_type[a].join();if(this.isAdd&&!this.centerDialogVisible&&(this.notSave=!0),this.total=e.total,t.code||0===e.list.length)return this.$message.error("保存失败,请重新导入商品"),void(this.hasFile=!1);this.$message.success("保存成功"),this.goods_info=e.list,this.submitLoading=!1,this.activity_infos=e.secbuy_info,this.activity_infos.start_time=1e3*this.activity_infos.start_time,this.activity_infos.end_time=1e3*this.activity_infos.end_time},overFile:function(){this.$message.error("只能上传一个文件")},addFile:function(t){"ready"===t.status&&(this.hasFile=!0)},removeFile:function(){this.hasFile=!1},downloadTpl:function(){Object(l["l"])().then(function(t){Object(c["saveAs"])(new Blob([t.data]),t.filename)})},fmtMoney:function(t,e){return this.utils.formatMoney(t[e.property])},fmtPayType:function(t,e){var a=t[e.property];return u["b"].map(function(t){return t.type_id===a?t.type_name:void 0})},goback:function(){this.$router.replace({name:"PromoteSaleList"})}}}),_=d,p=(a("8f78"),a("e4b4"),a("2877")),m=Object(p["a"])(_,s,i,!1,null,"9cfc7304",null);e["default"]=m.exports},e4b4:function(t,e,a){"use strict";var s=a("5e1b"),i=a.n(s);i.a},e814:function(t,e,a){t.exports=a("b9e9")},e853:function(t,e,a){var s=a("d3f4"),i=a("1169"),o=a("2b4c")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),s(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},f644:function(t,e,a){}}]);
//# sourceMappingURL=SecondKill-legacy.3d7eb390.js.map