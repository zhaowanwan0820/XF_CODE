(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48b598f9"],{"38e9":function(t,e,s){"use strict";var r=s("6ac1"),a=s.n(r);a.a},"6ac1":function(t,e,s){},d653:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("el-breadcrumb-item",[t._v("积分转账")]),s("page-title",{attrs:{"first-title":"积分转账"}}),s("div",{staticClass:"transfer-info"},[s("el-form",{attrs:{inline:!0}},[s("el-form-item",{attrs:{label:"转出账户"}},[s("el-select",{attrs:{filterable:"",clearable:"","filter-method":t.filterSuppliers,placeholder:"输入转出账户检索","no-data-text":"输入转出账户检索"},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}},[t.suppliersList.length?t._l(t.suppliersList,function(t){return s("el-option",{key:t.suppliers_id,attrs:{value:t.suppliers_id,label:t.suppliers_name}})}):t._e()],2)],1),s("el-form-item",{attrs:{label:"转入账户"}},[s("el-select",{model:{value:t.to,callback:function(e){t.to=e},expression:"to"}},t._l(t.targets,function(t){return s("el-option",{key:t.suppliers_id,attrs:{label:t.suppliers_name,value:t.suppliers_id}})}),1)],1),s("el-form-item",{attrs:{label:"转出积分数"}},[s("el-input",{attrs:{clearable:""},model:{value:t.huanbi,callback:function(e){t.huanbi=e},expression:"huanbi"}})],1),t.from?s("el-button",{attrs:{type:"text"},on:{click:t.transferAllHB}},[t._v("全部")]):t._e(),s("el-button",{staticClass:"go-right",attrs:{type:"primary"},on:{click:t.outsideTransfer}},[t._v("创建并转出")])],1)],1),s("div",{staticClass:"transfer-table"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.accountList,stripe:"","header-cell-style":{background:"#eef1f6"}}},[s("el-table-column",{attrs:{label:"编号",prop:"suppliers_id"}}),s("el-table-column",{attrs:{label:"转出账户",prop:"suppliers_name","show-overflow-tooltip":!0}}),s("el-table-column",{attrs:{label:"剩余金额",prop:"huanbi_money"}}),s("el-table-column",{attrs:{label:"转出金额",prop:"huanbi_transfered"}}),s("el-table-column",{attrs:{label:"转入账户"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v("中安结算")])]}}])}),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.goDetail(e.row.suppliers_id)}}},[t._v("积分转账流水明细")]),s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.insideTransfer(e.row)}}},[t._v("转出")])]}}])})],1)],1),s("el-dialog",{attrs:{visible:t.confirmTransfer,width:"40%"},on:{"update:visible":function(e){t.confirmTransfer=e}}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:7}},[s("span",[t._v("转出的账户名：")])]),s("el-col",{attrs:{span:13}},[s("el-input",{attrs:{disabled:!0,value:t.fmtFrom}})],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:7}},[s("span",[t._v("转入的账户名：")])]),s("el-col",{attrs:{span:13}},[s("el-input",{attrs:{disabled:!0,value:t.fmtTo}})],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:7}},[s("span",[t._v("转入的积分：")])]),s("el-col",{attrs:{span:13}},[s("el-input",{attrs:{disabled:t.isConfirm},model:{value:t.huanbi,callback:function(e){t.huanbi=e},expression:"huanbi"}})],1),t.isConfirm?t._e():s("el-button",{attrs:{span:4,type:"text"},on:{click:t.transferAllHB}},[t._v("全部")])],1),s("div",{staticClass:"sure-to-transfer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.confirmTransfetHB}},[t._v(t._s(t.isConfirm?"确认转出":"转出"))])],1)],1),s("div",{staticClass:"page-wrapper"},[s("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper",total:t.total,"hide-on-single-page":!0},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1)},a=[],i=s("afbd"),n={name:"HBTransferAccounts",data(){return{accountList:[],suppliersList:[],targets:[],from:"",to:"",huanbi:"",confirmTransfer:!1,loading:!1,currentPage:1,total:0,isConfirm:!1}},created(){this.getList()},computed:{allHB(){let t=0;return this.accountList.forEach(e=>{this.from===e.suppliers_id&&(t=e.huanbi_money)}),t},fmtFrom(){let t;return this.accountList.forEach(e=>{e.suppliers_id===this.from&&(t=e.suppliers_name)}),t},fmtTo(){let t;return this.targets.forEach(e=>{e.suppliers_id===this.to&&(t=e.suppliers_name)}),t}},watch:{confirmTransfer(){this.confirmTransfer||this.resetParams()}},methods:{getList(){this.loading=!0,Object(i["n"])(this.currentPage).then(t=>{this.loading=!1,this.accountList=t.suppliers.list.data,this.total=t.suppliers.list.total,this.targets=t.targets})},filterSuppliers(t){t&&(this.loading=!0,Object(i["f"])(t).then(t=>{this.loading=!1,this.suppliersList=t}))},transferAllHB(){this.huanbi=this.allHB},goDetail(t){this.$router.push({name:"HBTransferDetail",query:{suppliers_id:t}})},outsideTransfer(){this.confirmTransfer=!0,this.isConfirm=!0},insideTransfer(t){this.confirmTransfer=!0,this.isConfirm=!1,this.from=t.suppliers_id,this.to=174,this.huanbi=""},confirmTransfetHB(){this.to&&this.from&&this.huanbi?this.isConfirm?Object(i["r"])(this.to,this.from,this.huanbi).then(t=>{this.$message.success(t.info),this.confirmTransfer=!1,this.getList()},t=>{this.$message.error(t.errorMsg)}):this.isConfirm=!0:this.$message.error("请填写完整转账信息")},handleCurrentChange(){this.getList()},resetParams(){this.from="",this.to="",this.huanbi=""}}},l=n,o=(s("38e9"),s("2877")),u=Object(o["a"])(l,r,a,!1,null,"e1fe38f2",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-48b598f9.8cffcef5.js.map