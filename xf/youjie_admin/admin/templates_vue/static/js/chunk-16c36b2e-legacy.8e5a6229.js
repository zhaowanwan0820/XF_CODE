(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16c36b2e"],{"1af6":function(e,t,i){var n=i("63b6");n(n.S,"Array",{isArray:i("9003")})},"20fd":function(e,t,i){"use strict";var n=i("d9f6"),r=i("aebd");e.exports=function(e,t,i){t in e?n.f(e,t,r(0,i)):e[t]=i}},2801:function(e,t,i){"use strict";i.d(t,"d",function(){return r}),i.d(t,"b",function(){return a}),i.d(t,"f",function(){return s}),i.d(t,"c",function(){return o}),i.d(t,"a",function(){return l}),i.d(t,"e",function(){return c}),i.d(t,"g",function(){return d});i("7f7f");var n=i("65c6"),r=function(){return Object(n["c"])("/admin/api.shippingtpl.list","POST",{})},a=function(e){return Object(n["c"])("/admin/api.shippingtpl.delete","POST",{id:e})},s=function(e){return Object(n["c"])("/admin/api.shippingtpl.save","POST",{name:e.name,id:e.tplID,tpl_type:e.tpl_type})},o=function(e){return Object(n["c"])("/admin/api.shippingtplarea.list","POST",{tpl_id:e})},l=function(e){return Object(n["c"])("/admin/api.shippingtplarea.delete","POST",{id:e})},c=function(e){return Object(n["c"])("/admin/api.shippingtplarea.save","POST",{item:e})},d=function(e,t){return Object(n["c"])("/admin/api.shippingtplarea.get","POST",{id:e||"0",tpl_id:t})}},"473f":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("page-title",{attrs:{"first-title":"添加运费模板"}}),i("div",{staticClass:"shipping-name-wrapper"},[i("span",[e._v("*")]),i("label",[e._v("模板名称：")]),i("el-input",{attrs:{placeholder:"请自定义模板名称"},model:{value:e.shippingName,callback:function(t){e.shippingName=t},expression:"shippingName"}})],1),i("div",{staticClass:"shipping-name-wrapper"},[i("span",[e._v("*")]),i("label",[e._v("模板类型：")]),i("el-select",{attrs:{disabled:!!e.tplID},model:{value:e.shippingType,callback:function(t){e.shippingType=t},expression:"shippingType"}},[i("el-option",{attrs:{label:"常规模板",value:1}}),i("el-option",{attrs:{label:"指定条件包邮",value:2}})],1)],1),e.tplID?i("div",{staticClass:"delivery-area-wrapper"},[i("p",[e._v("配送区域")]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.deliveryAreaList,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"area_list_name",label:"地区"}}),i("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.editArea(t.row.id)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.deleteArea(t.row.id)}}},[e._v("删除")])]}}],null,!1,1320985650)}),i("el-table-column",{attrs:{label:"首件数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("input",{directives:[{name:"model",rawName:"v-model",value:t.row.head,expression:"scope.row.head"}],attrs:{type:"text"},domProps:{value:t.row.head},on:{input:function(i){i.target.composing||e.$set(t.row,"head",i.target.value)}}})]}}],null,!1,3705233867)}),i("el-table-column",{attrs:{label:"运费",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("input",{directives:[{name:"model",rawName:"v-model",value:t.row.head_fee,expression:"scope.row.head_fee"}],attrs:{type:"text"},domProps:{value:t.row.head_fee},on:{input:function(i){i.target.composing||e.$set(t.row,"head_fee",i.target.value)}}})]}}],null,!1,886460459)}),1==e.shippingType?[i("el-table-column",{attrs:{label:"续件",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("input",{directives:[{name:"model",rawName:"v-model",value:t.row.step,expression:"scope.row.step"}],attrs:{type:"text"},domProps:{value:t.row.step},on:{input:function(i){i.target.composing||e.$set(t.row,"step",i.target.value)}}})]}}],null,!1,1340224843)}),i("el-table-column",{attrs:{label:"续费",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("input",{directives:[{name:"model",rawName:"v-model",value:t.row.step_fee,expression:"scope.row.step_fee"}],attrs:{type:"text"},domProps:{value:t.row.step_fee},on:{input:function(i){i.target.composing||e.$set(t.row,"step_fee",i.target.value)}}})]}}],null,!1,3858278571)})]:e._e(),2==e.shippingType?[i("el-table-column",{attrs:{label:"包邮条件",width:"600"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"free-wrapper"},[i("el-select",{attrs:{placeholder:"请选择包邮条件类型",size:"small"},model:{value:t.row.free_type,callback:function(i){e.$set(t.row,"free_type",i)},expression:"scope.row.free_type"}},[i("el-option",{attrs:{label:"请选择包邮条件类型",value:0,disabled:""}}),i("el-option",{attrs:{label:"满件",value:1}}),i("el-option",{attrs:{label:"满元",value:2}}),i("el-option",{attrs:{label:"满件或满元",value:3}})],1),i("div",{staticClass:"free-rule"},[e._v("\n                满\n                "),1==t.row.free_type||3==t.row.free_type?[i("input",{directives:[{name:"model",rawName:"v-model",value:t.row.free_sum,expression:"scope.row.free_sum"}],staticClass:"text",attrs:{type:"text"},domProps:{value:t.row.free_sum},on:{input:function(i){i.target.composing||e.$set(t.row,"free_sum",i.target.value)}}}),e._v("\n                  件\n                ")]:e._e(),e._v("\n                "+e._s(3==t.row.free_type?"，":"")+"\n                "),2==t.row.free_type||3==t.row.free_type?[i("input",{directives:[{name:"model",rawName:"v-model",value:t.row.free_fee,expression:"scope.row.free_fee"}],attrs:{type:"text"},domProps:{value:t.row.free_fee},on:{input:function(i){i.target.composing||e.$set(t.row,"free_fee",i.target.value)}}}),e._v("\n                  元\n                ")]:e._e(),e._v("\n                以上包邮\n              ")],2)],1)]}}],null,!1,478092218)})]:e._e()],2)],1):e._e(),e.isSaveTpl?i("div",{staticClass:"add-area-wrapper"},[i("el-button",{attrs:{type:"text"},on:{click:e.addNewAddr}},[e._v("指定地区与运费")])],1):e._e(),i("div",{staticClass:"btn-group-wrapper"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveArea}},[e._v("保存")]),i("el-button",{staticClass:"btn-back",on:{click:e.goBack}},[e._v("返回")])],1),i("div",{staticClass:"area_dialog"},[i("el-dialog",{attrs:{visible:e.dialogVisible,width:"60%","show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t},open:e.getAddress,closed:function(t){e.isShowRegionsList=!1}}},[i("div",{attrs:{slot:"title"},slot:"title"},[e._v("自定义地区邮费")]),i("div",{staticClass:"check-all"},[i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.isCheckAll,callback:function(t){e.isCheckAll=t},expression:"isCheckAll"}},[e._v("全选")])],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isRegionsLoading,expression:"isRegionsLoading"}],staticClass:"total-address-wrapper"},[e.isShowRegionsList?i("el-cascader-panel",{ref:"cascaderPanel",attrs:{props:e.props,options:e.provinceList},on:{change:e.checkCities},model:{value:e.checkedAddress,callback:function(t){e.checkedAddress=t},expression:"checkedAddress"}}):e._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddress}},[e._v("确 定")]),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)])],1)],1)},r=[],a=i("75fc"),s=(i("ac6a"),i("5df3"),i("f499")),o=i.n(s),l=i("795b"),c=i.n(l),d=(i("06db"),i("c5f6"),i("2801")),p={name:"SuppliersShippingTemplatesAdd",data:function(){return{props:{multiple:!0,value:"region_id",label:"region_name",children:"list",emitPath:!1},shippingName:"",shippingType:void 0,freeType:void 0,deliveryAreaList:[],dialogVisible:!1,areaID:"",tplID:"",provinceList:[],checkedAddress:[],loading:!0,isRegionsLoading:!1,isShowRegionsList:!1,citiesCount:0,isIndeterminate:!1,isCheckAll:!1,selectAllProvince:[],selectAllArea:[]}},created:function(){this.tplID=this.$route.query.tplID;var e=this.$route.query;e.tplID&&(this.shippingName=e.tplName,this.shippingType=Number(e.type),this.getAreaList(e.tplID))},computed:{isSaveTpl:function(){return!!this.tplID}},methods:{getAddress:function(){var e=this;this.checkedAddress=[],this.provinceList=[],this.selectAllArea=[],this.citiesCount=0,this.isIndeterminate=!1,this.isCheckAll=!1,this.isRegionsLoading=!0,this.isShowRegionsList=!0,Object(d["g"])(this.areaID,this.tplID).then(function(t){e.provinceList=t.area_list_msg,e.provinceList.map(function(i){i.list&&0!=i.list.length||(i.list=[{region_id:i.region_id,region_name:i.region_name}],i.checked&&(i.list=[{region_id:i.region_id,region_name:i.region_name,checked:i.checked}])),i.list.map(function(i){i.list&&0!=i.list.length||(i.list=[{region_id:i.region_id,region_name:i.region_name}],i.checked&&(i.list=[{region_id:i.region_id,region_name:i.region_name,checked:i.checked}])),e.citiesCount+=i.list.length,i.list.forEach(function(t){e.selectAllArea.push(t.region_id)}),e.areaID&&i.list.map(function(i){t.area_list&&1===t.area_list.length&&"1"==t.area_list[0]&&(i.checked=1),i.checked&&e.checkedAddress.push(i.region_id)})})}),e.checkCities()}).finally(function(){e.isRegionsLoading=!1})},getAreaList:function(e){var t=this;Object(d["c"])(e).then(function(e){t.deliveryAreaList=e,t.loading=!1})},editArea:function(e){this.areaID=e,this.dialogVisible=!0},deleteArea:function(e){var t=this;Object(d["a"])(e).then(function(i){for(var n=t.deliveryAreaList,r=t.deliveryAreaList.length,a=0;a<r;a++)if(n[a].id===e){n.splice(a,1),t.$notify.success("删除成功");break}})},goBack:function(){this.$router.go(-1)},saveArea:function(){var e=this,t=this.shippingName;if(t)if(this.shippingType&&0!=this.shippingType){for(var i=this,n=0;n<this.deliveryAreaList.length;n++){var r=this.deliveryAreaList[n];if(r.head%1!==0||r.head<=0)return void i.$notify.error("第".concat(n+1,"条数据中，首件必须为大于0的整数"));if(r.step%1!==0)return void i.$notify.error("第".concat(n+1,"条数据中，续件必须为整数"));if(isNaN(r.head_fee)||isNaN(r.step_fee)||r.head_fee<0||r.step_fee<0)return void i.$notify.error("第".concat(n+1,"条数据中，费用必须为数字且大于等于0"));if(2==this.shippingType&&0==r.free_type)return void i.$notify.error("第".concat(n+1,"条数据中，必须选择包邮条件类型"));if(r.free_type>0){if([1,3].indexOf(r.free_type)>-1&&(r.free_sum%1!==0||r.free_sum<=0))return void i.$notify.error("第".concat(n+1,"条数据中，满件必须为大于0的整数"));if([2,3].indexOf(r.free_type)>-1&&(isNaN(r.free_fee)||r.free_fee<=0))return void i.$notify.error("第".concat(n+1,"条数据中，满元必须为大于0的数字"))}}var a=function(){return new c.a(function(e,n){Object(d["f"])({name:t,tplID:i.tplID,tpl_type:i.shippingType}).then(function(t){e(t)},function(e){n(e)})})},s=function(){return new c.a(function(e,t){i.deliveryAreaList.forEach(function(e){e.area_list=o()(e.area_list)}),Object(d["e"])(i.deliveryAreaList).then(function(t){e(t)},function(e){t(e)})})},l=[];l.push(a()),this.deliveryAreaList.length>0&&l.push(s()),c.a.all(l).then(function(t){e.loading=!1,e.$notify.success("保存成功"),e.tplID?e.goBack():t[0].tpl_id&&(e.tplID=t[0].tpl_id)})}else this.$notify.error("模板类型必选");else this.$notify.error("模板名称必填")},confirmAddress:function(){var e=this;if(0!=this.checkedAddress.length){this.dialogVisible=!1,this.loading=!0;var t=this,i=[];if(i=Object(a["a"])(this.checkedAddress),this.areaID)this.deliveryAreaList.forEach(function(e){e.area_list=o()(e.area_list),e.id===t.areaID&&(e.area_list=o()(i))}),Object(d["e"])(this.deliveryAreaList).then(function(){e.getAreaList(e.tplID)});else{var n=[{area_list:o()(i),head:1,head_fee:0,step:0,step_fee:0,tpl_id:this.tplID,free_type:0,free_sum:0,free_fee:0}];Object(d["e"])(n).then(function(){e.getAreaList(e.tplID)})}}else this.$msgbox({message:"请选择配送地区",type:"error"})},addNewAddr:function(){this.areaID="",this.dialogVisible=!0},checkCities:function(){var e=this.checkedAddress.length;this.isCheckAll=this.citiesCount==e,this.isIndeterminate=e>0&&e<this.citiesCount},handleCheckAllChange:function(e){e?(this.checkedAddress=this.selectAllArea,this.isIndeterminate=!1):this.$refs.cascaderPanel.clearCheckedNodes()}}},u=p,f=(i("e409"),i("6f8e"),i("2877")),h=Object(f["a"])(u,n,r,!1,null,"a9315b84",null);t["default"]=h.exports},"549b":function(e,t,i){"use strict";var n=i("d864"),r=i("63b6"),a=i("241e"),s=i("b0dc"),o=i("3702"),l=i("b447"),c=i("20fd"),d=i("7cd6");r(r.S+r.F*!i("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,r,p,u=a(e),f="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,g=void 0!==v,m=0,_=d(u);if(g&&(v=n(v,h>2?arguments[2]:void 0,2)),void 0==_||f==Array&&o(_))for(t=l(u.length),i=new f(t);t>m;m++)c(i,m,g?v(u[m],m):u[m]);else for(p=_.call(u),i=new f;!(r=p.next()).done;m++)c(i,m,g?s(p,v,[r.value,m],!0):r.value);return i.length=m,i}})},"54a1":function(e,t,i){i("6c1c"),i("1654"),e.exports=i("95d5")},"5df3":function(e,t,i){"use strict";var n=i("02f4")(!0);i("01f9")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})})},6109:function(e,t,i){},"6f8e":function(e,t,i){"use strict";var n=i("6109"),r=i.n(n);r.a},"75fc":function(e,t,i){"use strict";var n=i("a745"),r=i.n(n);function a(e){if(r()(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}var s=i("774e"),o=i.n(s),l=i("c8bb"),c=i.n(l);function d(e){if(c()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return o()(e)}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(e){return a(e)||d(e)||p()}i.d(t,"a",function(){return u})},"774e":function(e,t,i){e.exports=i("d2d5")},"797d":function(e,t,i){},"95d5":function(e,t,i){var n=i("40c3"),r=i("5168")("iterator"),a=i("481b");e.exports=i("584a").isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||a.hasOwnProperty(n(t))}},a745:function(e,t,i){e.exports=i("f410")},ac6a:function(e,t,i){for(var n=i("cadf"),r=i("0d58"),a=i("2aba"),s=i("7726"),o=i("32e9"),l=i("84f2"),c=i("2b4c"),d=c("iterator"),p=c("toStringTag"),u=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=r(f),v=0;v<h.length;v++){var g,m=h[v],_=f[m],b=s[m],y=b&&b.prototype;if(y&&(y[d]||o(y,d,u),y[p]||o(y,p,m),l[m]=u,_))for(g in n)y[g]||a(y,g,n[g],!0)}},c8bb:function(e,t,i){e.exports=i("54a1")},d2d5:function(e,t,i){i("1654"),i("549b"),e.exports=i("584a").Array.from},e409:function(e,t,i){"use strict";var n=i("797d"),r=i.n(n);r.a},f410:function(e,t,i){i("1af6"),e.exports=i("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-16c36b2e-legacy.8e5a6229.js.map