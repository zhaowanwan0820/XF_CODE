(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Settle"],{"097d":function(e,t,a){"use strict";var s=a("5ca1"),i=a("8378"),r=a("7726"),n=a("ebd6"),l=a("bcaa");s(s.P+s.R,"Promise",{finally:function(e){var t=n(this,i.Promise||r.Promise),a="function"==typeof e;return this.then(a?function(a){return l(t,e()).then(function(){return a})}:e,a?function(a){return l(t,e()).then(function(){throw a})}:e)}})},"0c23":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAS1BMVEVHcExmZmZmZmZlZWVhYWFmZmZmZmZmZmZmZmZlZWVmZmZmZmZlZWVmZmZmZmb///9ra2vBwcFzc3P29vbc3NykpKS1tbWFhYWbm5u4F9NuAAAADnRSTlMA6K2ZC9jA+TUbSnJejght8qgAAAIHSURBVEjHtZfbloMgDEVBrlbxVq39/y8doNgBSRRX2zy2npUNOQlACBS81q2RgipFhTStrjkpDd1UQnVRKFE1ukh/kzRRBj2Vt/OsFaAMUR1n1wyXuvRMHxCL7iREi0i56QrCgOh1pUrEqqoBrSzSWrWsc21XHGKn5pUqF+/JzQWtVZukRt3FiCqmxVUxfbuFs+5ysK3cOl7w8zHAn0/jGq1abamr6JPl3o8TpF3nfo7UnQy7FSde+r4fgdzT3Pf3WKxeHZrYYxitOif32iX5yafWdLc0l3vKmK12yDe82fljeGTkPu9z75TGGXOPmJEDzH6wcFILoCgJOcQc+kMDrk7IQWbPrUkLFTUiR5hdNMQgdgrkGLO3KEGGQCBHmV+VxhrqRY4zux0jFPvLk+PMziYEHyGeHGV2230gduuFfB6JUWy/z4DPY2xxkPf+fCAdGjZMHmgXrEO3Uhmc2e0z2KFvk7Q4M9ah//aEGiPxM0puGwNoyZ2fMXLbkvkwyPyMkNthkI0hoAdh8iYfgGAPQuR+AHJ5OutAcsmzI3JEetCTJ3/csuNmWGekBy15wi2hg25dETMOy5SfNrsjdrh4xH50uBPY4IXXissXGva9q9RHlzirFqXXR1F/9+Jq1UVXZlYjN+6Wnta3/c0zwZZMH1y75Y3/8Gn04aMsPAcbtj0HWYM9B/8AX7CdfXBQYZ0AAAAASUVORK5CYII="},"0fc2":function(e,t,a){},1127:function(e,t,a){"use strict";var s=a("65d2"),i=a.n(s);i.a},1735:function(e,t,a){"use strict";var s=a("6f48"),i=a.n(s);i.a},"1c4b":function(e,t,a){},"1e78":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"下单有礼","second-title":"编辑活动"}}),a("div",{staticClass:"wrapper"},[a("el-form",{ref:"AcitveData",staticStyle:{width:"600px"},attrs:{"label-position":"left",model:e.AcitveData,rules:e.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"活动名称",prop:"cashName"}},[a("el-input",{attrs:{minlength:"3",maxlength:"20"},model:{value:e.AcitveData.cashName,callback:function(t){e.$set(e.AcitveData,"cashName",t)},expression:"AcitveData.cashName"}})],1),a("el-form-item",{attrs:{label:"活动时间"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"startTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"年-月-日 时:分",format:"yyyy-MM-dd HH:mm","value-format":"timestamp","picker-options":e.pickerOptions0},model:{value:e.AcitveData.startTime,callback:function(t){e.$set(e.AcitveData,"startTime",t)},expression:"AcitveData.startTime"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"endTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"timestamp",placeholder:"年-月-日 时:分",format:"yyyy-MM-dd HH:mm","picker-options":e.pickerOptions1,"default-time":"23:59:59"},on:{change:e.formatendtime},model:{value:e.AcitveData.endTime,callback:function(t){e.$set(e.AcitveData,"endTime",t)},expression:"AcitveData.endTime"}})],1)],1)],1),a("el-form-item",{staticClass:"cashType",attrs:{label:"活动类型",prop:"cashType"}},[a("el-row",[a("span",[e._v("现金红包")])]),a("el-radio-group",{on:{change:e.AmonutCach},model:{value:e.AcitveData.cashType,callback:function(t){e.$set(e.AcitveData,"cashType",t)},expression:"AcitveData.cashType"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-radio",{attrs:{label:1}},[e._v("固定金额 ")])],1),a("el-col",{attrs:{span:10}},[a("el-radio",{attrs:{label:2}},[e._v("订单金额百分比 ")])],1)],1),e.Amountflag?a("el-form-item",{staticClass:"radioBox"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.AcitveData.cashAmount0,expression:"AcitveData.cashAmount0",modifiers:{number:!0}}],class:{active:e.iswarn0},attrs:{type:"number",min:"0.01",max:"100",step:"0.01"},domProps:{value:e.AcitveData.cashAmount0},on:{blur:[e.checks,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||e.$set(e.AcitveData,"cashAmount0",e._n(t.target.value))}}}),a("span",[e._v(" %")]),a("span",{staticClass:"warn"},[e._v("‘订单金额百分比’为支付现金金额的百分比")]),a("p",{attrs:{id:"warn_red"}})]):a("el-form-item",{staticClass:"radioBox"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.AcitveData.cashAmount,expression:"AcitveData.cashAmount",modifiers:{number:!0}}],class:{active:e.iswarn},attrs:{type:"number",min:"1",max:"99999999"},domProps:{value:e.AcitveData.cashAmount},on:{blur:[e.checks,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||e.$set(e.AcitveData,"cashAmount",e._n(t.target.value))}}}),a("span",[e._v(" 元")]),a("p",{attrs:{id:"warn_red"}})])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.Amountflag,expression:"Amountflag"}],attrs:{label:"单次最高返现金额",prop:"maxSingleCash"}},[a("el-input",{attrs:{min:"1",max:"99999999",maxlength:"8"},model:{value:e.AcitveData.maxSingleCash,callback:function(t){e.$set(e.AcitveData,"maxSingleCash",e._n(t))},expression:"AcitveData.maxSingleCash"}})],1),a("el-form-item",{attrs:{label:"活动总额",prop:"totalAmount"}},[a("el-input",{attrs:{type:"number",min:"1",max:"99999999",maxlength:"8"},model:{value:e.AcitveData.totalAmount,callback:function(t){e.$set(e.AcitveData,"totalAmount",e._n(t))},expression:"AcitveData.totalAmount"}},[e._v("\n          "+e._s(e.utils.formatMoney(e.AcitveData.totalAmount))+"\n        ")]),a("span",{staticClass:"warn"},[e._v("输入 -1 代表不限制活动金额")])],1),a("el-form-item",{attrs:{label:"活动人群",prop:"targetUsers"}},[a("el-radio-group",{model:{value:e.AcitveData.targetUsers,callback:function(t){e.$set(e.AcitveData,"targetUsers",t)},expression:"AcitveData.targetUsers"}},[a("el-radio",{attrs:{label:"2"}},[e._v("全部")]),a("el-radio",{attrs:{label:"1"}},[e._v("新用户")])],1)],1),a("el-form-item",{attrs:{label:"有礼单数"}},[a("el-input",{attrs:{type:"number",min:"0",disabled:""},model:{value:e.AcitveData.maxNumber,callback:function(t){e.$set(e.AcitveData,"maxNumber",e._n(t))},expression:"AcitveData.maxNumber"}}),a("span",{staticClass:"warn"},[e._v("活动开始后可参加下单有礼的订单数")])],1),a("el-form-item",{attrs:{label:"活动商品",prop:"cashScope"}},[a("el-radio-group",{model:{value:e.AcitveData.cashScope,callback:function(t){e.$set(e.AcitveData,"cashScope",t)},expression:"AcitveData.cashScope"}},[a("el-radio",{attrs:{label:"0",selected:""}},[e._v("全部商品")])],1)],1),a("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[a("el-input",{attrs:{min:"1",max:"999"},model:{value:e.AcitveData.priority,callback:function(t){e.$set(e.AcitveData,"priority",e._n(t))},expression:"AcitveData.priority"}}),a("span",{staticClass:"warn"},[e._v("请输入1-999数字。字数越大优先级越高。优先级相同的活动，以便及时间为准")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.check("AcitveData",e.AcitveData)}}},[e._v("确定")]),a("el-button",{on:{click:e.back}},[e._v("取消")])],1)],1)],1)],1)},i=[],r=(a("a481"),a("6b54"),{data(){var e=(e,t,a)=>{if(!t)return a(new Error("活动总额不能为空或者0"));-2>t||t>99999999?a(new Error("总金额取值区间为1-99999999")):a()};return{subm:!0,id:this.$route.params.id?this.$route.params.id:"",AcitveData:{cashName:"",startTime:"",endTime:"",cashAmount:"",cashAmount0:"",cashType:"1",targetUsers:"1",totalAmount:"-1",maxNumber:"1",cashScope:"0",priority:"",maxSingleCash:""},pickerOptions0:{disabledDate:e=>{return""!=this.AcitveData.endTime&&null!=this.AcitveData.endTime?e.getTime()<Date.now()-864e5||e>this.AcitveData.endTime:e.getTime()<Date.now()-864e5}},pickerOptions1:{disabledDate:e=>{return e<this.AcitveData.startTime-864e5}},Amountflag:!1,rules:{cashName:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],startTime:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],endTime:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"}],totalAmount:[{required:!0,validator:e,trigger:"blur"}],targetUsers:[{required:!0,message:"请输入活动名称",trigger:"blur"}],priority:[{required:!0,type:"number",message:"优先级不能为空",trigger:"blur"},{type:"number",min:1,max:999,message:"优先级在1-999之间",trigger:"blur"}],cashType:[{required:!0,message:"请选择活动类型",trigger:"change"}],cashScope:[{required:!0,message:"请选择活动类型",trigger:"change"}],maxSingleCash:[{required:!0,type:"number",message:"单次最高返现金额不能为空",trigger:"blur"},{type:"number",min:1,max:99999999,message:"订单金额区间为1-99999999",trigger:"blur"}]},iswarn:!1,iswarn0:!1}},created(){this.acitveDatas(this.id)},methods:{check(e,t){1==t.cashType?t.maxSingleCash=Number(t.cashAmount):t.cashAmount=t.cashAmount0,this.$refs[e].validate(e=>{if(!e||!this.subm)return this.checks(),console.log("error submit!!"),!1;this.subm=!1,t.startTime=parseInt(t.startTime/1e3),t.endTime=parseInt(t.endTime/1e3),this.$api.post("/hd/itzReturnCashActivity/check",t,e=>{if(200===e.status)this.saveForm(t);else{if(30101===e.status)return this.subm=!0,t.startTime=1e3*t.startTime,t.endTime=1e3*t.endTime,void this.$alert(e.message,"提示",{confirmButtonText:"确定",callback:()=>{t.cashName=""}});30102===e.status?(this.subm=!1,t.startTime=1e3*t.startTime,t.endTime=1e3*t.endTime,this.$confirm("该时间段已有返现活动，是否继续编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.startTime=parseInt(t.startTime/1e3),t.endTime=parseInt(t.endTime/1e3),this.saveForm(t)}).catch(()=>{this.subm=!0,this.$message({type:"info",message:"已取消编辑"})})):(this.subm=!1,t.startTime=1e3*t.startTime,t.endTime=1e3*t.endTime,this.$message.error({title:"错误",message:e.message}))}},e=>{console.log(e),this.subm=!0,t.startTime=1e3*t.startTime,t.endTime=1e3*t.endTime})})},saveForm(e){this.$api.put("/hd/itzReturnCashActivity/".concat(e.id," "),e,t=>{200===t.status?(this.$message("修改成功"),this.back()):(e.startTime=1e3*e.startTime,e.endTime=1e3*e.endTime,this.$message.error({title:"错误",message:t.message}))})},resetForm(e){this.$refs[e].resetFields()},AmonutCach(e){this.subm=!1,this.Amountflag="1"!=e,this.checks()},formatendtime(e){e&&e<this.AcitveData.startTime&&this.$alert("结束时间不能早于开始时间","提示",{confirmButtonText:"确定",callback:()=>{this.AcitveData.endTime=""}})},acitveDatas(e){this.$api.get("/hd/itzReturnCashActivity/get/detail/".concat(e),null,e=>{200===e.status?(this.AcitveData=e.data,this.AcitveData.startTime=1e3*this.AcitveData.startTime,this.AcitveData.endTime=1e3*this.AcitveData.endTime,2===this.AcitveData.cashType&&(this.Amountflag=!0,this.AcitveData.cashAmount0=this.AcitveData.cashAmount)):(this.AcitveData.startTime=1e3*this.AcitveData.startTime,this.AcitveData.endTime=1e3*this.AcitveData.endTime,this.$message.error({title:"错误",message:e.message}))})},back(){this.$router.go(-1)},thousandBitSeparator(e){return e&&(-1!=e.toString().indexOf(".")?e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","}):e.toString().replace(/(\d)(?=(\d{3}))/g,function(e,t){return t+","}))},checks(){console.log("check",this.Amountflag);var e="";this.subm=!1,this.iswarn=!0,this.iswarn0=!0,this.Amountflag?(document.getElementById("warn_red").innerHTML="",e=this.AcitveData.cashAmount0,console.log("val",e),""==e?document.getElementById("warn_red").innerHTML="订单金额百分比不能为空":e<.01||e>100?document.getElementById("warn_red").innerHTML="订单金额百分比取值区间为0.01-100":(document.getElementById("warn_red").innerHTML="",this.subm=!0,this.iswarn0=!1)):(document.getElementById("warn_red").innerHTML="",e=this.AcitveData.cashAmount,console.log("val",e),""==e?document.getElementById("warn_red").innerHTML="红包金额不能为空":e<1||e>99999999?document.getElementById("warn_red").innerHTML="红包金额取值区间为1-99999999":(document.getElementById("warn_red").innerHTML="",this.subm=!0,this.iswarn=!1))}}}),n=r,l=(a("41a3"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"5744a2a5",null);t["default"]=o.exports},"203a":function(e,t,a){"use strict";var s=a("e350"),i=a.n(s);i.a},2065:function(e,t,a){},2123:function(e,t,a){"use strict";var s=a("62f4"),i=a.n(s);i.a},"21a6":function(e,t,a){(function(a){var s,i,r;(function(a,n){i=[],s=n,r="function"===typeof s?s.apply(t,i):s,void 0===r||(e.exports=r)})(0,function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function s(e,t,a){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){l(s.response,t,a)},s.onerror=function(){console.error("could not download file")},s.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(s){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,l=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,a){var l=n.URL||n.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener","string"==typeof e?(o.href=e,o.origin===location.origin?r(o):i(o.href)?s(e,t,a):r(o,o.target="_blank")):(o.href=l.createObjectURL(e),setTimeout(function(){l.revokeObjectURL(o.href)},4e4),setTimeout(function(){r(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,n){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,n),a);else if(i(e))s(e,a,n);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout(function(){r(l)})}}:function(e,t,a,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return s(e,t,a);var r="application/octet-stream"===e.type,l=/constructor/i.test(n.HTMLElement)||n.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&l)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var u=n.URL||n.webkitURL,p=u.createObjectURL(e);i?i.location=p:location.href=p,i=null,setTimeout(function(){u.revokeObjectURL(p)},4e4)}});n.saveAs=l.saveAs=l,e.exports=l})}).call(this,a("c8ba"))},"25fc":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("优惠券")]),a("el-breadcrumb-item",[e._v("优惠券列表")])],1)],1),a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addNew()}}},[e._v("创建优惠券")])],1),a("div",{staticClass:"search-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchParams}},[a("el-form-item",{attrs:{label:"优惠券名称"}},[a("el-input",{attrs:{placeholder:"优惠券名称"},model:{value:e.searchParams.couponName,callback:function(t){e.$set(e.searchParams,"couponName",t)},expression:"searchParams.couponName"}})],1),a("el-form-item",{attrs:{label:"优惠券状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"优惠券状态"},model:{value:e.searchParams.couponStatus,callback:function(t){e.$set(e.searchParams,"couponStatus",t)},expression:"searchParams.couponStatus"}},e._l(e.classList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{on:{click:e.clear}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"couponName",label:"优惠券名称"}}),a("el-table-column",{attrs:{label:"已领取/剩余"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"couponDetails",params:{id:t.row.id}}}},[a("el-button",{attrs:{type:"text",size:"small"}},[e._v(e._s(t.row.sendCount)+"/"+e._s(t.row.totalCount-t.row.sendCount))])],1)]}}])}),a("el-table-column",{attrs:{prop:"couponStatus",label:"状态",formatter:e.statusFormat}}),a("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.couponStatus?a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.del(t.row.id)}}},[e._v("删除")])],1):a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.toLink(t.row.couponLink)}}},[e._v("链接")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.invalid(t.row.id)}}},[e._v("作废")])],1)]}}])})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.searchParams.pageSize,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"编辑",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"优惠券名称",prop:"couponName"}},[a("el-input",{model:{value:e.form.couponName,callback:function(t){e.$set(e.form,"couponName",t)},expression:"form.couponName"}})],1),a("el-form-item",{attrs:{label:"发放总量",prop:"totalCount"}},[a("el-input",{attrs:{disabled:""},model:{value:e.showForm.totalCount,callback:function(t){e.$set(e.showForm,"totalCount",t)},expression:"showForm.totalCount"}})],1),a("el-form-item",{attrs:{label:"使用门槛",prop:"thresholdType"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.showForm.thresholdType,callback:function(t){e.$set(e.showForm,"thresholdType",t)},expression:"showForm.thresholdType"}},[a("el-radio",{attrs:{label:0,disabled:""}},[e._v("无门槛")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-radio",{attrs:{label:1,disabled:""}},[e._v("订单满")])],1)],1),1==e.showForm.thresholdType?a("div",{staticClass:"left_flex"},[a("el-input",{attrs:{disabled:""},model:{value:e.showForm.thresholdAmount,callback:function(t){e.$set(e.showForm,"thresholdAmount",t)},expression:"showForm.thresholdAmount"}},[a("template",{slot:"append"},[e._v("元")])],2)],1):e._e()],1),a("el-form-item",{attrs:{label:"优惠内容",prop:"preferentialAmount"}},[a("el-input",{attrs:{disabled:""},model:{value:e.showForm.preferentialAmount,callback:function(t){e.$set(e.showForm,"preferentialAmount",t)},expression:"showForm.preferentialAmount"}},[a("template",{slot:"prepend"},[e._v("减")]),a("template",{slot:"append"},[e._v("元")])],2)],1),a("el-form-item",{attrs:{label:"有效期",prop:"order_valid"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.showForm.periodType,callback:function(t){e.$set(e.showForm,"periodType",t)},expression:"showForm.periodType"}},[a("div",{staticStyle:{display:"flex"}},[a("el-radio",{attrs:{label:0,disabled:""}},[e._v("日期")]),0==e.showForm.periodType?a("div",{staticStyle:{display:"flex",flex:"1","margin-left":"20px",height:"20px"}},[a("el-input",{staticStyle:{flex:"1"},attrs:{disabled:""},model:{value:e.showForm.periodStartTime,callback:function(t){e.$set(e.showForm,"periodStartTime",t)},expression:"showForm.periodStartTime"}}),a("span",{staticStyle:{"font-size":"14px","line-height":"40px",width:"40px","text-align":"center"}},[e._v("至")]),a("el-input",{staticStyle:{flex:"1"},attrs:{disabled:""},model:{value:e.showForm.periodEndTime,callback:function(t){e.$set(e.showForm,"periodEndTime",t)},expression:"showForm.periodEndTime"}})],1):e._e()],1),a("div",{staticStyle:{"margin-top":"10px",display:"flex",height:"20px"}},[a("el-radio",{attrs:{label:1,disabled:""}},[e._v("领券后")]),1==e.showForm.periodType?a("el-input",{staticStyle:{flex:"1","margin-top":"-25px"},attrs:{disabled:""},model:{value:e.showForm.periodType,callback:function(t){e.$set(e.showForm,"periodType",t)},expression:"showForm.periodType"}},[a("template",{slot:"append"},[e._v("天")])],2):e._e()],1)])],1),a("el-form-item",{attrs:{label:"适用商品",prop:"count"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialogFormVisible2=!0}}},[e._v(e._s(e.showForm.count))])],1),a("el-form-item",{attrs:{label:"领取人",prop:"targetUsers"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.showForm.targetUsers,callback:function(t){e.$set(e.showForm,"targetUsers",t)},expression:"showForm.targetUsers"}},[a("el-radio",{attrs:{label:1,disabled:""}},[e._v("全部")]),a("el-radio",{attrs:{label:2,disabled:""}},[e._v("新用户")])],1)],1),a("el-form-item",{attrs:{label:"领取限制",prop:"receiveLimit"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.showForm.receiveLimit,callback:function(t){e.$set(e.showForm,"receiveLimit",t)},expression:"showForm.receiveLimit"}},[a("el-radio",{attrs:{label:-1,disabled:""}},[e._v("不限")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-radio",{attrs:{label:1,disabled:""}},[e._v("次数")])],1)],1),1==e.showForm.receiveLimit?a("div",{staticClass:"left_flex"},[a("el-input",{attrs:{disabled:""},model:{value:e.showForm.receiveLimit,callback:function(t){e.$set(e.showForm,"receiveLimit",t)},expression:"showForm.receiveLimit"}})],1):e._e()],1),a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[a("el-input",{model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1),a("el-form-item",{attrs:{label:"使用说明",prop:"useDescription"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.useDescription,callback:function(t){e.$set(e.form,"useDescription",t)},expression:"form.useDescription"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitCoupon}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"已添加商品",visible:e.dialogFormVisible2,width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("div",{staticClass:"search-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchParams2}},[a("el-form-item",{attrs:{label:"商品货号"}},[a("el-input",{attrs:{placeholder:"商品货号"},model:{value:e.searchParams2.goodsId,callback:function(t){e.$set(e.searchParams2,"goodsId",t)},expression:"searchParams2.goodsId"}})],1),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.searchParams2.goodsName,callback:function(t){e.$set(e.searchParams2,"goodsName",t)},expression:"searchParams2.goodsName"}})],1),a("el-form-item",{attrs:{label:"商家"}},[a("el-input",{attrs:{placeholder:"商家"},model:{value:e.searchParams2.suppliersName,callback:function(t){e.$set(e.searchParams2,"suppliersName",t)},expression:"searchParams2.suppliersName"}})],1),a("el-form-item",{attrs:{label:"商品分类"}},[a("el-cascader",{attrs:{options:e.options,placeholder:"商品分类",clearable:""},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search2}},[e._v("查询")]),a("el-button",{on:{click:e.clear2}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list2}},[a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"goodsId",label:"商品ID"}}),a("el-table-column",{attrs:{prop:"catName",label:"商品分类"}}),a("el-table-column",{attrs:{prop:"shopPrice",label:"售价"}}),a("el-table-column",{attrs:{prop:"tokenPrice",label:"积分抵扣"}}),a("el-table-column",{attrs:{prop:"suppliersName",label:"商家"}})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage2,"page-size":e.searchParams2.pageSize,layout:"prev, pager, next, jumper",total:e.total2},on:{"current-change":e.handleCurrentChange2}})],1)],1)},i=[],r=(a("3022"),{name:"couponList",data(){return{total:0,currentPage:1,searchParams:{pageNumber:1,pageSize:10,couponName:"",couponStatus:""},list:[],classList:{0:"未开始",1:"进行中",2:"已失效"},dialogFormVisible:!1,dialogFormVisible2:!1,form:{id:"",couponName:"",remarks:"",useDescription:""},showForm:{},total2:0,currentPage2:1,searchParams2:{pageNumber:1,pageSize:10,couponId:"",goodsId:"",goodsName:"",suppliersName:"",catId:"",catType:""},list2:[],value:[],options:[]}},methods:{getList(){this.$api.get("hd/itzCoupon/list",this.searchParams,e=>{200==e.status&&(this.list=e.data.rows,this.total=e.data.total)})},getList2(){this.$api.get("hd/itzCouponGoods/goods/list",this.searchParams2,e=>{200==e.status&&(this.list2=e.data.rows,this.total2=e.data.total)})},getProductList(){this.$api.get("hd/itzCoupon/category",null,e=>{if(200==e.status){let t=[];e.data.rows.forEach(e=>{let a={value:e.catId,label:e.catName};e.itzCategories.length>0&&(a.children=[],e.itzCategories.forEach(e=>{let t={value:e.catId,label:e.catName};e.itzCategories.length>0&&(t.children=[],e.itzCategories.forEach(e=>{let a={value:e.catId,label:e.catName};t.children.push(a)})),a.children.push(t)})),t.push(a)}),this.options=t}})},statusFormat(e,t,a){return this.classList[a]},edit(e){this.dialogFormVisible=!0,this.form.id=e.id,this.form.couponName=e.couponName,this.form.remarks=e.remarks,this.form.useDescription=e.useDescription,this.$api.get("hd/itzCoupon/info/".concat(e.id),null,e=>{200==e.status&&(this.showForm=e.data.coupon,this.showForm.periodType=0==e.data.coupon.periodType?0:1,this.showForm.periodStartTime=this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*e.data.coupon.periodStartTime),this.showForm.periodEndTime=this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*e.data.coupon.periodEndTime),this.showForm.count=e.data.count,this.showForm.receiveLimit=-1==e.data.coupon.receiveLimit?-1:1)}),this.searchParams2.couponId=e.id,this.getList2()},toLink(e){this.$alert(e,"优惠券名称",{confirmButtonText:"复制"}).then(()=>{let t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove(),this.$message({type:"success",message:"已复制到剪切板!"})})},invalid(e){this.$confirm("确定作废该优惠券吗?(已领取的可继续使用)","作废",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{this.$api.put("hd/itzCoupon/status",{id:e,status:2},e=>{200==e.status&&this.getList()})}).catch(()=>{this.$message({type:"info",message:"已取消作废"})})},del(e){this.$confirm("确定删除该优惠券吗?","删除",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{this.$api.put("hd/itzCoupon/status",{id:e,status:3},e=>{200==e.status&&this.getList()})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},submitCoupon(){this.$api.put("hd/itzCoupon/coupon",this.form,e=>{200==e.status&&(this.dialogFormVisible=!1,this.getList())})},handleCurrentChange(e){this.searchParams.pageNumber=e,this.getList()},clear(){this.searchParams.pageNumber=1,this.searchParams.couponName="",this.searchParams.couponStatus="",this.getList()},search(){this.searchParams.pageNumber=1,this.getList()},addNew(){this.$router.push({name:"newCoupon"})},handleCurrentChange2(e){this.searchParams2.pageNumber=e,this.getList2()},handleChange(e){this.searchParams2.catId=e[e.length-1],this.searchParams2.catType=e.length},clear2(){this.searchParams2.pageNumber=1,this.searchParams2.goodsName="",this.searchParams2.suppliersName="",this.searchParams2.goodsId="",this.searchParams2.catId="",this.searchParams2.catType="",this.value=[],this.getList2()},search2(){this.searchParams2.pageNumber=1,this.getList2()}},created(){this.getList(),this.getProductList()}}),n=r,l=(a("a5c9"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"10016bb8",null);t["default"]=o.exports},3022:function(e,t,a){(function(e){var s=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),a={},s=0;s<t.length;s++)a[t[s]]=Object.getOwnPropertyDescriptor(e,t[s]);return a},i=/%[sdj%]/g;t.format=function(e){if(!C(e)){for(var t=[],a=0;a<arguments.length;a++)t.push(l(arguments[a]));return t.join(" ")}a=1;for(var s=arguments,r=s.length,n=String(e).replace(i,function(e){if("%%"===e)return"%";if(a>=r)return e;switch(e){case"%s":return String(s[a++]);case"%d":return Number(s[a++]);case"%j":try{return JSON.stringify(s[a++])}catch(t){return"[Circular]"}default:return e}}),o=s[a];a<r;o=s[++a])g(o)||!D(o)?n+=" "+o:n+=" "+l(o);return n},t.deprecate=function(a,s){if("undefined"!==typeof e&&!0===e.noDeprecation)return a;if("undefined"===typeof e)return function(){return t.deprecate(a,s).apply(this,arguments)};var i=!1;function r(){if(!i){if(e.throwDeprecation)throw new Error(s);e.traceDeprecation?console.trace(s):console.error(s),i=!0}return a.apply(this,arguments)}return r};var r,n={};function l(e,a){var s={seen:[],stylize:c};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),v(a)?s.showHidden=a:a&&t._extend(s,a),T(s.showHidden)&&(s.showHidden=!1),T(s.depth)&&(s.depth=2),T(s.colors)&&(s.colors=!1),T(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=o),p(s,e,s.depth)}function o(e,t){var a=l.styles[t];return a?"["+l.colors[a][0]+"m"+e+"["+l.colors[a][1]+"m":e}function c(e,t){return e}function u(e){var t={};return e.forEach(function(e,a){t[e]=!0}),t}function p(e,a,s){if(e.customInspect&&a&&P(a.inspect)&&a.inspect!==t.inspect&&(!a.constructor||a.constructor.prototype!==a)){var i=a.inspect(s,e);return C(i)||(i=p(e,i,s)),i}var r=m(e,a);if(r)return r;var n=Object.keys(a),l=u(n);if(e.showHidden&&(n=Object.getOwnPropertyNames(a)),S(a)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return d(a);if(0===n.length){if(P(a)){var o=a.name?": "+a.name:"";return e.stylize("[Function"+o+"]","special")}if(x(a))return e.stylize(RegExp.prototype.toString.call(a),"regexp");if(A(a))return e.stylize(Date.prototype.toString.call(a),"date");if(S(a))return d(a)}var c,v="",g=!1,y=["{","}"];if(_(a)&&(g=!0,y=["[","]"]),P(a)){var w=a.name?": "+a.name:"";v=" [Function"+w+"]"}return x(a)&&(v=" "+RegExp.prototype.toString.call(a)),A(a)&&(v=" "+Date.prototype.toUTCString.call(a)),S(a)&&(v=" "+d(a)),0!==n.length||g&&0!=a.length?s<0?x(a)?e.stylize(RegExp.prototype.toString.call(a),"regexp"):e.stylize("[Object]","special"):(e.seen.push(a),c=g?h(e,a,s,l,n):n.map(function(t){return f(e,a,s,l,t,g)}),e.seen.pop(),b(c,v,y)):y[0]+v+y[1]}function m(e,t){if(T(t))return e.stylize("undefined","undefined");if(C(t)){var a="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(a,"string")}return w(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,a,s,i){for(var r=[],n=0,l=t.length;n<l;++n)E(t,String(n))?r.push(f(e,t,a,s,String(n),!0)):r.push("");return i.forEach(function(i){i.match(/^\d+$/)||r.push(f(e,t,a,s,i,!0))}),r}function f(e,t,a,s,i,r){var n,l,o;if(o=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},o.get?l=o.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):o.set&&(l=e.stylize("[Setter]","special")),E(s,i)||(n="["+i+"]"),l||(e.seen.indexOf(o.value)<0?(l=g(a)?p(e,o.value,null):p(e,o.value,a-1),l.indexOf("\n")>-1&&(l=r?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),T(n)){if(r&&i.match(/^\d+$/))return l;n=JSON.stringify(""+i),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=e.stylize(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=e.stylize(n,"string"))}return n+": "+l}function b(e,t,a){var s=e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return s>60?a[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+a[1]:a[0]+t+" "+e.join(", ")+" "+a[1]}function _(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function g(e){return null===e}function y(e){return null==e}function w(e){return"number"===typeof e}function C(e){return"string"===typeof e}function k(e){return"symbol"===typeof e}function T(e){return void 0===e}function x(e){return D(e)&&"[object RegExp]"===I(e)}function D(e){return"object"===typeof e&&null!==e}function A(e){return D(e)&&"[object Date]"===I(e)}function S(e){return D(e)&&("[object Error]"===I(e)||e instanceof Error)}function P(e){return"function"===typeof e}function $(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function I(e){return Object.prototype.toString.call(e)}function L(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(a){if(T(r)&&(r=Object({NODE_ENV:"production",VUE_APP_APPSERVER_HOST:"https://api.youjiemall.com",VUE_APP_HDSERVER_HOST:"https://hd.youjiemall.com",VUE_APP_JAVASERVER_HOST:"https://docker.youjiemall.com",VUE_APP_STORENAME:"有解",BASE_URL:"templates_vue/"}).NODE_DEBUG||""),a=a.toUpperCase(),!n[a])if(new RegExp("\\b"+a+"\\b","i").test(r)){var s=e.pid;n[a]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",a,s,e)}}else n[a]=function(){};return n[a]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=_,t.isBoolean=v,t.isNull=g,t.isNullOrUndefined=y,t.isNumber=w,t.isString=C,t.isSymbol=k,t.isUndefined=T,t.isRegExp=x,t.isObject=D,t.isDate=A,t.isError=S,t.isFunction=P,t.isPrimitive=$,t.isBuffer=a("d60a");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var e=new Date,t=[L(e.getHours()),L(e.getMinutes()),L(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",N(),t.format.apply(t,arguments))},t.inherits=a("3fb5"),t._extend=function(e,t){if(!t||!D(t))return e;var a=Object.keys(t),s=a.length;while(s--)e[a[s]]=t[a[s]];return e};var M="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function j(e,t){if(!e){var a=new Error("Promise was rejected with a falsy value");a.reason=e,e=a}return t(e)}function F(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function a(){for(var a=[],s=0;s<arguments.length;s++)a.push(arguments[s]);var i=a.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var r=this,n=function(){return i.apply(r,arguments)};t.apply(this,a).then(function(t){e.nextTick(n,null,t)},function(t){e.nextTick(j,t,n)})}return Object.setPrototypeOf(a,Object.getPrototypeOf(t)),Object.defineProperties(a,s(t)),a}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(M&&e[M]){var t=e[M];if("function"!==typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,a,s=new Promise(function(e,s){t=e,a=s}),i=[],r=0;r<arguments.length;r++)i.push(arguments[r]);i.push(function(e,s){e?a(e):t(s)});try{e.apply(this,i)}catch(n){a(n)}return s}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),M&&Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,s(e))},t.promisify.custom=M,t.callbackify=F}).call(this,a("4362"))},3784:function(e,t,a){"use strict";var s=a("40c8"),i=a.n(s);i.a},"3ce5":function(e,t,a){"use strict";var s=a("0fc2"),i=a.n(s);i.a},"3fb5":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},"40c8":function(e,t,a){},"41a3":function(e,t,a){"use strict";var s=a("5de7"),i=a.n(s);i.a},"42ac":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v(e._s(e.name)+"平台")]),a("el-breadcrumb-item",[e._v("出借人")])],1)],1),a("div",{staticClass:"search-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchParams}},[a("el-form-item",{attrs:{label:"出借人"}},[a("el-input",{attrs:{placeholder:"出借人或手机号"},model:{value:e.searchParams.userName,callback:function(t){e.$set(e.searchParams,"userName",t)},expression:"searchParams.userName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{on:{click:e.clear}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),a("el-table-column",{attrs:{prop:"mobilePhone",label:"手机号"}}),a("el-table-column",{attrs:{prop:"totalToken",label:"代付额度"}}),a("el-table-column",{attrs:{prop:"useToken",label:"已代付数额"}}),a("el-table-column",{attrs:{prop:"token",label:"剩余额度"}})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.searchParams.limit,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)},i=[],r=(a("a481"),{name:"LenderList",data(){let e=localStorage.getItem("partnerName");return{name:e,total:0,currentPage:1,searchParams:{page:1,limit:10,userName:""},list:[]}},methods:{getList(){this.replaceDatas(this.searchParams);let e=JSON.stringify(this.searchParams).replace(/:/g,"=").replace("{","").replace("}","").replace(/,/g,"&").replace(/"/g,"").replace(/\s+/g,"");this.$api.get("hd/itzPartnerUser/page/list?"+e,null,e=>{200==e.status&&(this.list=e.data.rows,this.total=e.data.total)})},replaceDatas(e){for(let t in e)""!=e[t]&&null!=e[t]||delete e[t]},handleCurrentChange(e){this.searchParams.page=e,this.getList()},clear(){this.searchParams.page=1,this.searchParams.size=10,this.searchParams.userName="",this.getList()},search(){this.searchParams.page=1,this.getList()}},created(){this.getList()}}),n=r,l=(a("ebbc"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"4695f420",null);t["default"]=o.exports},"446c":function(e,t,a){},"447f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"商家列表","second-title":"商家资产"}}),a("section",[a("div",{staticClass:"bond-item"},[a("p",[e._v("保证金")]),a("h3",[e._v(e._s(e.bond))])])]),a("section",["all"===e.role||"operater"===e.role?a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.showAlert}},[e._v("扣减保证金")])],1):e._e(),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.bondList,"header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"addtime",label:"申请时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{prop:"bond_money",label:"金额（元）",formatter:e.priceFormat}}),a("el-table-column",{attrs:{prop:"current_bond_money",label:"保证金余额（元）"}})],1)],1)],1)},i=[],r=(a("097d"),a("be94")),n=a("afbd"),l=a("9d62"),o=a("2f62"),c={name:"BondInfo",data(){return{bond:0,bondList:[],currentPage:1,total:0,cutMoney:0,isLoading:!1}},created(){this.getAccount(),this.getBondList()},computed:Object(r["a"])({},Object(o["c"])({suppliers_id:e=>e.suppliers.suppliers_id,role:e=>e.settle.role})),methods:{getAccount(){Object(n["e"])(this.suppliers_id).then(e=>{this.bond=e.bond_money},e=>{console.log(e)})},getBondList(){this.isLoading=!0,Object(l["m"])(this.suppliers_id,this.currentPage).then(e=>{this.bondList=e.list,this.total=e.paged.total},e=>{console.log(e)}).finally(()=>{this.isLoading=!1})},dateFormat:function(e,t){let a=e[t.property];return this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a)},priceFormat(e,t){return 2==e.direction?"-"+e[t.property]:e[t.property]},showAlert(){let e='<p style="">\n                <label style="display:inline-block;width:70px;font-weight:bold">扣减金额</label>\n                <input id="bond" name="num"  />\n              </p>\n              <p style="height:28px;line-height:28px;">\n                <label for="bond-add"><input type="radio" name="direction" id="bond-add" value="1" checked>增加</label>\n                &ensp;&ensp;\n                <label for="bond-sub"><input type="radio" name="direction" id="bond-sub" value="2">减少</label>\n              </p>\n              <p>\n                <label style="display:inline-block;width:70px;font-weight:bold">备注</label>\n                <textarea id="remark" name="remark" cols="30" rows="10" style="vertical-align: top;"></textarea>\n              </p>';this.$alert(e,"",{dangerouslyUseHTMLString:!0,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:(e,t,a)=>{if("confirm"===e){let e=document.getElementById("bond").value,t=document.getElementById("remark").value,s=document.getElementsByName("direction"),i=0;for(let a=0;a<s.length;a++)s[a].checked&&(i=s[a].value);if(!e||!t)return void alert("扣减金额和备注必填");Object(l["a"])(this.suppliers_id,e,i,t).then(e=>{console.log(e),a(),this.$root.reload()},e=>{alert(e.info)})}else a()}})}}},u=c,p=(a("7ceb"),a("2877")),m=Object(p["a"])(u,s,i,!1,null,"b43596b0",null);t["default"]=m.exports},4729:function(e,t,a){"use strict";var s=a("d4c3"),i=a.n(s);i.a},"47f7":function(e,t,a){},"48de":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"unsettle-detail-container"},[a("page-title",{attrs:{"first-title":"账户信息","second-title":"待结算明细"}}),a("div",{staticClass:"table-02"},[a("el-tabs",{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("el-tab-pane",{attrs:{label:"订单总收入",name:"1"}},[a("v-income",{attrs:{cash:e.cashTotal,huanbi:e.huanbiTotal}}),a("el-table",{attrs:{data:e.incomeData,border:"",stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{label:"订单号",prop:"order_sn"}}),a("el-table-column",{attrs:{label:"下单时间",prop:"add_time",formatter:e.fmtTime}}),a("el-table-column",{attrs:{label:"支付金额（元）",prop:"settlement_all"}}),a("el-table-column",{attrs:{label:"支付现金额（元）",prop:"settlement_cash_no_shipping"}}),1==e.cooperateType?a("el-table-column",{attrs:{label:"支付积分额",prop:"settlement_huanbi"}}):e._e(),a("el-table-column",{attrs:{label:"现金退款",prop:"settlement_cash_back"}}),1==e.cooperateType?a("el-table-column",{attrs:{label:"积分退款",prop:"settlement_huanbi_back"}}):e._e(),a("el-table-column",{attrs:{label:"运费",prop:"shipping_fee"}}),a("el-table-column",{attrs:{label:"订单状态",prop:"status"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.goDetail(t.row.order_id)}}},[e._v("查看")])]}}])})],1)],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.params.page,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],r=a("be94"),n=a("a2e3"),l=a("8afe"),o=a("9d62"),c=a("2f62"),u=a("79ba"),p={name:"",data(){return{currentTab:"1",incomeData:[],cashTotal:0,huanbiTotal:0,params:{suppliers_id:"",page:1,size:10},total:0}},components:{"v-total":n["a"],"v-income":l["a"]},computed:Object(r["a"])({},Object(c["c"])({suppliers_id:e=>e.suppliers.suppliers_id,cooperateType:e=>e.suppliers.cooperateType})),created(){this.getData()},methods:{getData(){this.params.suppliers_id=this.suppliers_id,Object(o["j"])(this.params).then(e=>{this.incomeData=e.list,this.cashTotal=e.cash,this.huanbiTotal=e.huanbi,this.incomeData.forEach(e=>{e.status=u["b"][e.status]}),this.total=e.paged.total})},goDetail(e){window.location.href="/admin/order.php?act=info&order_id="+e},handleCurrentChange(){this.getData()},fmtTime(e,t,a){return this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a)}}},m=p,d=(a("4efe"),a("2877")),h=Object(d["a"])(m,s,i,!1,null,"0d1bca90",null);t["default"]=h.exports},"4ae2":function(e,t,a){},"4efe":function(e,t,a){"use strict";var s=a("47f7"),i=a.n(s);i.a},"4f9b":function(e,t,a){"use strict";var s=a("730e"),i=a.n(s);i.a},"504e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"下单有礼","second-title":"新建活动"}}),a("div",{staticClass:"wrapper"},[a("el-form",{ref:"newAcitveData",staticStyle:{width:"600px"},attrs:{"label-position":"left",model:e.newAcitveData,rules:e.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"活动名称",prop:"cashName"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.newAcitveData.cashName,callback:function(t){e.$set(e.newAcitveData,"cashName",t)},expression:"newAcitveData.cashName"}})],1),a("el-form-item",{attrs:{label:"活动时间",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"startTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"年-月-日 时:分",format:"yyyy-MM-dd HH:mm","value-format":"timestamp","picker-options":e.pickerOptions0},model:{value:e.newAcitveData.startTime,callback:function(t){e.$set(e.newAcitveData,"startTime",t)},expression:"newAcitveData.startTime"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"endTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"timestamp",placeholder:"年-月-日 时:分",format:"yyyy-MM-dd HH:mm","picker-options":e.pickerOptions1,"default-time":"23:59:59"},on:{change:e.formatendtime},model:{value:e.newAcitveData.endTime,callback:function(t){e.$set(e.newAcitveData,"endTime",t)},expression:"newAcitveData.endTime"}})],1)],1)],1),a("el-form-item",{staticClass:"cashType",attrs:{label:"活动类型",prop:"cashType"}},[a("el-row",[a("span",[e._v("现金红包")])]),a("el-radio-group",{on:{change:e.AmonutCach},model:{value:e.newAcitveData.cashType,callback:function(t){e.$set(e.newAcitveData,"cashType",t)},expression:"newAcitveData.cashType"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-radio",{attrs:{label:"1"}},[e._v("固定金额 ")])],1),a("el-col",{attrs:{span:10}},[a("el-radio",{attrs:{label:"2"}},[e._v("订单金额百分比 ")])],1)],1),e.Amountflag?a("el-form-item",{staticClass:"radioBox"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.newAcitveData.cashAmount0,expression:"newAcitveData.cashAmount0",modifiers:{number:!0}}],class:{active:e.iswarn0},attrs:{type:"number",min:"0.01",max:"100",step:"0.01"},domProps:{value:e.newAcitveData.cashAmount0},on:{blur:[e.checks,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||e.$set(e.newAcitveData,"cashAmount0",e._n(t.target.value))}}}),a("span",[e._v(" %")]),a("span",{staticClass:"warn"},[e._v("‘订单金额百分比’为支付现金金额的百分比")]),a("p",{attrs:{id:"warn_red"}})]):a("el-form-item",{staticClass:"radioBox"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.newAcitveData.cashAmount,expression:"newAcitveData.cashAmount",modifiers:{number:!0}}],class:{active:e.iswarn},attrs:{type:"number",min:"1",step:"1"},domProps:{value:e.newAcitveData.cashAmount},on:{blur:[e.checks,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||e.$set(e.newAcitveData,"cashAmount",e._n(t.target.value))}}}),a("span",[e._v(" 元")]),a("p",{attrs:{id:"warn_red"}})])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.Amountflag,expression:"Amountflag"}],attrs:{label:"单次最高返现金额",prop:"maxSingleCash"}},[a("el-input",{model:{value:e.newAcitveData.maxSingleCash,callback:function(t){e.$set(e.newAcitveData,"maxSingleCash",e._n(t))},expression:"newAcitveData.maxSingleCash"}})],1),a("el-form-item",{attrs:{label:"活动总额",prop:"totalAmount"}},[a("el-input",{attrs:{type:"number",min:"1",max:"99999999",maxlength:"8"},model:{value:e.newAcitveData.totalAmount,callback:function(t){e.$set(e.newAcitveData,"totalAmount",e._n(t))},expression:"newAcitveData.totalAmount"}},[e._v("\n          "+e._s(e.utils.formatMoney(e.newAcitveData.totalAmount))+"\n        ")]),a("span",{staticClass:"warn"},[e._v("输入 -1 代表不限制活动金额")])],1),a("el-form-item",{attrs:{label:"活动人群",prop:"targetUsers"}},[a("el-radio-group",{model:{value:e.newAcitveData.targetUsers,callback:function(t){e.$set(e.newAcitveData,"targetUsers",t)},expression:"newAcitveData.targetUsers"}},[a("el-radio",{attrs:{label:"2"}},[e._v("全部")]),a("el-radio",{attrs:{label:"1"}},[e._v("新用户")])],1)],1),a("el-form-item",{attrs:{label:"有礼单数"}},[a("el-input",{attrs:{disabled:""},model:{value:e.newAcitveData.maxNumber,callback:function(t){e.$set(e.newAcitveData,"maxNumber",e._n(t))},expression:"newAcitveData.maxNumber"}}),a("span",{staticClass:"warn"},[e._v("活动开始后可参加下单有礼的订单数")])],1),a("el-form-item",{attrs:{label:"活动商品",prop:"cashScope"}},[a("el-radio-group",{model:{value:e.newAcitveData.cashScope,callback:function(t){e.$set(e.newAcitveData,"cashScope",t)},expression:"newAcitveData.cashScope"}},[a("el-radio",{attrs:{label:"0"}},[e._v("全部商品")])],1)],1),a("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[a("el-input",{attrs:{type:"number",min:"1",max:"999",maxlength:"3"},model:{value:e.newAcitveData.priority,callback:function(t){e.$set(e.newAcitveData,"priority",e._n(t))},expression:"newAcitveData.priority"}}),a("span",{staticClass:"warn"},[e._v("请输入1-999数字。字数越大优先级越高。优先级相同的活动，以便及时间为准")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.check("newAcitveData",e.newAcitveData)}}},[e._v("确定")]),a("el-button",{on:{click:e.back}},[e._v("取消")])],1)],1)],1)],1)},i=[],r={data(){var e=(e,t,a)=>{if(!t)return a(new Error("活动总额不能为空或者0"));-2>t||t>99999999?a(new Error("总金额取值区间为1-99999999")):a()};return{subm:!0,newAcitveData:{cashName:"",startTime:Date.now()+36e5,endTime:"",cashAmount:"",cashAmount0:"",cashType:"1",targetUsers:"1",totalAmount:"-1",maxNumber:"1",cashScope:"0",priority:"",maxSingleCash:""},iswarn:!1,iswarn0:!1,AcitveData:{},pickerOptions0:{disabledDate:e=>{return""!=this.newAcitveData.endTime&&null!=this.newAcitveData.endTime?e.getTime()<Date.now()-864e5||e>this.newAcitveData.endTime:e.getTime()<Date.now()-864e5}},pickerOptions1:{disabledDate:e=>{return e<this.newAcitveData.startTime-864e5}},Amountflag:!1,rules:{cashName:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],startTime:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],endTime:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"}],totalAmount:[{required:!0,validator:e,trigger:"blur"}],targetUsers:[{required:!0,message:"请输入活动名称",trigger:"blur"}],priority:[{required:!0,message:"优先级不能为空",trigger:"blur"},{type:"number",min:1,max:999,message:"优先级在1-999之间",trigger:"blur"}],cashType:[{required:!0,message:"请选择活动类型",trigger:"change"}],maxSingleCash:[{required:!0,type:"number",message:"单次最高返现金额不能为空",trigger:"blur"},{type:"number",min:1,max:99999999,message:"订单金额区间为1-99999999",trigger:"blur"}]}}},methods:{check(e,t){1==t.cashType?t.maxSingleCash=Number(t.cashAmount):t.cashAmount=t.cashAmount0,this.$refs[e].validate(e=>{if(!e||!this.subm)return this.checks(),console.log("error submit!!"),!1;this.subm=!1,t.startTime=parseInt(t.startTime/1e3),t.endTime=parseInt(t.endTime/1e3),this.$api.post("/hd/itzReturnCashActivity/check",t,e=>{if(200===e.status)this.submit(t);else{if(30101===e.status)return this.subm=!0,t.startTime=1e3*t.startTime,t.endTime=1e3*t.endTime,void this.$alert(e.message,"提示",{confirmButtonText:"确定",callback:()=>{t.cashName=""}});30102===e.status?(t.startTime=1e3*t.startTime,t.endTime=1e3*t.endTime,this.subm=!0,this.$confirm("该时间段已有返现活动，是否继续创建?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.startTime=parseInt(t.startTime/1e3),t.endTime=parseInt(t.endTime/1e3),this.submit(t)}).catch(()=>{this.$message({type:"info",message:"已取消新增"})})):(this.subm=!0,t.startTime=1e3*t.startTime,t.endTime=1e3*t.endTime)}},e=>{console.log(e),this.subm=!0,t.startTime=1e3*t.startTime,t.endTime=1e3*t.endTime})})},resetForm(e){this.$refs[e].resetFields()},submit(e){this.$refs["newAcitveData"].validate(t=>{if(!t)return console.log("error submit!!"),!1;this.$api.post("/hd/itzReturnCashActivity",e,t=>{200===t.status?(this.$message("添加成功"),this.back()):(this.$message.error({title:"错误",message:t.message}),e.startTime=1e3*e.startTime,e.endTime=1e3*e.endTime)})})},AmonutCach(e){console.log(this.Amountflag),this.subm=!1,this.Amountflag="1"!=e,this.checks()},formatendtime(e){e&&e<this.newAcitveData.startTime&&this.$alert("结束时间不能早于开始时间","提示",{confirmButtonText:"确定",callback:()=>{this.newAcitveData.endTime=""}})},back(){this.$router.go(-1)},checks(){console.log("check",this.Amountflag);var e="";this.subm=!1,this.iswarn=!0,this.iswarn0=!0,this.Amountflag?(document.getElementById("warn_red").innerHTML="",e=this.newAcitveData.cashAmount0,console.log("val",e),""==e?document.getElementById("warn_red").innerHTML="订单金额百分比不能为空":e<.01||e>100?document.getElementById("warn_red").innerHTML="订单金额百分比取值区间为0.01-100":(document.getElementById("warn_red").innerHTML="",this.subm=!0,this.iswarn0=!1)):(document.getElementById("warn_red").innerHTML="",e=this.newAcitveData.cashAmount,console.log("val",e),""==e?document.getElementById("warn_red").innerHTML="红包金额不能为空":e<1||e>99999999?document.getElementById("warn_red").innerHTML="红包金额取值区间为1-99999999":(document.getElementById("warn_red").innerHTML="",this.subm=!0,this.iswarn=!1))}}},n=r,l=(a("4729"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"2f7cfb34",null);t["default"]=o.exports},"512c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pay-cert-container"},[s("img",{attrs:{src:e.url,alt:""}}),s("img",{staticClass:"close",attrs:{src:a("0c23"),alt:""},on:{click:function(t){return e.$router.go(-1)}}})])},i=[],r={name:"",data(){return{url:this.$route.query.url||""}}},n=r,l=(a("9469"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"4ebf0400",null);t["default"]=o.exports},"5b48":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v(e._s(e.name)+"平台")]),a("el-breadcrumb-item",[e._v("首页")])],1)],1),a("div",{staticClass:"content"},[a("ul",[a("li",[a("span",[e._v("浣豆余额："+e._s(e.balance)+" 个")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$router.push({name:"AccountDetails"})}}},[e._v("账户明细")])],1),a("li",[a("span",[e._v("已代付总额："+e._s(e.pay)+" 浣豆")])]),a("li",[a("span",[e._v("出借人："+e._s(e.lender)+" 人")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$router.push({name:"LenderList"})}}},[e._v("查看")])],1)]),a("div",{staticClass:"note"},[e._v("充值请联系"+e._s(e.storeName)+"商城工作人员")])])])},i=[],r=(a("a481"),{name:"HomePage",data(){return{name:"",balance:0,pay:0,lender:0,params:{page:1,limit:10}}},methods:{getList(){let e=JSON.stringify(this.params).replace(/:/g,"=").replace("{","").replace("}","").replace(/,/g,"&").replace(/"/g,"").replace(/\s+/g,"");this.$api.get("hd/itzPartner/page/list?"+e,null,e=>{200==e.status&&(this.name=e.data.rows[0].partnerName,this.balance=e.data.rows[0].token,this.pay=e.data.rows[0].useToken,this.lender=e.data.rows[0].lendNum,localStorage.setItem("partnerName",this.name))})}},created(){this.getList()}}),n=r,l=(a("ccc5"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"380bde17",null);t["default"]=o.exports},"5c4c":function(e,t,a){},"5d2d":function(e,t,a){},"5d7b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"活动统计"}}),a("section",{staticClass:"search-wrapper"},[a("el-row",[a("div",{staticClass:"grid-content bg-purple"},[e._v("\n        活动名称：\n        "),a("span",[e._v(e._s(e.namelist.cashName))])])]),a("el-row",[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("\n          活动总额：\n          "),a("span",[e._v(" "+e._s(e.Amounts(e.namelist.totalAmount)))])])]),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.showM,expression:"showM"}],attrs:{span:7}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("\n          活动所剩余额：\n          "),a("span",[e._v("￥ "+e._s(e.utils.formatMoney(e.namelist.surplusAmount)))])])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("\n          总订单数：\n          "),a("span",[e._v(e._s(e.namelist.orderTotal))])])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("\n          已返现单数：\n          "),a("span",[e._v(e._s(e.namelist.cashTotal))])])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("\n          已返现金额：\n          "),a("span",[e._v("￥ "+e._s(e.utils.formatMoney(e.namelist.cashAmount)))])])])],1)],1),a("div",{staticClass:"search-wrapper"},[a("el-form",{attrs:{size:"small","label-position":"left","label-width":"100px"},model:{value:e.params,callback:function(t){e.params=t},expression:"params"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"订单号"}},[a("el-input",{attrs:{placeholder:"精准查询",clearable:""},model:{value:e.params.orderSn,callback:function(t){e.$set(e.params,"orderSn",t)},expression:"params.orderSn"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"下单时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:e.timeinterval,callback:function(t){e.timeinterval=t},expression:"timeinterval"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"精准查询",clearable:""},model:{value:e.params.mobile,callback:function(t){e.$set(e.params,"mobile",t)},expression:"params.mobile"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"返现状态"}},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.params.cashFlag,callback:function(t){e.$set(e.params,"cashFlag",t)},expression:"params.cashFlag"}},e._l(e.statusList,function(e){return a("el-option",{key:e.id,staticStyle:{width:"100%"},attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.clear}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"orderSn",label:"订单号"}}),a("el-table-column",{attrs:{prop:"consignee",label:"用户名"}}),a("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),a("el-table-column",{attrs:{prop:"addTime",label:"下单时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"payTime",label:"支付时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"returnCash",label:"现金红包金额",formatter:e.crashFormat}}),a("el-table-column",{attrs:{prop:"cashFlagStr",label:"返现状态"}})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.params.limit,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)},i=[],r=a("c6a9"),n={name:"activityStatistics",data(){return{currentPage:0,timeinterval:"",total:0,showM:!1,params:{id:this.$route.params.id?this.$route.params.id:"",page:1,limit:10,orderSn:"",mobile:"",cashFlag:"",startOrderTime:"",endOrderTime:""},list:[],namelist:[],statusList:r["a"]}},created(){this.getList()},mounted(){},methods:{getList(){this.timeinterval&&0!=this.timeinterval.length?(this.params.startOrderTime=this.timeinterval[0]/1e3,this.params.endOrderTime=this.timeinterval[1]/1e3):(this.params.startOrderTime="",this.params.endOrderTime=""),this.$api.post("/hd/itzReturnCashActivity/get/records",this.params,e=>{200===e.status?(this.list=e.data.itzCashActivityRecordsVoList,this.namelist=e.data,this.total=e.data.total):this.$message.error({title:"错误",message:e.message})})},clear(){this.timeinterval="",this.params={id:this.$route.params.id?this.$route.params.id:"",page:1,limit:10,orderSn:"",mobile:"",cashFlag:"-1",startOrderTime:"",endOrderTime:""},this.currentPage=1,this.total=0},search(){this.params.page=1,this.getList()},handleCurrentChange(e){this.params.page=e,this.getList()},dateFormat:function(e,t){let a=e[t.property];return a?this.utils.formatDate("YYYY-MM-DD HH:mm",1e3*a):"未支付"},crashFormat:function(e,t){let a=e[t.property];return a?"￥ "+a:a},Amounts(e){return"-1"==e?(this.showM=!1,"不限"):(this.showM=!0,"￥"+this.utils.formatMoney(e))}},watch:{}},l=n,o=(a("7556"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,"a69ef31a",null);t["default"]=c.exports},"5db3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-balance-container"},[a("page-title",{attrs:{"first-title":"账户信息","second-title":"账户余额明细"}}),a("div",{staticClass:"list-wrapper"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.changeTab},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("el-tab-pane",{attrs:{label:"现金",name:"1"}},[a("el-table",{attrs:{data:e.balanceData,border:"",stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{label:"发生时间",prop:"addtime",formatter:e.fmtTime}}),a("el-table-column",{attrs:{label:"类型",prop:"type_name"}}),a("el-table-column",{attrs:{label:"备注",prop:"remark"}}),a("el-table-column",{attrs:{label:"金额",prop:"format_cash",formatter:e.fmtMoney}}),a("el-table-column",{attrs:{label:"余额",prop:"current_cash_money"}})],1)],1),1==e.cooperateType?a("el-tab-pane",{attrs:{label:"积分",name:"0"}},[a("el-table",{attrs:{data:e.balanceData,border:"",stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{label:"发生时间",prop:"addtime",formatter:e.fmtTime}}),a("el-table-column",{attrs:{label:"类型",prop:"type_name"}}),a("el-table-column",{attrs:{label:"备注",prop:"remark"}}),a("el-table-column",{attrs:{label:"金额",prop:"format_huanbi",formatter:e.fmtMoney}}),a("el-table-column",{attrs:{label:"余额",prop:"current_huanbi_money"}})],1)],1):e._e()],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.params.page,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)},i=[],r=a("be94"),n=a("2f62"),l=a("9d62"),o={name:"",data(){return{currentTab:"1",balanceData:[],params:{suppliers_id:"",page:1,size:10,cash_is:1},total:0}},computed:Object(r["a"])({},Object(n["c"])({suppliers_id:e=>e.suppliers.suppliers_id,cooperateType:e=>e.suppliers.cooperateType}),{fmtParams(){return this.params.cash_is=Number(this.currentTab),this.params.suppliers_id=this.suppliers_id,this.params}}),created(){this.getData()},methods:{getData(){Object(l["i"])(this.fmtParams).then(e=>{this.balanceData=e.list,this.total=e.paged.total})},changeTab(){this.balanceData=[],this.params.page=1,this.getData()},handleCurrentChange(){this.getData()},fmtTime(e,t,a){return this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a)},fmtMoney(e,t,a){let s=1==e["direction"]?"+":"-";return a>0?s+a:0}}},c=o,u=(a("adba"),a("2877")),p=Object(u["a"])(c,s,i,!1,null,"41459884",null);t["default"]=p.exports},"5de7":function(e,t,a){},"60eb":function(e,t,a){"use strict";var s=a("d38a"),i=a.n(s);i.a},"62f4":function(e,t,a){},"633a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("section",[a("div",{staticClass:"btn-wrapper"},[a("el-button",{on:{click:e.goBack}},[e._v("返回")])],1),a("div",{staticClass:"table-head"},[a("h1",[e._v("状态："+e._s(e.status))])]),a("div",{staticClass:"table-wrapper"},[[e.settleInfo.status===e.STATUS.UNCONFIRM?a("el-button",{staticClass:"right",on:{click:e.confirm}},[e._v("确认")]):a("el-button",{staticClass:"right",attrs:{type:"info",disabled:""}},[e._v("已确认")])],a("h2",{staticClass:"t-center"},[e._v("结算单")]),e.settleInfo.status===e.STATUS.UNCONFIRM?a("p",{staticClass:"t-center"},[e._v("\n        结算时间："+e._s(e._f("convertTime")(1e3*e.settleInfo.settlement_start))+"——"+e._s(e._f("convertTime")(1e3*e.settleInfo.settlement_end))+"\n      ")]):e._e(),a("div",{staticClass:"t-head"},[a("p",{staticClass:"line-item"},[a("label",[e._v("创建时间：")]),e._v(e._s(e._f("convertTime")(1e3*e.settleInfo.addtime)))]),a("p",{staticClass:"line-item"},[a("label",[e._v("收款单位：")]),e._v(e._s(e.settleInfo.pay_company))]),a("p",{staticClass:"line-item"},[a("label",[e._v("收款人：")]),e._v(e._s(e.settleInfo.payee))]),a("p",{staticClass:"line-item"},[e.settleInfo.remit_type===e.PAYTYPE.ALIPAY?a("label",[e._v("支付宝账号：")]):e._e(),a("label",{attrs:{"V-else":""}},[e._v("银行账户：")]),e._v("\n          "+e._s(e.settleInfo.remit_account)+"\n        ")])]),a("div",{staticClass:"t-body clearfix"},[e.settleInfo.commission_type===e.COMMISSIONTYPE.SLAES?[a("div",{staticClass:"t-body-left"},[a("h2",[e._v("现金")]),a("p",[a("span",[e._v("待确认金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.all_cash_income-e.settleInfo.all_cash_expend)))])]),a("p",[a("span",[e._v("销售额佣金（全款）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.sales_service_fee)))])]),a("p",[a("span",[e._v("抽取保证金")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.bond)))])]),a("p",[a("span",[e._v("实际结算金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.cash_real_pay)))])]),a("p",[a("span",[e._v("金额（大写）")]),a("label",[e._v(e._s(this.utils.getCapMoney(e.settleInfo.cash_real_pay)))])])]),1==e.cooperateType?a("div",{staticClass:"t-body-right"},[a("h2",[e._v("积分")]),a("p",[a("span",[e._v("待确认金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.all_huanbi_income-e.settleInfo.all_huanbi_expend)))])]),a("p",[a("span",[e._v("实际结算金额 （小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.huanbi_real_pay)))])]),a("p",[a("span",[e._v("金额（大写）")]),a("label",[e._v(e._s(this.utils.getCapMoney(e.settleInfo.huanbi_real_pay)))])])]):e._e()]:[a("div",{staticClass:"t-body-left"},[a("h2",[e._v("现金")]),a("p",[a("span",[e._v("待确认金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.all_cash_income-e.settleInfo.all_cash_expend)))])]),a("p",[a("span",[e._v("扣除佣金（现金）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.cash_service_fee)))])]),a("p",[a("span",[e._v("扣除交易费用（现金）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.cash_income_fee)))])]),a("p",[a("span",[e._v("抽取保证金（现金）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.bond)))])]),a("p",[a("span",[e._v("扣除打款费用（现金）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.cash_remit_fee)))])]),a("p",[a("span",[e._v("实际结算金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.cash_real_pay)))])]),a("p",[a("span",[e._v("金额（大写）")]),a("label",[e._v(e._s(this.utils.getCapMoney(e.settleInfo.cash_real_pay)))])])]),1==e.cooperateType?a("div",{staticClass:"t-body-right"},[a("h2",[e._v("积分")]),a("p",[a("span",[e._v("待确认金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.all_huanbi_income-e.settleInfo.all_huanbi_expend)))])]),a("p",[a("span",[e._v("扣除积分佣金（个）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.huanbi_service_fee)))])]),a("p",[a("span",[e._v("扣除积分交易费用（人）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.huanbi_income_fee)))])]),a("p",[a("span",[e._v("扣除积分打款费用（人）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.huanbi_remit_fee)))])]),a("p",[a("span",[e._v("实际结算金额 （小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.huanbi_real_pay)))])]),a("p",[a("span",[e._v("金额（大写）")]),a("label",[e._v(e._s(this.utils.getCapMoney(e.settleInfo.huanbi_real_pay)))])])]):e._e()]],2),e.settleInfo.status?a("h3",{staticStyle:{"padding-left":"20px"}},[e._v("\n        结算时间："+e._s(e._f("convertTime")(1e3*e.settleInfo.settlement_start))+"——"+e._s(e._f("convertTime")(1e3*e.settleInfo.settlement_end))+"\n      ")]):e._e(),a("div",{staticClass:"t-bottom clearfix"},[a("div",{staticClass:"t-bottom-left"},[e._v("待结算编号")]),a("p",{staticClass:"t-bottom-right"},e._l(e.settleInfo.statement_no,function(t,s){return a("span",{key:s},[e._v(e._s(t))])}),0)])],2)])])},i=[],r=a("be94"),n=a("2f62"),l=a("fef7"),o=a("9d62"),c={name:"SettlementInfo",data(){return{STATUS:l["i"],PAYTYPE:l["f"],COMMISSIONTYPE:l["b"],multi_statement_id:this.$route.params.id?this.$route.params.id:"",settleInfo:{}}},created(){this.getStatementInfo()},computed:Object(r["a"])({},Object(n["c"])({cooperateType:e=>e.suppliers.cooperateType}),{status(){return l["j"][this.settleInfo.status]}}),methods:Object(r["a"])({},Object(n["b"])({saveCooperateType:"saveCooperateType"}),{getStatementInfo(){Object(o["r"])(this.multi_statement_id).then(e=>{this.settleInfo=e,this.saveCooperateType(e.cooperate_type)},e=>{console.log(e)})},confirm(){let e={};e["multi_statement_id"]=this.settleInfo.multi_statement_id,e["bond"]=this.settleInfo.bond,e["use_cash_service_fee"]=Number(this.settleInfo.cash_service_fee)?1:0,e["use_cash_income_fee"]=Number(this.settleInfo.cash_income_fee)?1:0,e["use_cash_remit_fee"]=Number(this.settleInfo.cash_remit_fee)?1:0,e["use_huanbi_service_fee"]=Number(this.settleInfo.huanbi_service_fee)?1:0,e["use_huanbi_income_fee"]=Number(this.settleInfo.huanbi_income_fee)?1:0,e["use_huanbi_remit_fee"]=Number(this.settleInfo.huanbi_remit_fee)?1:0,e["create_log"]=this.settleInfo.create_log,Object(o["c"])(e).then(e=>{this.$alert(e.info,"",{callback:()=>{this.$root.reload()}})},e=>{this.$alert(e.errorMsg)})},goBack(){this.$router.go(-1)}})},u=c,p=(a("60eb"),a("2877")),m=Object(p["a"])(u,s,i,!1,null,"2985860e",null);t["default"]=m.exports},"65d2":function(e,t,a){},"67e2":function(e,t,a){},"6f48":function(e,t,a){},"70cb":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"商家列表","second-title":"商家资产"}}),a("section",[e.isEdit?[a("div",{staticClass:"settle-setting-wrapper"},[a("el-form",{ref:"infoForm",attrs:{model:e.info_edit,rules:e.rules,"validate-on-rule-change":e.ruleFix,"label-width":"150px"}},[a("div",{staticClass:"info-item"},[a("p",{staticClass:"title"},[e._v("结算信息设置")]),a("el-form-item",{attrs:{label:"收款单位",prop:"pay_company"}},[a("el-input",{attrs:{size:"small"},model:{value:e.info_edit.pay_company,callback:function(t){e.$set(e.info_edit,"pay_company",t)},expression:"info_edit.pay_company"}})],1),a("el-form-item",{attrs:{label:"收款人",prop:"payee"}},[a("el-input",{attrs:{size:"small"},model:{value:e.info_edit.payee,callback:function(t){e.$set(e.info_edit,"payee",t)},expression:"info_edit.payee"}})],1)],1),e.info.cooperate_type==e.COOPERATE_TYPE.COR_RESIDENT?a("div",{staticClass:"info-item"},[a("el-form-item",{attrs:{label:"积分是否结算",prop:"remit_type"}},[a("el-switch",{attrs:{"active-value":e.HUANBI_SETTLEMENT.SETTLEMENT,"inactive-value":e.HUANBI_SETTLEMENT.UNSETTLEMENT},model:{value:e.info_edit.is_huanbi_settlement,callback:function(t){e.$set(e.info_edit,"is_huanbi_settlement",t)},expression:"info_edit.is_huanbi_settlement"}})],1)],1):e._e(),a("div",{staticClass:"info-item"},[a("p",{staticClass:"title"},[e._v("汇款方式设置")]),a("div",{staticClass:"pay-wrapper"},[a("el-form-item",{attrs:{label:"支付宝收款",prop:"remit_type"}},[a("el-switch",{attrs:{"active-value":e.PAYTYPE.ALIPAY,"inactive-value":e.PAYTYPE.BANK},model:{value:e.info_edit.remit_type,callback:function(t){e.$set(e.info_edit,"remit_type",t)},expression:"info_edit.remit_type"}})],1),e.info_edit.remit_type==e.PAYTYPE.ALIPAY?[a("el-form-item",{attrs:{label:"支付宝账号",prop:"remit_account"}},[a("el-input",{attrs:{size:"small"},model:{value:e.info_edit.remit_account,callback:function(t){e.$set(e.info_edit,"remit_account",t)},expression:"info_edit.remit_account"}})],1)]:e._e()],2),a("div",{staticClass:"pay-wrapper"},[a("el-form-item",{attrs:{label:"银行收款",prop:"remit_type"}},[a("el-switch",{attrs:{"active-value":e.PAYTYPE.BANK,"inactive-value":e.PAYTYPE.ALIPAY},model:{value:e.info_edit.remit_type,callback:function(t){e.$set(e.info_edit,"remit_type",t)},expression:"info_edit.remit_type"}})],1),e.info_edit.remit_type==e.PAYTYPE.BANK?[a("el-form-item",{attrs:{label:"开户银行",prop:"open_bank"}},[a("el-input",{attrs:{size:"small"},model:{value:e.info_edit.open_bank,callback:function(t){e.$set(e.info_edit,"open_bank",t)},expression:"info_edit.open_bank"}})],1),a("el-form-item",{attrs:{label:"选择银行",prop:"bank"}},[a("el-select",{attrs:{filterable:""},model:{value:e.info_edit.bank,callback:function(t){e.$set(e.info_edit,"bank",t)},expression:"info_edit.bank"}},e._l(e.bank_list,function(e){return a("el-option",{key:e.short,attrs:{label:e.name,value:e.short}})}),1),a("span",{staticStyle:{color:"#8888","padding-left":"20px"}},[e._v("支持输入搜索")])],1),a("el-form-item",{attrs:{label:"银行账号",prop:"remit_account"}},[a("el-input",{attrs:{size:"small"},model:{value:e.info_edit.remit_account,callback:function(t){e.$set(e.info_edit,"remit_account",t)},expression:"info_edit.remit_account"}})],1)]:e._e()],2)]),a("div",{staticClass:"info-item"},[a("p",{staticClass:"title"},[e._v("结算设置")]),a("el-form-item",{attrs:{prop:"commission_type"}},[a("el-radio",{attrs:{label:e.COMMISSIONTYPE.SLAES},model:{value:e.info_edit.commission_type,callback:function(t){e.$set(e.info_edit,"commission_type",t)},expression:"info_edit.commission_type"}},[e._v("销售额佣金")]),a("el-radio",{attrs:{label:e.COMMISSIONTYPE.CASHHUAN},model:{value:e.info_edit.commission_type,callback:function(t){e.$set(e.info_edit,"commission_type",t)},expression:"info_edit.commission_type"}},[e._v("现金积分佣金")])],1),e.info_edit.commission_type===e.COMMISSIONTYPE.SLAES?[a("el-form-item",{attrs:{label:"销售额佣金（全款）",prop:"cash_service_percent"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:e.info_edit.sales_service_percent,callback:function(t){e.$set(e.info_edit,"sales_service_percent",t)},expression:"info_edit.sales_service_percent"}}),e._v("%\n              ")],1)]:[a("el-form-item",{attrs:{label:"现金佣金",prop:"cash_service_percent"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:e.info_edit.cash_service_percent,callback:function(t){e.$set(e.info_edit,"cash_service_percent",t)},expression:"info_edit.cash_service_percent"}}),e._v("%\n              ")],1),a("el-form-item",{attrs:{label:"积分佣金",prop:"huanbi_service_percent"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:e.info_edit.huanbi_service_percent,callback:function(t){e.$set(e.info_edit,"huanbi_service_percent",t)},expression:"info_edit.huanbi_service_percent"}}),e._v("%\n              ")],1),a("el-form-item",{attrs:{label:"收入手续费",prop:"cash_income_percent"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:e.info_edit.cash_income_percent,callback:function(t){e.$set(e.info_edit,"cash_income_percent",t)},expression:"info_edit.cash_income_percent"}}),e._v("%\n              ")],1),a("el-form-item",{attrs:{label:"积分交易手续费",prop:"huanbi_income_percent"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:e.info_edit.huanbi_income_percent,callback:function(t){e.$set(e.info_edit,"huanbi_income_percent",t)},expression:"info_edit.huanbi_income_percent"}}),e._v("%\n              ")],1),a("el-form-item",{attrs:{label:"打款手续费",prop:"cash_remit_percent"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:e.info_edit.cash_remit_percent,callback:function(t){e.$set(e.info_edit,"cash_remit_percent",t)},expression:"info_edit.cash_remit_percent"}}),e._v("%\n              ")],1),a("el-form-item",{attrs:{label:"打款手续费",prop:"huanbi_remit_percent"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:e.info_edit.huanbi_remit_percent,callback:function(t){e.$set(e.info_edit,"huanbi_remit_percent",t)},expression:"info_edit.huanbi_remit_percent"}}),e._v("%\n              ")],1)]],2),a("div",{staticClass:"info-item"},[a("p",{staticClass:"title"},[e._v("生成对账单设置")]),a("div",{staticClass:"account-statement"},[a("p",[a("el-radio",{attrs:{label:2},model:{value:e.info_edit.create_multi_method,callback:function(t){e.$set(e.info_edit,"create_multi_method",t)},expression:"info_edit.create_multi_method"}},[e._v("自动")]),a("span",{staticClass:"tip"},[e._v("到达结算时间（每周四0点）系统自动生成对账单")])],1),a("p",[a("el-radio",{attrs:{label:1},model:{value:e.info_edit.create_multi_method,callback:function(t){e.$set(e.info_edit,"create_multi_method",t)},expression:"info_edit.create_multi_method"}},[e._v("手动")]),a("span",{staticClass:"tip"},[e._v("选择日对账单，生成本期对账单")])],1)]),2==e.info_edit.create_multi_method?a("div",{staticClass:"bond-limit"},[a("p",{staticClass:"title"},[e._v("保证金额度")]),a("span",{staticClass:"required-tip"},[e._v("*")]),a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.info_edit.bond_amount,callback:function(t){e.$set(e.info_edit,"bond_amount",t)},expression:"info_edit.bond_amount"}}),e._v("  元\n            ")],1):e._e()]),a("div",{staticClass:"btn-box",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)])],1)]:[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.editInfo}},[e._v("编辑")]),a("div",{staticClass:"info-item"},[a("p",{staticClass:"title"},[e._v("结算信息设置")]),a("p",{staticClass:"item-line"},[a("span",[e._v("收款单位")]),a("label",[e._v(e._s(e.info.pay_company))])]),a("p",{staticClass:"item-line"},[a("span",[e._v("收款人")]),a("label",[e._v(e._s(e.info.payee))])])]),e.info.cooperate_type==e.COOPERATE_TYPE.COR_RESIDENT?a("div",{staticClass:"info-item"},[a("p",{staticClass:"title"},[e._v("积分是否结算")]),a("p",{staticClass:"item-line"},[a("label",[e._v(e._s(e.HUANBI_SETTLEMENT_TXT[e.info.is_huanbi_settlement]))])])]):e._e(),a("div",{staticClass:"info-item"},[a("p",{staticClass:"title"},[e._v("汇款方式设置")]),e.info.remit_type==e.PAYTYPE.BANK?[a("p",{staticClass:"item-line"},[a("span",[e._v("开户银行")]),a("label",[e._v(e._s(e.info.open_bank))])]),a("p",{staticClass:"item-line"},[a("span",[e._v("收款银行")]),a("label",[e._v(e._s(e.bankName))])]),a("p",{staticClass:"item-line"},[a("span",[e._v("银行账号")]),a("label",[e._v(e._s(e.info.remit_account))])])]:[a("p",{staticClass:"item-line"},[a("span",[e._v("支付宝账号")]),a("label",[e._v(e._s(e.info.remit_account))])])]],2),a("div",{staticClass:"info-item"},[a("p",{staticClass:"title"},[e._v("结算设置")]),e.info.commission_type===e.COMMISSIONTYPE.SLAES?[a("p",{staticClass:"item-line"},[a("span",[e._v("销售额佣金（全款）")]),a("label",[e._v(e._s(e.info.sales_service_percent)+"%")])])]:[a("p",{staticClass:"item-line"},[a("span",[e._v("现金佣金")]),a("label",[e._v(e._s(e.info.cash_service_percent)+"%")]),a("span",[e._v("积分佣金")]),a("label",[e._v(e._s(e.info.huanbi_service_percent)+"%")])]),a("p",{staticClass:"item-line"},[a("span",[e._v("收入手续费")]),a("label",[e._v(e._s(e.info.cash_income_percent)+"%")]),a("span",[e._v("积分交易手续费")]),a("label",[e._v(e._s(e.info.huanbi_income_percent)+"%")])]),a("p",{staticClass:"item-line"},[a("span",[e._v("打款手续费")]),a("label",[e._v(e._s(e.info.cash_remit_percent)+"%")]),a("span",[e._v("打款手续费")]),a("label",[e._v(e._s(e.info.huanbi_remit_percent)+"%")])])]],2),a("div",{staticClass:"info-item"},[a("p",{staticClass:"title"},[e._v("生成对账单设置")]),a("p",{staticClass:"item-line"},[a("span",[e._v("生成方式")]),a("label",[e._v(e._s(1==e.info.create_multi_method?"手动":"自动"))])])]),2==e.info.create_multi_method?a("div",{staticClass:"info-item"},[a("p",{staticClass:"title"},[e._v("保证金额度")]),a("p",{staticClass:"item-line"},[a("span",[e._v("保证金")]),a("label",[e._v(e._s(e.info.bond_amount)+"元")])])]):e._e()]],2)],1)},i=[],r=(a("097d"),a("be94")),n=a("2f62"),l=a("9d62"),o=a("fef7"),c={name:"SettleSetting",data(){return{isEdit:!1,ruleFix:!0,PAYTYPE:o["f"],COMMISSIONTYPE:o["b"],COOPERATE_TYPE:o["c"],HUANBI_SETTLEMENT_TXT:o["e"],HUANBI_SETTLEMENT:o["d"],info:{},info_edit:{},bank_list:[],rules:{pay_company:[{required:!0,message:"请输入收款单位",trigger:"blur"}],payee:[{required:!0,message:"请输入收款人",trigger:"blur"}],remit_account:[{required:!0,message:"请输入汇款账号",trigger:"blur"}],open_bank:[{required:!0,message:"请输入开户银行",trigger:"blur"}],bank:[{required:!0,message:"请选择银行",trigger:"blur"}],cash_service_percent:[{required:!0,message:"请输入现金结算佣金占比",trigger:"blur"}],huanbi_service_percent:[{required:!0,message:"请输入积分结算佣金",trigger:"blur"}],cash_income_percent:[{required:!0,message:"请输入现金收入手续费",trigger:"blur"}],huanbi_income_percent:[{required:!0,message:"请输入积分收入手续费",trigger:"blur"}],cash_remit_percent:[{required:!0,message:"请输入现金打款手续费",trigger:"blur"}],huanbi_remit_percent:[{required:!0,message:"请输入积分汇款手续费",trigger:"blur"}]}}},created(){this.getInfo()},computed:Object(r["a"])({},Object(n["c"])({suppliers_id:e=>e.suppliers.suppliers_id}),{bankName(){let e="";if(this.info.bank&&this.bank_list.length){let t=this.bank_list.filter(e=>{return e.short===this.info.bank});e=t[0].name}return e}}),methods:Object(r["a"])({},Object(n["b"])({saveBankList:"saveBankList"}),{getInfo(){Object(l["n"])(this.suppliers_id).then(e=>{this.info=e,this.bank_list=e.bank_list,this.saveBankList(e.bank_list)},e=>{console.log(e)})},editInfo(){this.info_edit=Object(r["a"])({},this.info),this.isEdit=!0},cancel(){this.isEdit=!1,this.info_edit={}},save(){this.$refs["infoForm"].validate(e=>{if(!e)return!1;this.submit()})},submit(){let e={};if(e["suppliers_id"]=this.suppliers_id,e["pay_company"]=this.info_edit.pay_company,e["payee"]=this.info_edit.payee,e["remit_account"]=this.info_edit.remit_account,e["bank"]=this.info_edit.bank,e["open_bank"]=this.info_edit.open_bank,e["remit_type"]=this.info_edit.remit_type,e["commission_type"]=this.info_edit.commission_type,e["is_huanbi_settlement"]=this.info_edit.is_huanbi_settlement,this.info_edit.commission_type===o["b"].SLAES?(e["cash_service_percent"]=e["huanbi_service_percent"]=e["cash_income_percent"]=e["huanbi_income_percent"]=e["cash_remit_percent"]=e["huanbi_remit_percent"]=0,e["sales_service_percent"]=this.info_edit.sales_service_percent):(e["cash_service_percent"]=this.info_edit.cash_service_percent,e["huanbi_service_percent"]=this.info_edit.huanbi_service_percent,e["cash_income_percent"]=this.info_edit.cash_income_percent,e["huanbi_income_percent"]=this.info_edit.huanbi_income_percent,e["cash_remit_percent"]=this.info_edit.cash_remit_percent,e["huanbi_remit_percent"]=this.info_edit.huanbi_remit_percent,e["sales_service_percent"]=0),e["create_multi_method"]=this.info_edit.create_multi_method,e["bond_amount"]=this.info_edit.bond_amount,2==this.info_edit.create_multi_method&&!this.info_edit.bond_amount)return void this.$message.error("请输入保证金额度");const t=this.$loading({lock:!0,text:"保存中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(l["v"])(e).then(e=>{console.log(e),this.isEdit=!1},e=>{console.log(e)}).finally(()=>{this.getInfo(),t.close()})}})},u=c,p=(a("3ce5"),a("2877")),m=Object(p["a"])(u,s,i,!1,null,"1d1760b3",null);t["default"]=m.exports},"730e":function(e,t,a){},7556:function(e,t,a){"use strict";var s=a("446c"),i=a.n(s);i.a},"75d4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("section",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("可转账积分来自积分提现账户，这部分积分来自于结算的积分余额。转账积分完成后，无法回到积分提现账户")])],1)],1),a("section",{staticClass:"shop-info"},[a("span",{staticClass:"clearfix",staticStyle:{float:"right",color:"#409eff",cursor:"pointer","margin-top":"10px"},on:{click:e.goRecord}},[e._v("查看转账记录>")]),a("p",[a("span",[e._v("店铺名称：")]),a("label",[e._v(e._s(e.info.shop_name))])]),a("p",[a("span",[e._v("积分账户：")]),a("label",[e._v(e._s(e.info.remit_account))]),a("span",{staticStyle:{"font-size":"12px",color:"#9c9c9c","margin-left":"10px"}},[e._v("积分余额中结算的积分")])]),a("p",[a("span",[e._v("可转账积分（个）：")]),a("label",[e._v(e._s(e.huanbi_remit))]),a("span",[e._v("可转账积分（个）：")]),a("label",[e._v(e._s(e.huanbi_money))])]),a("p",[a("span",[e._v("本次转账")]),a("span",[a("el-input",{attrs:{size:"small",maxlength:"10"},model:{value:e.withSurplus,callback:function(t){e.withSurplus=t},expression:"withSurplus"}})],1),a("label",{staticStyle:{color:"#409EFF","font-weight":"normal",cursor:"pointer"},on:{click:e.getAll}},[e._v("全额转账")])]),a("p",[a("span",[e._v("到账换换注册手机号 ：")]),a("label",[e._v(e._s(e.info.bind_user_phone))])]),a("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary",loading:e.isLoading},on:{click:e.submit}},[e._v("提交")]),e._m(0)],1)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"warn-wrapper"},[a("p",[e._v("注：积分提现账户中的积分用途")]),a("p",[e._v("1）发放优惠券")]),a("p",[e._v("2）转让购买以物抵债商品")])])}],r=(a("097d"),a("be94")),n=a("2f62"),l=a("afbd"),o={name:"SettlementInfo",data(){return{info:{},huanbi_remit:0,huanbi_money:0,withSurplus:"",isLoading:!1}},created(){this.getWithdrawalInfo()},computed:Object(r["a"])({},Object(n["c"])({suppliers_id:e=>e.suppliers.suppliers_id})),methods:{getWithdrawalInfo(){Object(l["g"])(this.suppliers_id).then(e=>{this.info=e},e=>{console.log(e)}),Object(l["e"])(this.suppliers_id).then(e=>{this.huanbi_money=this.utils.formatFloat(e.huanbi_money,!0)},e=>{console.log(e)})},getAll(){this.withSurplus=this.huanbi_money},goRecord(){this.$router.push({name:"WithdrawalRecord"})},submit(){let e=Number(this.withSurplus);!e||e<0?this.$alert("请输入正确的提现金额"):(this.isLoading=!0,Object(l["p"])(this.suppliers_id,this.withSurplus).then(e=>{this.$alert(e.info,"",{callback:()=>{this.$router.push({name:"WithdrawalRecord"})}})},e=>{this.$alert(e.errorMsg)}).finally(()=>{this.isLoading=!1}))}}},c=o,u=(a("a15b"),a("2877")),p=Object(u["a"])(c,s,i,!1,null,"4185da36",null);t["default"]=p.exports},7719:function(e,t,a){},7741:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"结算单列表"}}),a("section",{staticClass:"search-wrapper"},[a("el-form",{attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"结算单状态"}},[a("el-select",{staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:""},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},e._l(e.SETTLE_SETTLEMENT_STATUS,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})}),1)],1),"supplier"!==e.role?a("el-form-item",{attrs:{label:"商家名称"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入商家名称"},model:{value:e.params.suppliers_name,callback:function(t){e.$set(e.params,"suppliers_name",t)},expression:"params.suppliers_name"}})],1):e._e()],1),a("el-form",[a("el-form-item",{attrs:{label:"结算单生成时间"}},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{placeholder:"开始时间",type:"date","value-format":"timestamp"},model:{value:e.params.addtime_min,callback:function(t){e.$set(e.params,"addtime_min",t)},expression:"params.addtime_min"}}),e._v("\n        -\n        "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{placeholder:"结束时间",type:"date","value-format":"timestamp"},model:{value:e.params.addtime_max,callback:function(t){e.$set(e.params,"addtime_max",t)},expression:"params.addtime_max"}}),a("div",{staticClass:"radio-wrapper"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.selecttime},model:{value:e.timeselect,callback:function(t){e.timeselect=t},expression:"timeselect"}},e._l(e.timelist,function(t,s){return a("el-radio-button",{key:s,attrs:{label:t.value}},[e._v("\n              "+e._s(t.name)+"\n            ")])}),1)],1)],1),[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),a("el-button",{on:{click:e.clear}},[e._v("清空筛选条件")])]],2)],1),a("section",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.listDate,border:"",stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"multi_log_id",label:"结算ID"}}),"supplier"!==e.role?a("el-table-column",{key:Math.random(),attrs:{prop:"suppliers_name",label:"商家名称"}}):e._e(),a("el-table-column",{attrs:{prop:"addtime",label:"结算单生成时间",formatter:e.timeFormat}}),a("el-table-column",{attrs:{prop:"cash_pay",label:"现金应付金额"}}),a("el-table-column",{attrs:{prop:"cash_real_pay",label:"现金实付金额"}}),a("el-table-column",{attrs:{label:"结算时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.dateFormatCol(t.row.settlement_start))+" --- "),a("br"),e._v(e._s(e.dateFormatCol(t.row.settlement_end))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"结算单状态",formatter:e.statusFormat}}),a("el-table-column",{attrs:{prop:"endtime",label:"打款时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{label:"打款凭证"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.previewProof(t.row.format_pay_cert)}}},[e._v("查看")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),"supplier"!==e.role?a("el-table-column",{key:Math.random(),attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.showSupplierInfo(t.row)}}},[e._v("商家账号")]),1==t.row.status&&e.pay_cert_upload_allow?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.showMoney(t.row.multi_log_id)}}},[e._v("完成")]):e._e(),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.printPert(t.row.multi_log_id)}}},[e._v("打印")])]}}],null,!1,493160796)}):e._e()],1),a("el-pagination",{attrs:{background:"","current-page":e.params.page,"page-size":e.params.size,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1),a("div",{staticClass:"suppliers-account"},[e.suppliersInfo.multi_statement_id?a("el-dialog",{attrs:{title:"商家收款账号",visible:e.showAccountInfo,center:"",width:"50%"},on:{"update:visible":function(t){e.showAccountInfo=t}}},[1==e.suppliersInfo.remit_type?a("div",{staticClass:"account-info"},[a("p",[a("span",{staticClass:"title"},[e._v("收款人：")]),a("span",{staticClass:"detail"},[e._v(e._s(e.suppliersInfo.payee))])]),a("p",[a("span",{staticClass:"title"},[e._v("收款名称：")]),a("span",{staticClass:"detail"},[e._v(e._s(e.suppliersInfo.pay_company))])]),a("p",[a("span",{staticClass:"title"},[e._v("支付宝：")]),a("span",{staticClass:"detail"},[e._v(e._s(e.suppliersInfo.remit_account))])])]):a("div",{staticClass:"account-info"},[a("p",[a("span",{staticClass:"title"},[e._v("收款人：")]),a("span",{staticClass:"detail"},[e._v(e._s(e.suppliersInfo.payee))])]),a("p",[a("span",{staticClass:"title"},[e._v("收款名称：")]),a("span",{staticClass:"detail"},[e._v(e._s(e.suppliersInfo.pay_company))])]),a("p",[a("span",{staticClass:"title"},[e._v("银行名称：")]),a("span",{staticClass:"detail"},[e._v(e._s(e.suppliersInfo.bank))])]),a("p",[a("span",{staticClass:"title"},[e._v("开户行：")]),a("span",{staticClass:"detail"},[e._v(e._s(e.suppliersInfo.open_bank))])]),a("p",[a("span",{staticClass:"title"},[e._v("银行卡号：")]),a("span",{staticClass:"detail"},[e._v(e._s(e.suppliersInfo.remit_account))])])])]):e._e()],1),a("div",{staticClass:"finish-making-money"},[a("el-dialog",{attrs:{visible:e.showMakeMoney,center:"",width:"50%"},on:{"update:visible":function(t){e.showMakeMoney=t}}},[a("div",{staticClass:"make-money-info"},[a("el-form",[a("el-form-item",{attrs:{label:"现金实付金额"}},[a("el-input",{model:{value:e.submitParams.cash_real_pay,callback:function(t){e.$set(e.submitParams,"cash_real_pay",t)},expression:"submitParams.cash_real_pay"}})],1),a("el-form-item",{attrs:{label:"请上传打款凭证"}},[a("el-upload",{ref:"uploadImg",staticClass:"upload-demo",attrs:{action:"#","auto-upload":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"100字以内"},model:{value:e.submitParams.remark,callback:function(t){e.$set(e.submitParams,"remark",t)},expression:"submitParams.remark"}})],1)],1),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确定")]),a("el-button",{attrs:{type:"default",size:"small"},on:{click:function(t){e.showMakeMoney=!1}}},[e._v("取消")])],1)],1)])],1)],1)},i=[],r=(a("097d"),a("6b54"),a("be94")),n=a("9d62"),l=a("fef7"),o=a("2f62"),c=a("21a6"),u={name:"WaitSettle",data(){return{showAccountInfo:!1,showMakeMoney:!1,SETTLE_SETTLEMENT_STATUS:l["h"],timelist:l["k"],params:{addtime_min:"",addtime_max:"",suppliers_name:"",status:"",page:1,size:10},total:0,timeselect:"",listDate:[],suppliersInfo:{},isLoading:!1,submitParams:{multi_log_id:"",cash_real_pay:"",pay_cert:"",remark:""},pay_cert_upload_allow:!1}},computed:Object(r["a"])({},Object(o["c"])({role:e=>e.settle.role,cooperateType:e=>e.suppliers.cooperateType}),{fmtParams(){let e=JSON.parse(JSON.stringify(this.params));return e.addtime_min.toString().length>10&&(e.addtime_min=parseInt(e.addtime_min/1e3)),e.addtime_max.toString().length>10&&(e.addtime_max=parseInt(e.addtime_max/1e3)),e}}),created(){this.getSettleList(),this.getRole()},methods:Object(r["a"])({},Object(o["b"])({saveRole:"saveRole",saveCooperateType:"saveCooperateType"}),{getRole(){Object(n["o"])().then(e=>{this.saveRole(e.role),e.cooperate_type&&this.saveCooperateType(e.cooperate_type)},e=>{console.log(e)})},getSettleList(){this.isLoading=!0,Object(n["l"])(this.fmtParams).then(e=>{this.listDate=e.list,this.total=e.paged.total,this.pay_cert_upload_allow=e.pay_cert_upload_allow}).finally(()=>{this.isLoading=!1})},selecttime(e){let t,a=(new Date).getTime(),s=new Date((new Date).toLocaleDateString()).getTime(),i=new Date((new Date).toLocaleDateString()).getTime()-864e5,r=new Date((new Date).toLocaleDateString()).getTime()-6048e5,n=new Date((new Date).toLocaleDateString()).getTime()-2592e6,l=a;e?1===e?(t=i,l=s-1):7===e?t=r:30===e&&(t=n):t=s,this.params.addtime_min=t,this.params.addtime_max=l,this.getStateList()},search(){this.params.page=1,this.getSettleList()},clear(){this.timeselect="";for(let e in this.params)this.params[e]="";this.params.page=1,this.params.size=10,this.getSettleList()},dateFormat(e,t){let a=e[t.property];return a>0?this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a):""},timeFormat(e,t){let a=e[t.property];return a>0?this.utils.formatDate("YYYY-MM-DD",1e3*a):""},dateFormatCol(e){return this.utils.formatDate("YYYY-MM-DD",1e3*e)},statusFormat(e,t,a){let s="";return this.SETTLE_SETTLEMENT_STATUS.forEach(e=>{e.value==a&&(s=e.name)}),s},previewProof(e){e?this.$router.push({name:"PreviewPayCert",query:{url:e}}):this.$message.error("未上传打款凭证")},showSupplierInfo(e){this.showAccountInfo=!0,this.suppliersInfo=e.multi},showMoney(e){this.showMakeMoney=!0,this.submitParams.multi_log_id=e},handleCurrentChange(){this.getSettleList()},confirm(){let e=this.$refs.uploadImg.uploadFiles,t=new FileReader,a=this;t.addEventListener("load",function(){a.submitParams.pay_cert=this.result,Object(n["w"])(a.submitParams).then(e=>{if(console.log(e),e){a.$message.success("打款完成"),a.$refs.uploadImg.clearFiles();for(let e in a.submitParams)a.submitParams[e]="";a.showMakeMoney=!1,a.getSettleList()}},e=>{a.$message.error(e.errorMsg)})},!1),t.readAsDataURL(e[0].raw)},printPert(e){Object(n["u"])({multi_log_id:e}).then(e=>{const t=this.utils.formatDate("YYYY-MM-DD",(new Date).getTime());Object(c["saveAs"])(new Blob([e.data]),e.filename||t+"打款凭证.pdf")})}})},p=u,m=(a("8ff2"),a("4f9b"),a("2877")),d=Object(m["a"])(p,s,i,!1,null,"7c451acc",null);t["default"]=d.exports},"78ef":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("优惠券")]),a("el-breadcrumb-item",[e._v("编辑优惠券")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.newCouponLoading,expression:"newCouponLoading"}],staticClass:"list-wrapper"},[a("el-form",{ref:"newCouponData",attrs:{"label-position":"center",model:e.newCouponData,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"优惠券名称：",prop:"couponName"}},[a("el-input",{staticStyle:{width:"30%"},attrs:{type:"text",placeholder:"优惠券名称"},on:{input:function(t){return e.checkTel("coupon",t)}},model:{value:e.newCouponData.couponName,callback:function(t){e.$set(e.newCouponData,"couponName","string"===typeof t?t.trim():t)},expression:"newCouponData.couponName"}})],1),a("el-form-item",{attrs:{label:"发放总量：",prop:"totalCount"}},[a("el-input",{staticStyle:{width:"30%"},attrs:{type:"text",disabled:e.isDisabled,placeholder:"发放数量"},on:{input:function(t){return e.checkTel("amount",t)}},model:{value:e.newCouponData.totalCount,callback:function(t){e.$set(e.newCouponData,"totalCount","string"===typeof t?t.trim():t)},expression:"newCouponData.totalCount"}})],1),a("el-form-item",{attrs:{label:"使用门槛：",prop:"thresholdType"}},[a("el-radio-group",{attrs:{disabled:e.isDisabled,size:"mini"},model:{value:e.newCouponData.thresholdType,callback:function(t){e.$set(e.newCouponData,"thresholdType",t)},expression:"newCouponData.thresholdType"}},[a("el-radio",{attrs:{label:0}},[e._v("无门槛")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-radio",{attrs:{label:1}},[e._v("订单满")])],1)],1),1==e.newCouponData.thresholdType?a("el-form-item",{staticClass:"left_flex",attrs:{prop:"thresholdAmount"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"text",disabled:e.isDisabled,placeholder:"金额( 0.1-999999.99 )"},on:{input:function(t){return e.checkTel("reduction",t)}},model:{value:e.newCouponData.thresholdAmount,callback:function(t){e.$set(e.newCouponData,"thresholdAmount","string"===typeof t?t.trim():t)},expression:"newCouponData.thresholdAmount"}}),e._v("\n          元")],1):e._e()],1),a("el-form-item",{attrs:{label:"优惠内容：",prop:"preferentialAmount"}},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("减")]),a("el-input",{staticStyle:{width:"120px"},attrs:{type:"text",disabled:e.isDisabled,placeholder:"金额(元)"},on:{input:function(t){return e.checkTel("couponPro",t)}},model:{value:e.newCouponData.preferentialAmount,callback:function(t){e.$set(e.newCouponData,"preferentialAmount","string"===typeof t?t.trim():t)},expression:"newCouponData.preferentialAmount"}}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("元")])],1),a("el-form-item",{attrs:{label:"有效期：",prop:"order_valid",required:""}},[a("el-radio-group",{attrs:{disabled:e.isDisabled,size:"mini"},model:{value:e.newCouponData.order_valid,callback:function(t){e.$set(e.newCouponData,"order_valid",t)},expression:"newCouponData.order_valid"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-radio",{attrs:{label:0}},[e._v("选日期")]),0==e.newCouponData.order_valid?a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"time_value"}},[a("el-date-picker",{attrs:{disabled:e.isDisabled,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.optTime},model:{value:e.time_value,callback:function(t){e.time_value=t},expression:"time_value"}})],1):e._e()],1),a("div",{staticClass:"coup_time"},[a("el-radio",{attrs:{label:2}},[e._v("领劵后")]),2==e.newCouponData.order_valid?a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"periodType"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{type:"text",disabled:e.isDisabled,placeholder:"1-999"},on:{input:function(t){return e.checkTel("timeDay",t)}},model:{value:e.newCouponData.periodType,callback:function(t){e.$set(e.newCouponData,"periodType","string"===typeof t?t.trim():t)},expression:"newCouponData.periodType"}})],1):e._e()],1)]),2==e.newCouponData.order_valid?a("div",{staticClass:"left_flex",staticStyle:{"vertical-align":"bottom","margin-left":"10px"}},[e._v("\n          天\n        ")]):e._e()],1),a("el-form-item",{attrs:{label:"适用商品：",prop:"applicableGoods"}},[e.isDisabled?[a("span",{staticStyle:{color:"#41a5e1",cursor:"pointer"},on:{click:function(t){e.dialogTableVisible=!0,e.goodsType=!0}}},[e._v(e._s(e.addAmount))])]:[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.newCouponData.applicableGoods,callback:function(t){e.$set(e.newCouponData,"applicableGoods",t)},expression:"newCouponData.applicableGoods"}},[a("div",{staticClass:"coup_time"},[a("el-radio",{attrs:{label:2}},[e._v("指定商品")]),a("el-button",{staticClass:"input-box",attrs:{type:"primary",size:"small"}},[e._v("\n                批量导入商品\n                "),a("input",{ref:"referenceUpload",attrs:{type:"file"},on:{change:function(t){return e.ossUpload(t)}}})])],1)]),a("div",{staticStyle:{"margin-left":"100px"}},[a("el-button",{staticClass:"input-box",attrs:{type:"text",size:"small"}},[a("a",{attrs:{href:e.down}},[e._v("下载模板")])])],1),a("div",{staticClass:"add-online"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogTableVisible=!0,e.goodsType=!1}}},[e._v("批量添加商品")]),a("span",{staticClass:"goods-in"},[e._v("已添加商品：")]),a("span",{staticStyle:{color:"#41a5e1",cursor:"pointer"},on:{click:function(t){e.dialogTableVisible=!0,e.goodsType=!0}}},[e._v(e._s(e.addAmount))])],1)]],2),a("el-form-item",{attrs:{label:"领取人：",prop:"targetUsers"}},[a("el-radio-group",{attrs:{disabled:e.isDisabled,size:"mini"},model:{value:e.newCouponData.targetUsers,callback:function(t){e.$set(e.newCouponData,"targetUsers",t)},expression:"newCouponData.targetUsers"}},[a("el-radio",{attrs:{label:1}},[e._v("全部")]),a("el-radio",{attrs:{label:2}},[e._v("新用户")])],1)],1),a("el-form-item",{attrs:{label:"领取限制：",prop:"order_number"}},[a("el-radio-group",{attrs:{disabled:e.isDisabled,size:"mini"},model:{value:e.newCouponData.order_number,callback:function(t){e.$set(e.newCouponData,"order_number",t)},expression:"newCouponData.order_number"}},[a("el-radio",{attrs:{label:-1}},[e._v("不限")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-radio",{attrs:{label:2}},[e._v("次数")]),2==e.newCouponData.order_number?a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"receiveLimit"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{type:"text",disabled:e.isDisabled,placeholder:"1-99"},on:{input:function(t){return e.checkTel("receive",t)}},model:{value:e.newCouponData.receiveLimit,callback:function(t){e.$set(e.newCouponData,"receiveLimit","string"===typeof t?t.trim():t)},expression:"newCouponData.receiveLimit"}})],1):e._e()],1)],1)],1),a("el-form-item",{attrs:{label:"使用说明：",prop:"useDescription"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",maxlength:"60"},model:{value:e.newCouponData.useDescription,callback:function(t){e.$set(e.newCouponData,"useDescription",t)},expression:"newCouponData.useDescription"}})],1),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",maxlength:"60"},model:{value:e.newCouponData.remarks,callback:function(t){e.$set(e.newCouponData,"remarks",t)},expression:"newCouponData.remarks"}})],1),a("div",{staticStyle:{width:"80%",margin:"0 auto","text-align":"center"}},[a("el-button",{staticStyle:{margin:"0 20px"},on:{click:function(t){return e.resetForm("newCouponData")}}},[e._v("取消")]),a("el-button",{staticStyle:{margin:"0 20px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("newCouponData")}}},[e._v("确认")])],1)],1)],1),a("el-dialog",{attrs:{title:"商品列表",visible:e.dialogTableVisible,width:"90%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[e.dialogTableVisible?a("goods-online",{attrs:{isdisabled:e.goodsType,couponid:e.newCouponData.id,operate:e.isDisabled},on:{"add-goods":e.addGoodsOnline}}):e._e()],1)],1)},i=[],r=(a("a481"),a("91bd")),n=a("ccd9"),l={name:"editCoupon",components:{goodsOnline:r["a"]},data(){let e=(e,t,a)=>{null==this.time_value?a(new Error("请选择有效期限")):a()};return{newCoupon:!1,newCouponData:{id:"",couponName:"",totalCount:"",thresholdAmount:"",preferentialAmount:"",order_valid:0,periodType:"",periodStartTime:"",periodEndTime:"",applicableGoods:2,targetUsers:1,receiveLimit:"",useDescription:"",remarks:"",instructions:"0",thresholdType:0,order_number:1},rules:{couponName:[{required:!0,message:"请输入优惠券名称！",trigger:"blur"},{min:3,max:15,message:"长度3~15个字符",trigger:"blur"}],totalCount:{required:!0,message:"请输入0-99999999整数！",trigger:"blur"},thresholdType:{required:!0,message:"请选择使用条件！",trigger:"change"},preferentialAmount:{required:!0,message:"请输入0.1-999999.99的数字",trigger:"blur"},time_value:{validator:e,trigger:"blur"},periodType:{required:!0,message:"请选择失效天数！",trigger:"blur"},thresholdAmount:{required:!0,message:"请填写满减金额！",trigger:"blur"},receiveLimit:{required:!0,message:"请填写次数！",trigger:"blur"},applicableGoods:{required:!0,message:"请选择适用商品！",trigger:"change"},targetUsers:{required:!0,message:"请选择领券人！",trigger:"change"},order_number:{required:!0,message:"请选择领取限制！",trigger:"change"},useDescription:{required:!0,message:"请填写使用说明！",trigger:"blur"}},newCouponLoading:!1,isShowAdem:!0,down:"#",time_value:null,addAmount:0,dialogTableVisible:!1,goodsType:!1,isDisabled:!1}},methods:{addGoodsOnline(e){this.$message.success(e),this.dialogTableVisible=!1,this.getAmount()},getAmount(){this.$api.get("hd/itzCouponGoods/page/list",{couponId:this.newCouponData.id,page:1,limit:10},e=>{200==e.status&&(this.addAmount=e.data.total)})},getList(){this.$api.get("hd/itzCoupon/info/".concat(this.$route.params.id),null,e=>{200==e.status&&(this.addAmount=e.data.count,this.newCouponData.couponName=e.data.coupon.couponName,this.newCouponData.totalCount=e.data.coupon.totalCount,this.newCouponData.thresholdType=e.data.coupon.thresholdType,this.newCouponData.thresholdAmount=1==e.data.coupon.thresholdType?e.data.coupon.thresholdAmount:"",this.newCouponData.preferentialAmount=e.data.coupon.preferentialAmount,this.newCouponData.periodType=0==e.data.coupon.periodType?"":e.data.coupon.periodType,this.newCouponData.targetUsers=e.data.coupon.targetUsers,this.newCouponData.receiveLimit=-1==e.data.coupon.receiveLimit?"":e.data.coupon.receiveLimit,this.newCouponData.useDescription=e.data.coupon.useDescription,this.newCouponData.remarks=e.data.coupon.remarks,this.newCouponData.order_valid=0==e.data.coupon.periodType?0:2,this.newCouponData.order_number=-1==e.data.coupon.receiveLimit?-1:2,this.time_value=0==e.data.coupon.periodType?[1e3*e.data.coupon.periodStartTime,1e3*e.data.coupon.periodEndTime]:null,this.optTime())})},checkTel(e,t){"coupon"==e?this.newCouponData.couponName=this.utils.checkTel("15",t):"amount"==e?this.newCouponData.totalCount=this.utils.checkTel("8",t).replace(/[^\d]+/g,""):"reduction"==e?this.newCouponData.thresholdAmount=this.utils.checkTel("9",t).replace(/^\D*([1-9]\d*\.?\d{0,2})?.*$/,"$1"):"couponPro"==e?this.newCouponData.preferentialAmount=this.utils.checkTel("9",t).replace(/^\D*([1-9]\d*\.?\d{0,2})?.*$/,"$1"):"timeDay"==e?this.newCouponData.periodType=this.utils.checkTel("3",t).replace(/[^\d]+/g,""):"receive"==e&&(this.newCouponData.receiveLimit=this.utils.checkTel("2",t).replace(/[^\d]+/g,""))},optTime(){let e=this.time_value?this.time_value:[];e.length>0?(this.newCouponData.periodStartTime=this.utils.format_date(e[0],"-1")/1e3,this.newCouponData.periodEndTime=this.utils.format_date(e[1],"-1")/1e3):(this.newCouponData.periodStartTime="",this.newCouponData.periodEndTime="")},submit(e){0==this.newCouponData.thresholdType&&(this.newCouponData.thresholdAmount=""),2==this.newCouponData.order_valid?(this.newCouponData.periodStartTime=parseInt((new Date).getTime()/1e3),this.newCouponData.periodEndTime=0):0==this.newCouponData.order_valid&&(this.newCouponData.periodType=0),-1==this.newCouponData.order_number&&(this.newCouponData.receiveLimit=-1),this.newCouponLoading=!0,this.$api.put("hd/itzCoupon/"+this.newCouponData.id,this.newCouponData,e=>{200===e.status&&(this.newCoupon=!1,this.newCouponLoading=!1,this.$message.success("修改成功！"),setTimeout(()=>{this.$router.push({name:"couponList"})},2e3))},e=>{this.$message.error(e),this.newCouponLoading=!1})},submitForm(e){this.$refs[e].validate(e=>{return e?2==this.newCouponData.applicableGoods&&0==this.addAmount?(this.$message.error("请添加商品！"),!1):void this.submit():(console.log("error submit!!"),!1)})},resetForm(e){this.newCoupon=!1,this.$refs[e].resetFields(),this.$router.push({name:"couponList"})},ossUpload(e){let t=this,a=e.target.files;for(let i of a)if(i.name&&-1==i.name.indexOf(".csv"))return t.$message.error("请上传 .CSV 文件"),!1;t.online_loading=!0;let s=new FormData;s.append("goodsFile",a[0]),s.append("id",this.newCouponData.id),t.newCouponLoading=!0,t.$api.post("hd/itzCoupon/goods/csv",s,e=>{200===e.status&&(t.newCouponLoading=!1,t.$message.success("文件上传成功！"),t.$refs.referenceUpload.value=null,t.getAmount())},e=>{console.log(e),t.newCouponLoading=!1})}},created(){this.isDisabled=1==this.$route.params.status,this.newCouponData.id=this.$route.params.id,this.getList();for(let e in n["a"])"hd/"==n["a"][e].key&&(this.down=n["a"][e].val+"/coupon-template(UTF-8).csv")}},o=l,c=(a("ae3a"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"5472477c",null);t["default"]=u.exports},"79ba":function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return r});const s=["待支付","待发货","配送中","待评价","已完成","已取消","配货中"],i=[{name:"今",value:0},{name:"昨",value:1},{name:"近7天",value:7},{name:"近30天",value:30}],r=[{id:1,name:"待对账"},{id:2,name:"对账中"},{id:3,name:"已完成"}]},"7ceb":function(e,t,a){"use strict";var s=a("80af"),i=a.n(s);i.a},"7de9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"网贷平台列表"}}),a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.activityAdd("add")}}},[e._v("添加平台")])],1),a("div",{staticClass:"search-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"平台名称"}},[a("el-input",{attrs:{placeholder:"平台名称"},model:{value:e.params.partnerName,callback:function(t){e.$set(e.params,"partnerName",t)},expression:"params.partnerName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getActivityList()}}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:function(t){return e.clear()}}},[e._v("清空")])],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary"}},[a("a",{staticStyle:{color:"#fff"},attrs:{href:e.down,download:"出借人模板.csv"}},[e._v("下载出借人模板")])])],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.online_loading,expression:"online_loading"}],staticStyle:{width:"100%"},attrs:{data:e.onlineArr,stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),a("el-table-column",{attrs:{align:"center",prop:"partnerId",label:"ID"}}),a("el-table-column",{attrs:{align:"center",prop:"account",label:"账号"}}),a("el-table-column",{attrs:{align:"center",prop:"partnerName",label:"网贷平台"}}),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"手机号"}}),a("el-table-column",{attrs:{align:"center",prop:"useToken",label:"已代付数额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"paymentDetails",params:{partners:t.row.partnerName}}}},[a("span",[e._v(e._s(t.row.useToken))])])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"token",label:"浣豆余额"}}),a("el-table-column",{attrs:{align:"center",prop:"lendNum",label:"出借人数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"lenderLists",params:{partners:t.row.partnerName}}}},[a("span",[e._v(e._s(t.row.lendNum))])])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"createdAt",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utils.format_date(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"input-box",attrs:{type:"text",size:"small"}},[e._v("\n            导入出借人\n            "),a("input",{attrs:{type:"file"},on:{change:function(a){return e.ossUpload(a,t.row)}}})]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editTokenClick(t.row)}}},[e._v("增减浣豆")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.activityAdd("edit",t.row)}}},[e._v("编辑")])]}}])})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.params.limit,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),e.addPlatform?a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.addPlatform_loading,expression:"addPlatform_loading"}],attrs:{title:e.titleName,visible:e.addPlatform,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.addPlatform=t}}},[a("el-form",{ref:"form",attrs:{model:e.add_Platform,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"网贷平台："}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"text"},model:{value:e.add_Platform.partnerName,callback:function(t){e.$set(e.add_Platform,"partnerName","string"===typeof t?t.trim():t)},expression:"add_Platform.partnerName"}})],1),a("el-form-item",{attrs:{label:"账号："}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"text",disabled:"edit"==e.add_Platform.istype},model:{value:e.add_Platform.account,callback:function(t){e.$set(e.add_Platform,"account","string"===typeof t?t.trim():t)},expression:"add_Platform.account"}})],1),a("el-form-item",{attrs:{label:"初始密码："}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"text"},model:{value:e.add_Platform.password,callback:function(t){e.$set(e.add_Platform,"password","string"===typeof t?t.trim():t)},expression:"add_Platform.password"}})],1),a("el-form-item",{attrs:{label:"密码确认："}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"text"},model:{value:e.add_Platform.passwordConfirm,callback:function(t){e.$set(e.add_Platform,"passwordConfirm","string"===typeof t?t.trim():t)},expression:"add_Platform.passwordConfirm"}})],1),a("el-form-item",{attrs:{label:"手机号："}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"number"},on:{input:function(t){return e.checkTel("phone",t)}},model:{value:e.add_Platform.mobile,callback:function(t){e.$set(e.add_Platform,"mobile","string"===typeof t?t.trim():t)},expression:"add_Platform.mobile"}})],1),"edit"!=e.add_Platform.istype?a("el-form-item",{attrs:{label:"赠送浣豆："}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"number"},on:{input:function(t){return e.checkTel("token",t)}},model:{value:e.add_Platform.token,callback:function(t){e.$set(e.add_Platform,"token","string"===typeof t?t.trim():t)},expression:"add_Platform.token"}})],1):e._e(),a("div",{staticClass:"antion-footer"},[a("el-button",{on:{click:function(t){e.addPlatform=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.addBtn},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1):e._e(),e.kidneyBean?a("el-dialog",{attrs:{title:"修改浣豆",visible:e.kidneyBean,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.kidneyBean=t}}},[a("el-form",{ref:"form",attrs:{model:e.editToken,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"浣豆："}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"number",placeholder:"输入负数为减少浣豆",maxlength:"8"},on:{input:function(t){return e.checkTel("token",t)}},model:{value:e.editToken.token,callback:function(t){e.$set(e.editToken,"token","string"===typeof t?t.trim():t)},expression:"editToken.token"}})],1),a("div",{staticClass:"antion-footer"},[a("el-button",{on:{click:function(t){e.kidneyBean=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.editBtn},on:{click:e.increaseOrDecrease}},[e._v("确 定")])],1)],1)],1):e._e()],1)},i=[],r=(a("a481"),a("ccd9")),n={name:"RetailActivityList",data(){return{onlineArr:[],currentPage:1,params:{partnerName:"",page:1,limit:10},add_Platform:{partnerName:"",token:"",account:"",password:"",passwordConfirm:"",mobile:"",partnerId:""},total:0,addPlatform_loading:!1,addPlatform:!1,kidneyBean:!1,addBtn:!1,editBtn:!1,editToken:{token:"",partnerId:""},fileList3:[],titleName:"",online_loading:!1,down:""}},created(){this.getActivityList();for(let e in r["a"])"hd/"==r["a"][e].key&&(this.down=r["a"][e].val+"/template(UTF-8).csv")},methods:{checkTel(e,t){"phone"==e?this.add_Platform.mobile.length>11&&(this.add_Platform.mobile=this.add_Platform.mobile.slice(0,11)):"token"==e&&(0==t&&(this.editToken.token=""),this.editToken.token.length>8&&(this.editToken.token=this.editToken.token.slice(0,8)))},replaceDatas(e){for(let t in e)""!=e[t]&&null!=e[t]||delete e[t]},getActivityList(){this.replaceDatas(this.params);let e=JSON.stringify(this.params).replace(/:/g,"=").replace("{","").replace("}","").replace(/,/g,"&").replace(/"/g,"").replace(/\s+/g,"");this.$api.get("hd/itzPartner/page/list?"+e,null,e=>{200===e.status&&(this.onlineArr=e.data.rows,this.$set(this.onlineArr,e.data.rows),this.total=e.data.total)})},handleCurrentChange(e){this.params.page=e,this.getActivityList()},activityAdd(e,t){console.log(t),"add"==e?(this.add_Platform={istype:"add",partnerName:"",token:"",account:"",password:"",passwordConfirm:"",mobile:"",partnerId:""},this.titleName="添加平台"):"edit"==e&&(this.add_Platform={istype:"edit",partnerName:t.partnerName,token:t.token,account:t.account,password:"",passwordConfirm:"",mobile:t.mobile,partnerId:t.partnerId},this.titleName="修改平台"),this.addPlatform=!0},clear(){this.page=1,this.limit=10;let e=this.params;e.partnerName="",this.getActivityList()},ossUpload(e,t){console.log(e.target.files,t);let a=this,s=e.target.files;for(let r of s)r.name&&-1==!r.name.indexOf(".csv")&&a.$message.error(".CSV 文件");a.online_loading=!0;let i=new FormData;i.append("file",s[0]),a.$api.post("hd/upload/"+t.partnerId,i,e=>{console.log(e),200===e.status&&(a.online_loading=!1,a.$message.success("文件上传成功！"),this.getActivityList())})},editTokenClick(e){console.log(e),this.kidneyBean=!0,this.editToken={token:"",partnerId:e.partnerId}},increaseOrDecrease(){this.editBtn=!0;let e=this.editToken;return this.editToken.token?this.editToken.token&&this.editToken.token.length>8?(this.$message.error("浣豆最大数量支持八位数！"),!1):void this.$api.put("hd/itzPartner/huandou",e,e=>{console.log(e),200===e.status&&(this.$message.success("新增成功"),this.editBtn=!1,this.kidneyBean=!1,this.getActivityList())}):(this.$message.error("浣豆数量不能为空！"),!1)},submit(){if("add"==this.add_Platform.istype){if(!this.add_Platform.partnerName)return this.$message.error("合作平台名称不能为空！"),!1;if(!this.add_Platform.account)return this.$message.error("合作账号不能为空！"),!1;if(!this.add_Platform.account)return this.$message.error("平台账号不能为空！"),!1;if(!this.add_Platform.password)return this.$message.error("密码不能为空！"),!1;if(this.add_Platform.password!=this.add_Platform.passwordConfirm)return this.$message.error("两次输入的密码不一致！"),!1;let e=/^1[3456789]\d{9}$/;if(!this.add_Platform.mobile)return this.$message.error("请输入手机号！"),!1;if(!e.test(this.add_Platform.mobile))return this.$message.error("手机号格式不正确！"),!1;if(!this.add_Platform.token)return this.$message.error("浣豆数量不能为空！"),!1;if(this.add_Platform.token&&this.add_Platform.token.length>8)return this.$message.error("浣豆最大数量支持八位数！"),!1;let t=this.add_Platform;this.addBtn=!0,this.$api.post("hd/itzPartner/info",t,e=>{console.log(e),200===e.status&&(this.$message.success("新增成功"),this.addBtn=!1,this.addPlatform=!1,this.getActivityList())})}else if("edit"==this.add_Platform.istype){this.addBtn=!0;let e=this.add_Platform;this.$api.put("hd/itzPartner/info",e,e=>{200===e.status&&(this.$message.success("修改完成！"),this.addBtn=!1,this.addPlatform=!1,this.getActivityList())})}}},watch:{addPlatform(e){let t=this;!1!==e&&"false"!==e||(console.log("重置add_Platform"),t.add_Platform={istype:"",partnerName:"",token:"",account:"",password:"",passwordConfirm:"",mobile:"",partnerId:""},t.addBtn=!1)},kidneyBean(e){let t=this;!1!==e&&"false"!==e||(console.log("修改浣豆"),t.editToken={token:"",partnerId:""},t.editBtn=!1)}}},l=n,o=(a("c819"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,"1f39fe6a",null);t["default"]=c.exports},"80af":function(e,t,a){},8455:function(e,t,a){},"8afe":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"income-table-container"},[a("div",{staticClass:"left-cash"},[a("el-row",[a("el-col",{attrs:{span:12}},[e._v("现金收入金额")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.cash))])],1)],1),1==e.cooperateType?a("div",{staticClass:"right-hb"},[a("el-row",[a("el-col",{attrs:{span:12}},[e._v("积分收入金额")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.huanbi))])],1)],1):e._e()])},i=[],r=a("be94"),n=a("2f62"),l={name:"",props:["cash","huanbi"],data(){return{}},computed:Object(r["a"])({},Object(n["c"])({cooperateType:e=>e.suppliers.cooperateType})),created(){},methods:{}},o=l,c=(a("a1c2"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"09854508",null);t["a"]=u.exports},"8c01":function(e,t,a){},"8ff2":function(e,t,a){"use strict";var s=a("5c4c"),i=a.n(s);i.a},9009:function(e,t,a){},"90f8":function(e,t,a){"use strict";var s=a("8455"),i=a.n(s);i.a},9141:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wait-confirm-detail-container"},[a("page-title",{attrs:{"first-title":"对账单列表","second-title":"详情"}}),a("div",{staticClass:"total-wrapper"},[a("div",{staticClass:"account-info"},[a("div",{staticClass:"account-left"},[e._v("状态："+e._s(e.fmtStatus(e.infoData.status)))]),a("div",{staticClass:"account-right"},[a("span",[e._v("对账单编号：")]),a("span",[e._v(e._s(e.infoData.multi_statement_id))]),a("span",{staticClass:"settle-time"},[e._v("结算时间：")]),a("span",[e._v(e._s(e._f("convertTime")(1e3*e.infoData.settlement_start))+" ——\n          "+e._s(e._f("convertTime")(1e3*e.infoData.settlement_end)))])])]),e.infoData.multi_statement_id?a("v-total",{attrs:{info:e.infoData}}):e._e(),e.infoData.status&&4!=e.infoData.status?a("div",{staticClass:"btn-box"},[e.isOperater?a("el-button",{attrs:{type:"warning"},on:{click:e.goEdit}},[e._v("重新编辑")]):e._e(),e.isSuppliers||e.isFinance?a("el-button",{attrs:{type:"warning"},on:{click:e.hasDiff}},[e._v("有异议")]):e._e(),e.isOperater||e.isSuppliers||e.isFinance?a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]):e._e()],1):e._e()],1),a("div",{staticClass:"bill-detail-wrapper"},[a("div",{staticClass:"account-info"},[a("div",{staticClass:"account-right"},[a("span",{staticClass:"title"},[e._v("账单明细")]),a("span",[e._v("日账单编号：")]),e.infoData.statement_no?a("span",[e._v(e._s(e.infoData.statement_no.join(", ")))]):e._e()])]),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportSettlement}},[e._v("导出账单")])],1),a("el-tabs",{on:{"tab-click":e.changeTab},model:{value:e.params.type,callback:function(t){e.$set(e.params,"type",t)},expression:"params.type"}},[a("el-tab-pane",{attrs:{label:"订单总收入",name:"1"}},[a("el-table",{attrs:{data:e.listData,border:"",stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"order_sn",label:"订单号"}}),a("el-table-column",{attrs:{prop:"add_time",label:"下单时间",formatter:e.fmtTime}}),a("el-table-column",{attrs:{label:"支付金额（元）"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.order_type?a("span",[e._v(e._s(t.row.total_amount))]):a("span",[e._v(e._s(t.row.goods_amount))])]}}])}),a("el-table-column",{attrs:{label:"支付现金额（元）"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.order_type?a("span",[e._v(e._s(t.row.real_money_paid))]):a("span",[e._v(e._s(t.row.money_paid))])]}}])}),1==e.cooperateType?a("el-table-column",{attrs:{label:"支付积分额"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.order_type?a("span",[e._v(e._s(t.row.real_surplus))]):a("span",[e._v(e._s(t.row.surplus))])]}}],null,!1,4031455201)}):e._e(),a("el-table-column",{attrs:{prop:"real_cash_back",label:"现金退款"}}),1==e.cooperateType?a("el-table-column",{attrs:{prop:"real_surplus_back",label:"积分退款"}}):e._e(),a("el-table-column",{attrs:{prop:"shipping_fee",label:"运费"}}),a("el-table-column",{attrs:{prop:"showStatus",label:"订单状态"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.goDetail(t.row.order_id)}}},[e._v("查看")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"订单总支出",name:"2"}},[a("el-table",{attrs:{data:e.listData,border:"",stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"order_sn",label:"订单号"}}),a("el-table-column",{attrs:{prop:"add_time",label:"下单时间",formatter:e.fmtTime}}),a("el-table-column",{attrs:{prop:"totalBack",label:"支出金额（元）"}}),a("el-table-column",{attrs:{prop:"cash_back",label:"支出现金额（元）"}}),1==e.cooperateType?a("el-table-column",{attrs:{prop:"surplus_back",label:"支出积分额"}}):e._e(),a("el-table-column",{attrs:{prop:"showStatus",label:"订单状态"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.goDetail(t.row.order_id)}}},[e._v("查看")])]}}])})],1)],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.params.page,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1),a("div",{staticClass:"operate-wrapper"},[a("a",{on:{click:e.switchOperate}},[e._v("操作详情")]),e.showOperate?a("v-operate",{attrs:{actionlist:e.actionList}}):e._e()],1),a("div",{staticClass:"different-idea"},[a("el-dialog",{attrs:{visible:e.showDialog,title:e.isFinance&&!e.isFinanceHasDiff?"请填写备注":"提交后您的对账单将退回至运营"},on:{"update:visible":function(t){e.showDialog=t}}},[a("div",{staticClass:"idea-content"},[a("span",{staticStyle:{color:"red","margin-right":"10px"}},[e._v("*")]),a("el-input",{attrs:{type:"textarea",placeholder:"请填写备注，100字以内"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitDiff}},[e._v("提交")]),a("el-button",{attrs:{type:"default",size:"small"},on:{click:function(t){e.showDialog=!1}}},[e._v("取消")])],1)])],1)],1)},i=[],r=a("be94"),n=a("9d62"),l=a("a2e3"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operate-record-container"},[a("el-table",{attrs:{data:e.actionlist,border:"",stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{label:"日期",prop:"addtime",formatter:e.fmtTime}}),a("el-table-column",{attrs:{label:"操作人",prop:"user_name"}}),a("el-table-column",{attrs:{label:"操作",prop:"action"}}),a("el-table-column",{attrs:{label:"备注",prop:"remark"}})],1)],1)},c=[],u={name:"",props:["actionlist"],data(){return{}},computed:{},created(){},methods:{fmtTime(e,t,a){return this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a)}}},p=u,m=(a("ce70"),a("2877")),d=Object(m["a"])(p,o,c,!1,null,"06d39de1",null),h=d.exports,f=a("8afe"),b=a("21a6"),_=a("2f62"),v=a("fef7"),g={name:"",data(){return{params:{multi_statement_id:this.$route.query.id||"",type:"1",page:1,size:10},total:0,infoData:{},incomeData:[],expendData:[],listData:[],actionList:[],showOperate:!1,showDialog:!1,remark:"",statusList:v["g"],isFinanceHasDiff:!1}},components:{"v-total":l["a"],"v-operate":h,"v-income":f["a"]},computed:Object(r["a"])({},Object(_["c"])({role:e=>e.settle.role,cooperateType:e=>e.suppliers.cooperateType,suppliers_id:e=>e.suppliers.suppliers_id}),{isOperater(){return("all"==this.role||"operater"==this.role)&&1==this.infoData.status},isSuppliers(){return("all"==this.role||"supplier"==this.role)&&2==this.infoData.status},isFinance(){return("all"==this.role||"finance"==this.role)&&3==this.infoData.status}}),created(){this.getInfo(),this.getList(),this.getAction()},methods:{getInfo(){Object(n["r"])(this.params.multi_statement_id).then(e=>{this.infoData=e||{}})},getList(){Object(n["p"])(this.params).then(e=>{this.total=e.paged.total,this.listData=e.list})},getAction(){Object(n["k"])({multi_statement_id:this.params.multi_statement_id}).then(e=>{this.actionList=e||[]})},switchOperate(){this.showOperate=!this.showOperate},goEdit(){this.$router.push({name:"SettlementAdd",params:{id:this.params.multi_statement_id},query:{isedit:!0}})},goDetail(e){window.location.href="/admin/order.php?act=info&order_id="+e},exportSettlement(){Object(n["e"])({suppliers_id:this.suppliers_id,multi_statement_id:this.params.multi_statement_id}).then(e=>{const t=this.utils.formatDate("YYYY-MM-DD",(new Date).getTime());Object(b["saveAs"])(new Blob([e.data]),e.filename||t+"结算单.xls")},e=>{console.log(e)})},changeTab(){this.getList()},handleCurrentChange(){this.getList()},fmtTime(e,t,a){return this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a)},submitDiff(){this.remark?this.isFinance&&!this.isFinanceHasDiff?Object(n["g"])({multi_statement_id:this.params.multi_statement_id,remit_log:this.remark}).then(e=>{this.$message.success("确认成功"),this.showDialog=!1,this.isFinanceHasDiff=!1,this.getInfo(),this.getAction()},e=>{this.$message.error(e.errorMsg)}):this.isFinance&&this.isFinanceHasDiff?Object(n["h"])({multi_statement_id:this.params.multi_statement_id,remark:this.remark}).then(e=>{this.$message.success("已退回至运营"),this.showDialog=!1,this.getInfo(),this.getAction()},e=>{this.$message.error(e.errorMsg)}):Object(n["s"])({multi_statement_id:this.params.multi_statement_id,remark:this.remark}).then(e=>{this.$message.success("已退回至运营"),this.showDialog=!1,this.getInfo(),this.getAction()},e=>{this.$message.error(e.errorMsg)}):this.$message.error("请填写原因")},hasDiff(){this.showDialog=!0,this.isFinance&&(this.isFinanceHasDiff=!0)},confirm(){let e={multi_statement_id:this.params.multi_statement_id};this.isOperater?Object(n["t"])(e).then(e=>{this.$message.success("确认成功"),this.getInfo(),this.getAction()}):this.isFinance?(this.showDialog=!0,this.isFinanceHasDiff=!1):Object(n["c"])(e).then(e=>{this.$message.success("确认成功"),this.getInfo(),this.getAction()})},fmtStatus(e){let t="";return this.statusList.forEach(a=>{a.value==e&&(t=a.name)}),t}}},y=g,w=(a("c0e0"),Object(m["a"])(y,s,i,!1,null,"00b9dd48",null));t["default"]=w.exports},"91bd":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部商品",name:"a",disabled:e.isdisabled}}),a("el-tab-pane",{attrs:{label:"已添加商品",name:"b",disabled:!e.isdisabled}})],1),a("div",{staticClass:"search-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchParams}},[a("el-form-item",{attrs:{label:"商品货号"}},[a("el-input",{attrs:{placeholder:"商品货号"},model:{value:e.searchParams.goodsSn,callback:function(t){e.$set(e.searchParams,"goodsSn",t)},expression:"searchParams.goodsSn"}})],1),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.searchParams.goodsName,callback:function(t){e.$set(e.searchParams,"goodsName",t)},expression:"searchParams.goodsName"}})],1),e.merchant?a("el-form-item",{attrs:{label:"商家"}},[a("el-input",{attrs:{placeholder:"商家"},model:{value:e.searchParams.suppliersName,callback:function(t){e.$set(e.searchParams,"suppliersName",t)},expression:"searchParams.suppliersName"}})],1):e._e(),a("el-form-item",{attrs:{label:"商品分类"}},[a("el-cascader",{attrs:{options:e.options,placeholder:"商品分类",clearable:""},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{on:{click:e.clear}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"button-wrapper"},[e.isdisabled?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.addMore}},[e._v("批量添加")]),!e.operate&&e.isdisabled?a("el-button",{attrs:{type:"primary"},on:{click:e.removeMore}},[e._v("批量移除")]):e._e()],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.list,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChange}},[e.operate?e._e():a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,selectable:e.checkSelectable,width:"55"}}),a("el-table-column",{attrs:{prop:"goodsId",label:"编号",width:"100"}}),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"goodsSn",label:"货号",width:"100"}}),a("el-table-column",{attrs:{prop:"marketPrice",label:"价格"}}),a("el-table-column",{attrs:{prop:"goodsNumber",label:"库存"}}),a("el-table-column",{attrs:{prop:"catName",label:"商品分类"}}),a("el-table-column",{attrs:{prop:"sortSales",label:"总销量"}}),e.merchant?a("el-table-column",{attrs:{prop:"providerName",label:"商家"}}):e._e()],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.searchParams.limit,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)},i=[],r={name:"GoodsOnline",props:["isdisabled","couponid","operate"],data(){return{total:12,currentPage:1,searchParams:{page:1,limit:10,couponId:"",goodsSn:"",goodsName:"",suppliersName:"",catId:""},list:[],value:[],options:[],multipleSelection:[],merchant:!0,getRowKeys(e){return e.goodsId}}},computed:{activeName:{get:function(){return this.isdisabled?"b":"a"},set:function(){}}},methods:{getList(){let e=this.isdisabled?"hd/itzCouponGoods/page/list":"hd/itzGoods/all/page";this.$api.get(e,this.searchParams,e=>{200==e.status&&(this.total=e.data.total,this.list=e.data.rows,this.merchant=1!=e.userType,this.toggleSelection(this.list))})},getProductList(){this.$api.get("hd/itzCoupon/category",null,e=>{if(200==e.status){let t=[];e.data.rows.forEach(e=>{let a={value:e.catId,label:e.catName};e.itzCategories.length>0&&(a.children=[],e.itzCategories.forEach(e=>{let t={value:e.catId,label:e.catName};e.itzCategories.length>0&&(t.children=[],e.itzCategories.forEach(e=>{let a={value:e.catId,label:e.catName};t.children.push(a)})),a.children.push(t)})),t.push(a)}),this.options=t}})},handleCurrentChange(e){this.searchParams.page=e,this.getList()},handleChange(e){console.log(e),this.searchParams.catId=e[e.length-1]},checkSelectable(e){return 2==e.check},toggleSelection(e){e.forEach(e=>{1==e.check&&this.$refs.multipleTable.toggleRowSelection(e,!0)})},clear(){this.searchParams.page=1,this.searchParams.goodsName="",this.searchParams.suppliersName="",this.searchParams.goodsSn="",this.searchParams.catId="",this.value=[],this.getList()},search(){this.searchParams.page=1,this.getList()},handleSelectionChange(e){this.multipleSelection=e,console.log(this.multipleSelection)},addMore(){if(0==this.multipleSelection.length)this.$message("请选择至少一条数据");else{let e=[];if(this.multipleSelection.forEach((t,a)=>{let s={couponId:this.couponid,goodsId:t.goodsId};2==t.check&&e.push(s)}),0==e.length)return void this.$message("请选择至少一条数据");this.$confirm("确定添加这".concat(e.length,"个商品吗?"),"批量添加",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{this.$api.post("hd/itzCouponGoods/batch",e,e=>{200==e.status&&this.$emit("add-goods","已选商品添加成功")})}).catch(()=>{this.$message("已取消")})}},removeMore(){if(0==this.multipleSelection.length)this.$message("请选择至少一条数据");else{let e=[];this.multipleSelection.forEach((t,a)=>{e.push(t.goodsId)});let t=e.join(",");this.$confirm("确定移除这".concat(this.multipleSelection.length,"个商品吗?"),"移除",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{this.$api.put("hd/itzCouponGoods/goods",{couponId:this.couponid,goodsIds:t},e=>{200==e.status&&this.$emit("add-goods","已选商品移除成功")})}).catch(()=>{this.$message("已取消")})}}},created(){this.searchParams.couponId=this.couponid,this.getList(),this.getProductList()}},n=r,l=(a("203a"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"20fe3bdc",null);t["a"]=o.exports},"92d2":function(e,t,a){},9469:function(e,t,a){"use strict";var s=a("b441"),i=a.n(s);i.a},9677:function(e,t,a){"use strict";var s=a("7719"),i=a.n(s);i.a},"9a76":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v(e._s(e.name)+"平台")]),a("el-breadcrumb-item",[e._v("浣豆账户明细")])],1)],1),a("div",{staticClass:"search-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchParams}},[a("el-form-item",{attrs:{label:"流水号"}},[a("el-input",{attrs:{placeholder:"流水号"},model:{value:e.searchParams.tradeNo,callback:function(t){e.$set(e.searchParams,"tradeNo",t)},expression:"searchParams.tradeNo"}})],1),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{clearable:"",placeholder:"分类"},model:{value:e.searchParams.changeType,callback:function(t){e.$set(e.searchParams,"changeType",t)},expression:"searchParams.changeType"}},e._l(e.classList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{on:{click:e.clear}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"createdAt",label:"时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"pipelineNo",label:"流水号"}}),a("el-table-column",{attrs:{prop:"addToken",label:"增加浣豆"}}),a("el-table-column",{attrs:{prop:"reduceToken",label:"减少浣豆"}}),a("el-table-column",{attrs:{prop:"currentToken",label:"余额"}}),a("el-table-column",{attrs:{prop:"changeTypeStr",label:"类型"}})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.searchParams.limit,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)},i=[],r={name:"AccountDetails",data(){let e=localStorage.getItem("partnerName");return{name:e,total:0,currentPage:1,searchParams:{page:1,limit:10,tradeNo:"",changeType:""},list:[],classList:{2:"平台代付",3:"平台扣减",1:"充值续费"}}},methods:{getList(){this.replaceDatas(this.searchParams),this.$api.post("hd/itzPartnerAccountLog/payment_detail",this.searchParams,e=>{200==e.status&&(this.list=e.data.rows,this.total=e.data.total)})},replaceDatas(e){for(let t in e)""!=e[t]&&null!=e[t]||delete e[t]},handleCurrentChange(e){this.searchParams.page=e,this.getList()},clear(){this.searchParams.page=1,this.searchParams.size=10,this.searchParams.tradeNo="",this.searchParams.changeType="",this.getList()},search(){this.searchParams.page=1,this.getList()},dateFormat:function(e,t,a){return this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a)}},created(){this.getList()}},n=r,l=(a("d89d"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"77dbc59a",null);t["default"]=o.exports},"9ab7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"下单有礼"}}),a("div",{staticClass:"search-wrapper"},[a("el-form",{attrs:{model:e.params,size:"small","label-position":"left","label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{clearable:""},model:{value:e.params.cashName,callback:function(t){e.$set(e.params,"cashName",t)},expression:"params.cashName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"活动类型"}},[a("el-select",{attrs:{placeholder:"活动类型"},model:{value:e.params.cashType,callback:function(t){e.$set(e.params,"cashType",t)},expression:"params.cashType"}},[a("el-option",{attrs:{label:"现金红包",value:"1"}}),a("el-option",{attrs:{label:"优惠券",value:"2",disabled:""}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"活动日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:e.timeinterval,callback:function(t){e.timeinterval=t},expression:"timeinterval"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"活动状态"}},[a("el-select",{model:{value:e.params.cashStatus,callback:function(t){e.$set(e.params,"cashStatus",t)},expression:"params.cashStatus"}},e._l(e.statusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{on:{click:e.clear}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"button-wrapper"},[a("router-link",{attrs:{to:{name:"newActivity"}}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("新增活动")])],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"cashName",label:"活动名称"}}),a("el-table-column",{attrs:{prop:"startTime",label:"活动开始时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"endTime",label:"活动结束时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"cashType",label:"活动类型",formatter:e.typeFormat}}),a("el-table-column",{attrs:{label:"活动金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cashType?a("span",[e._v(" "+e._s(t.row.cashAmount)+"元")]):a("span",[e._v(" "+e._s(t.row.cashAmount)+"%")])]}}])}),a("el-table-column",{attrs:{prop:"priority",label:"优先级"}}),a("el-table-column",{attrs:{prop:"status",label:"活动状态",formatter:e.statusType}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.ShowAcitves(t.row.id)}}},[e._v("查看")]),0===t.row.status?[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.EditAcitves(t.row.id)}}},[e._v("编辑")])]:e._e(),0!=t.row.status?[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.viewDetail(t.row.id)}}},[e._v("活动统计")])]:e._e(),1===t.row.status?[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.stopAct(t.row.id)}}},[e._v("手动结束")])]:e._e()]}}])})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.params.limit,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"查看活动",visible:e.showAcitve,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.showAcitve=t}}},[a("el-form",{attrs:{"label-position":"left",size:"small","label-width":"140px"},model:{value:e.AcitveData,callback:function(t){e.AcitveData=t},expression:"AcitveData"}},[a("el-form-item",{attrs:{label:"活动名称："}},[a("span",[e._v(e._s(e.AcitveData.cashName))])]),a("el-form-item",{attrs:{label:"活动开始时间："}},[a("span",[e._v(e._s(e.dateFormat0(e.AcitveData.startTime)))])]),a("el-form-item",{attrs:{label:"活动结束时间："}},[a("span",[e._v(e._s(e.dateFormat0(e.AcitveData.endTime)))])]),a("el-form-item",{attrs:{label:"活动类型："}},[a("span",{staticClass:"block"},[e._v("现金红包")]),1==e.AcitveData.cashType?a("span",[e._v("固定金额 "+e._s(e.AcitveData.cashAmount)+" 元")]):a("span",[e._v("订单金额百分比 "+e._s(e.AcitveData.cashAmount)+" %")])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.AcitveData.cashType,expression:"AcitveData.cashType == 2"}],attrs:{label:"单次最高返现金额："}},[a("span",[e._v(e._s(e.utils.formatMoney(e.AcitveData.maxSingleCash))+" 元")])]),a("el-form-item",{attrs:{label:"活动总额："}},[a("span",[e._v(" "+e._s(e.Amounts(e.AcitveData.totalAmount)))])]),a("el-form-item",{attrs:{label:"活动人群："}},[a("span",[e._v(e._s(e.userFormat(e.AcitveData.targetUsers)))])]),a("el-form-item",{attrs:{label:"有礼单数："}},[a("span",[e._v(e._s(e.AcitveData.maxNumber))])]),a("el-form-item",{attrs:{label:"活动商品："}},[a("span",[e._v(e._s(e.scopeFormat(e.AcitveData.cashScope)))])]),a("el-form-item",{attrs:{label:"优先级："}},[a("span",[e._v(e._s(e.AcitveData.priority))])])],1)],1)],1)},i=[],r=a("c6a9"),n={name:"activityList",data(){return{currentPage:0,params:{limit:10,page:1,cashName:"",startTime:"",endTime:"",cashType:"1",cashStatus:""},total:0,AcitveData:{},timeinterval:"",statusList:r["c"],typeList:r["b"],userList:r["e"],scopeList:r["d"],list:[],showAcitve:!1}},created(){this.getList()},mounted(){},methods:{getList(){this.timeinterval&&0!=this.timeinterval.length?(this.params.startTime=this.timeinterval[0]/1e3,this.params.endTime=this.timeinterval[1]/1e3):(this.params.startTime="",this.params.endTime=""),this.$api.get("/hd/itzReturnCashActivity/page/list",this.params,e=>{200===e.status?(this.list=e.data.rows,this.total=e.data.total):this.$message.error({title:"错误",message:e.message})})},clear(){this.params={limit:10,page:1,cashName:"",startTime:"",endTime:"",cashType:"1",cashStatus:""},this.timeinterval="",this.currentPage=1},search(){this.params.page=1,this.getList()},handleCurrentChange(e){this.params.page=e,this.getList()},viewDetail(e){this.$router.push({name:"activityStatistics",params:{id:e}})},dateFormat:function(e,t){let a=e[t.property];return a?this.utils.formatDate("YYYY-MM-DD HH:mm",1e3*a):"长期有效"},dateFormat0(e){return e?this.utils.formatDate("YYYY-MM-DD HH:mm",e/1e3*1e3):"长期有效"},statusType:function(e,t){let a=e[t.property],s=this.statusList.find(e=>{return e.id==a});return s?s.name:"未知状态"},typeFormat:function(e,t){let a=e[t.property],s=this.typeList.find(e=>{return e.id==a});return s?s.name:"未知类型"},userFormat(e){let t=this.userList.find(t=>{return t.id==e});return t?t.name:"未知类型"},scopeFormat(e){let t=this.scopeList.find(t=>{return t.id==e});return t?t.name:"未知类型"},acitveDatas(e,t){e.$api.get("/hd/itzReturnCashActivity/get/detail/".concat(t),null,t=>{200===t.status?(e.AcitveData=t.data,e.AcitveData.startTime=1e3*e.AcitveData.startTime,e.AcitveData.endTime=1e3*e.AcitveData.endTime,2===e.AcitveData.cashType&&(this.Amountflag=!0)):e.$message.error({title:"错误",message:t.message})})},ShowAcitves(e){this.showAcitve=!0;let t=this;this.acitveDatas(t,e)},EditAcitves(e){this.$router.push({name:"editActivity",params:{id:e}})},stopAct(e){this.$confirm("确定终止本次活动吗?",{confirmButtonText:"确定",cancelButtonText:"取消",showClose:!1,customClass:"closecous",center:!0}).then(()=>{this.$api.get("/hd/itzReturnCashActivity/end/".concat(e),null,e=>{200===e.status?(this.$message("操作成功"),this.getList()):this.$message.error({title:"错误",message:e.message})})}).catch(()=>{this.$message({type:"info",message:"已取消"})})},Amounts(e){return"-1"==e?"不限":"￥"+this.utils.formatMoney(e)}},watch:{}},l=n,o=(a("c56f"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,"05726fd0",null);t["default"]=c.exports},"9d5d":function(e,t,a){},"9d62":function(e,t,a){"use strict";a.d(t,"n",function(){return r}),a.d(t,"v",function(){return n}),a.d(t,"d",function(){return l}),a.d(t,"x",function(){return o}),a.d(t,"o",function(){return c}),a.d(t,"r",function(){return u}),a.d(t,"b",function(){return p}),a.d(t,"q",function(){return m}),a.d(t,"c",function(){return d}),a.d(t,"a",function(){return h}),a.d(t,"f",function(){return f}),a.d(t,"m",function(){return b}),a.d(t,"i",function(){return _}),a.d(t,"j",function(){return v}),a.d(t,"p",function(){return g}),a.d(t,"l",function(){return y}),a.d(t,"e",function(){return w}),a.d(t,"w",function(){return C}),a.d(t,"s",function(){return k}),a.d(t,"h",function(){return T}),a.d(t,"t",function(){return x}),a.d(t,"g",function(){return D}),a.d(t,"k",function(){return A}),a.d(t,"u",function(){return S});var s=a("be94"),i=a("65c6");const r=e=>Object(i["a"])("/admin/api.remit.settings.get","POST",{suppliers_id:e}),n=e=>Object(i["a"])("/admin/api.remit.settings.set","POST",Object(s["a"])({},e)),l=e=>Object(i["a"])("/admin/api.multi.statement.create","POST",Object(s["a"])({},e)),o=e=>Object(i["a"])("/admin/api.multi.statement.update","POST",Object(s["a"])({},e)),c=()=>Object(i["a"])("/admin/api.suppliers.role.get","POST",{}),u=e=>Object(i["a"])("/admin/api.multi.statement.get","POST",{multi_statement_id:e}),p=(e,t)=>Object(i["a"])("/admin/api.multi.statement.remit","POST",{multi_statement_id:e,remit_log:t}),m=e=>Object(i["a"])("/admin/api.multi.statement.list.get","POST",Object(s["a"])({},e)),d=e=>Object(i["a"])("/admin/api.multi.statement.suppliers.confirm","POST",Object(s["a"])({},e)),h=(e,t,a,s)=>Object(i["a"])("/admin/api.suppliers.bond.reduce","POST",{suppliers_id:e,bond:t,direction:a,remark:s}),f=e=>Object(i["b"])("/admin/api.multi.statement.print","POST",{multi_statement_id:e}),b=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(i["a"])("/admin/api.suppliers.bond.list","POST",{suppliers_id:e,page:t,size:a})},_=e=>Object(i["a"])("/admin/api.suppliers.account.log.list","POST",e),v=e=>Object(i["a"])("/admin/api.suppliers.statement.income.list","POST",e),g=e=>Object(i["a"])("/admin/api.multi.statement.orders","POST",e),y=e=>Object(i["a"])("/admin/api.suppliers.payment.list","POST",e),w=e=>Object(i["b"])("/admin/api.multi.statement.export","POST",e),C=e=>Object(i["a"])("/admin/api.suppliers.payment.upload","POST",e),k=e=>Object(i["a"])("/admin/api.multi.statement.suppliers.rollback","POST",e),T=e=>Object(i["a"])("/admin/api.multi.statement.finance.rollback","POST",e),x=e=>Object(i["a"])("/admin/api.multi.statement.operater.confirm","POST",e),D=e=>Object(i["a"])("/admin/api.multi.statement.finance.confirm","POST",e),A=e=>Object(i["a"])("/admin/api.multi.statement.action","POST",e),S=e=>Object(i["b"])("/admin/api.multi.statement.print","POST",e)},a15b:function(e,t,a){"use strict";var s=a("f0ef"),i=a.n(s);i.a},a1c2:function(e,t,a){"use strict";var s=a("8c01"),i=a.n(s);i.a},a2e3:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"total-table-container"},[a("div",{staticClass:"left-cash"},[a("el-row",[a("el-col",{attrs:{span:12}},[e._v("现金订单总收入金额")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.all_cash_income))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("现金订单总支出金额")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.all_cash_expend))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("现金佣金抵扣")]),a("el-col",{attrs:{span:12}},[e._v(e._s(parseFloat(e.info.cash_service_fee)+parseFloat(e.info.sales_service_fee)))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("现金交易费用抵扣")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.cash_income_fee))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("现金打款手续费")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.cash_remit_fee))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("保证金补足")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.bond))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("竞拍买家违约金收入")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.cash_added))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("实际现金结算金额")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.cash_real_pay))])],1)],1),1==e.cooperateType?a("div",{staticClass:"right-hb"},[a("el-row",[a("el-col",{attrs:{span:12}},[e._v("积分订单总收入金额")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.all_huanbi_income))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("积分订单总支出金额")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.all_huanbi_expend))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("积分佣金抵扣")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.huanbi_service_fee))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("积分交易费用抵扣")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.huanbi_income_fee))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("积分打款手续费")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.huanbi_remit_fee))])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v(" ")]),a("el-col",{attrs:{span:12}},[e._v(" ")])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v(" ")]),a("el-col",{attrs:{span:12}},[e._v(" ")])],1),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("实际积分结算金额")]),a("el-col",{attrs:{span:12}},[e._v(e._s(e.info.huanbi_real_pay))])],1)],1):e._e()])},i=[],r=a("be94"),n=a("2f62"),l={name:"",props:["info"],data(){return{}},computed:Object(r["a"])({},Object(n["c"])({cooperateType:e=>e.suppliers.cooperateType})),created(){},methods:{}},o=l,c=(a("f01a"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"573c6ece",null);t["a"]=u.exports},a36b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("优惠券")]),a("el-breadcrumb-item",[e._v("领券明细")])],1)],1),a("div",{staticClass:"coupon-name"},[e._v("优惠券名称："+e._s(e.name))]),a("div",{staticClass:"search-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchParams}},[a("el-form-item",{attrs:{label:"用户名称"}},[a("el-input",{attrs:{placeholder:"用户名称"},model:{value:e.searchParams.userName,callback:function(t){e.$set(e.searchParams,"userName",t)},expression:"searchParams.userName"}})],1),a("el-form-item",{attrs:{label:"优惠券状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"优惠券状态"},model:{value:e.searchParams.couponStatus,callback:function(t){e.$set(e.searchParams,"couponStatus",t)},expression:"searchParams.couponStatus"}},e._l(e.classList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{on:{click:e.clear}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"userName",label:"用户"}}),a("el-table-column",{attrs:{prop:"receiveTime",label:"领券时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"isUse",label:"是否使用",formatter:e.statusFormat}}),a("el-table-column",{attrs:{prop:"useTime",label:"使用时间",formatter:e.dateFormat}})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.searchParams.pageSize,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)},i=[],r={name:"couponDetails",data(){return{name:"",total:0,currentPage:1,searchParams:{pageNumber:1,pageSize:10,couponId:this.$route.params.id,userName:"",couponStatus:""},list:[],classList:{1:"已使用",2:"未使用"}}},methods:{getList(){this.$api.get("hd/itzCouponUsers/user",this.searchParams,e=>{200==e.status&&(this.list=e.data.rows,this.total=e.data.total,this.name=e.data.couponName)})},handleCurrentChange(e){this.searchParams.pageNumber=e,this.getList()},clear(){this.searchParams.pageNumber=1,this.searchParams.userName="",this.searchParams.couponStatus="",this.getList()},search(){this.searchParams.pageNumber=1,this.getList()},statusFormat(e,t,a){return this.classList[a]},dateFormat:function(e,t,a){return 0==a?"":this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a)}},created(){this.getList()}},n=r,l=(a("d2de"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"bdc92b9c",null);t["default"]=o.exports},a478:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"账户中心","second-title":"积分提现账户","third-title":"转账记录"}}),a("section",[a("el-breadcrumb-item",[e._v("积分提现账户")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"800px"},attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"addtime",label:"申请时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{prop:"huanbi_withdraw",label:"金额（元）"}}),a("el-table-column",{attrs:{prop:"current_huanbi_withdraw",label:"积分余额"}})],1),a("el-pagination",{attrs:{background:"","current-page":e.page,"page-size":e.size,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},i=[],r=(a("097d"),a("be94")),n=a("2f62"),l=a("afbd"),o={name:"WithdrawalRecord",data(){return{list:[],page:1,size:10,total:0,isLoading:!1}},created(){this.getList()},computed:Object(r["a"])({},Object(n["c"])({suppliers_id:e=>e.suppliers.suppliers_id})),methods:{getList(){this.isLoading=!0,Object(l["s"])(this.suppliers_id,this.page).then(e=>{this.total=e.paged.total,this.list=e.list,this.list.forEach(e=>{e.account="123123"})},e=>{console.log(e)}).finally(()=>{this.isLoading=!1})},dateFormat(e,t){let a=e[t.property];return this.utils.formatDate("YYYY-MM-DD",1e3*a)},priceFormat(e,t){let a=e[t.property];return this.utils.formatDate("YYYY-MM-DD",1e3*a)},handleCurrentChange(e){this.page=e,this.getList()}}},c=o,u=(a("1735"),a("2877")),p=Object(u["a"])(c,s,i,!1,null,"dbbb4c50",null);t["default"]=p.exports},a5b8:function(e,t,a){"use strict";var s=a("d8e8");function i(e){var t,a;this.promise=new e(function(e,s){if(void 0!==t||void 0!==a)throw TypeError("Bad Promise constructor");t=e,a=s}),this.resolve=s(t),this.reject=s(a)}e.exports.f=function(e){return new i(e)}},a5c9:function(e,t,a){"use strict";var s=a("4ae2"),i=a.n(s);i.a},a60e:function(e,t,a){},a77a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"代付明细列表"}}),a("div",{staticClass:"button-wrapper"}),a("div",{staticClass:"search-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"浣豆类型"}},[a("el-select",{model:{value:e.params.changeType,callback:function(t){e.$set(e.params,"changeType",t)},expression:"params.changeType"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.label}})}),1)],1),a("el-form-item",{attrs:{label:"订单号"}},[a("el-input",{attrs:{placeholder:"订单号"},model:{value:e.params.orderId,callback:function(t){e.$set(e.params,"orderId",t)},expression:"params.orderId"}})],1),a("el-form-item",{attrs:{label:"平台名称"}},[a("el-input",{attrs:{placeholder:"平台名称"},model:{value:e.params.partnerName,callback:function(t){e.$set(e.params,"partnerName",t)},expression:"params.partnerName"}})],1),a("el-form-item",{attrs:{label:"出借人姓名或手机号"}},[a("el-input",{attrs:{placeholder:"出借人姓名或手机号"},model:{value:e.params.nameOrMobile,callback:function(t){e.$set(e.params,"nameOrMobile",t)},expression:"params.nameOrMobile"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getpaymentDetails()}}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:function(t){return e.clear()}}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.paymentArr,stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),a("el-table-column",{attrs:{prop:"changeToken",label:"代付数额"}}),a("el-table-column",{attrs:{prop:"createdAt",label:"代付时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utils.format_date(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{prop:"userName",label:"出借人"}}),a("el-table-column",{attrs:{prop:"mobilePhone",label:"手机号"}}),a("el-table-column",{attrs:{prop:"partnerName",label:"网贷平台"}})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.params.limit,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)},i=[],r={name:"RetailActivityList",data(){return{paymentArr:[],currentPage:1,params:{page:1,limit:10,changeType:"",orderId:"",partnerName:"",nameOrMobile:""},total:0,addPlatform_loading:!1,addPlatform:!1,options:[{value:"份额变化(包含下单平台代付和充值)",label:"0"},{value:"浣豆消费",label:"1"},{value:"签到送豆",label:"2"},{value:"订单退款",label:"3"}]}},created(){console.log(this.$route),this.params.partnerName=this.$route.params.partners,this.getpaymentDetails()},methods:{getpaymentDetails(){this.$api.post("hd/itzUserTokenLog/prepare_detail",this.params,e=>{200==e.status&&(this.paymentArr=e.data.rows,this.total=e.data.total)})},handleCurrentChange(e){this.params.page=e,this.getpaymentDetails()},clear(){this.params.page=1,this.params.limit=10,this.params={page:1,limit:10,changeType:"",orderId:"",partnerName:"",nameOrMobile:"",partnerId:"1"},this.getpaymentDetails()}},watch:{addPlatform(e){!1!==e&&"false"!==e||console.log("重置add_Platform")},$route:{handler(e){let t=this;console.log(e,"监控路由变化"),"paymentDetails"===e.name&&(t.params.partnerName=e.params.partner?e.params.partner:"")},deep:!0}}},n=r,l=(a("1127"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"517dabd3",null);t["default"]=o.exports},adba:function(e,t,a){"use strict";var s=a("67e2"),i=a.n(s);i.a},ae3a:function(e,t,a){"use strict";var s=a("5d2d"),i=a.n(s);i.a},b441:function(e,t,a){},b5c8:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("section",[a("div",{staticClass:"btn-wrapper"},[e.isEdit?[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),e.isPreview?a("el-button",{staticClass:"right",attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交并确认")]):a("el-button",{staticClass:"right",attrs:{type:"primary"},on:{click:e.editDone}},[e._v("提交并确认")])]:[a("el-button",{on:{click:e.goBack}},[e._v("返回")]),e.settleInfo.status>2?a("el-button",{staticClass:"right",attrs:{type:"primary"},on:{click:e.exportSettlement}},[e._v("打印对账单")]):e._e()]],2),e.isEdit?e._e():a("div",{staticClass:"table-head"},[a("h1",[e._v("状态："+e._s(e.title))])]),a("div",{staticClass:"table-wrapper"},[e.isEdit?[a("h2",{staticClass:"t-center"},[e._v("对账单")]),a("div",{staticClass:"t-head"},[a("p",{staticClass:"line-item"},[a("label",[e._v("收款单位：")]),e._v(e._s(e.edit_settleInfo.pay_company))]),a("p",{staticClass:"line-item"},[a("label",[e._v("收款人：")]),e._v(e._s(e.edit_settleInfo.payee))]),e.edit_settleInfo.bank?a("p",{staticClass:"line-item"},[a("label",[e._v("银行：")]),e._v(e._s(e.bankName(e.edit_settleInfo.bank))+"\n          ")]):e._e(),a("p",{staticClass:"line-item"},[e.edit_settleInfo.bank?a("label",[e._v("银行账号：")]):a("label",[e._v("支付宝账号：")]),e._v("\n            "+e._s(e.edit_settleInfo.remit_account)+"\n          ")])]),a("div",{staticClass:"edit-body"},[e.edit_settleInfo.commission_type===e.COMMISSIONTYPE.SLAES?[e.reduce.cash1||e.reduce.cash4?a("p",{staticClass:"line-item"},[a("label",[e._v("结算金额（小写）：")]),e.isPreview?a("el-input",{attrs:{disabled:""},model:{value:e.edit_settleInfo.all_cash,callback:function(t){e.$set(e.edit_settleInfo,"all_cash",t)},expression:"edit_settleInfo.all_cash"}}):a("el-input",{attrs:{disabled:""},model:{value:e.real_cash,callback:function(t){e.real_cash=t},expression:"real_cash"}}),a("el-checkbox",{model:{value:e.reduce.cash1,callback:function(t){e.$set(e.reduce,"cash1",t)},expression:"reduce.cash1"}},[e._v("扣除销售额佣金（全款）")]),a("el-checkbox",{model:{value:e.reduce.cash4,callback:function(t){e.$set(e.reduce,"cash4",t)},expression:"reduce.cash4"}},[e._v("抽取保证金")])],1):e._e(),e.reduce.cash1?a("p",{staticClass:"line-item"},[a("label",[e._v("销售额佣金（全款）：")]),a("el-input",{attrs:{disabled:""},model:{value:e.cash.reduce1,callback:function(t){e.$set(e.cash,"reduce1",t)},expression:"cash.reduce1"}})],1):e._e(),e.reduce.cash4?a("p",{staticClass:"line-item"},[a("label",[e._v("抽取保证金：")]),a("el-input",{model:{value:e.cash.reduce4,callback:function(t){e.$set(e.cash,"reduce4",t)},expression:"cash.reduce4"}})],1):e._e(),a("p",{staticClass:"line-item"},[a("label",[e._v("现金结算金额（小写）：")]),a("el-input",{model:{value:e.cash_real_pay,callback:function(t){e.cash_real_pay=t},expression:"cash_real_pay"}}),e.reduce.cash1||e.reduce.cash4?e._e():[a("el-checkbox",{model:{value:e.reduce.cash1,callback:function(t){e.$set(e.reduce,"cash1",t)},expression:"reduce.cash1"}},[e._v("扣除销售额佣金（全款）")]),a("el-checkbox",{model:{value:e.reduce.cash4,callback:function(t){e.$set(e.reduce,"cash4",t)},expression:"reduce.cash4"}},[e._v("抽取保证金")])]],2),a("p",{staticClass:"line-item"},[a("label",[e._v("现金结算金额（大写）：")]),e._v(e._s(this.utils.getCapMoney(e.cash_real_pay)))])]:[[a("h3",[e._v("现金部分")]),e.reduce.cash1||e.reduce.cash2||e.reduce.cash3||e.reduce.cash4?a("p",{staticClass:"line-item"},[a("label",[e._v("结算金额（小写）：")]),e.isPreview?a("el-input",{attrs:{disabled:""},model:{value:e.edit_settleInfo.all_cash,callback:function(t){e.$set(e.edit_settleInfo,"all_cash",t)},expression:"edit_settleInfo.all_cash"}}):a("el-input",{attrs:{disabled:""},model:{value:e.real_cash,callback:function(t){e.real_cash=t},expression:"real_cash"}}),a("el-checkbox",{model:{value:e.reduce.cash1,callback:function(t){e.$set(e.reduce,"cash1",t)},expression:"reduce.cash1"}},[e._v("扣除佣金")]),a("el-checkbox",{model:{value:e.reduce.cash2,callback:function(t){e.$set(e.reduce,"cash2",t)},expression:"reduce.cash2"}},[e._v("扣除交易费用")]),a("el-checkbox",{model:{value:e.reduce.cash3,callback:function(t){e.$set(e.reduce,"cash3",t)},expression:"reduce.cash3"}},[e._v("扣除打款费用")]),a("el-checkbox",{model:{value:e.reduce.cash4,callback:function(t){e.$set(e.reduce,"cash4",t)},expression:"reduce.cash4"}},[e._v("抽取保证金")])],1):e._e(),e.reduce.cash1?a("p",{staticClass:"line-item"},[a("label",[e._v("扣除佣金：")]),a("el-input",{attrs:{disabled:""},model:{value:e.cash.reduce1,callback:function(t){e.$set(e.cash,"reduce1",t)},expression:"cash.reduce1"}})],1):e._e(),e.reduce.cash2?a("p",{staticClass:"line-item"},[a("label",[e._v("扣除交易费用：")]),a("el-input",{attrs:{disabled:""},model:{value:e.cash.reduce2,callback:function(t){e.$set(e.cash,"reduce2",t)},expression:"cash.reduce2"}})],1):e._e(),e.reduce.cash3?a("p",{staticClass:"line-item"},[a("label",[e._v("扣除打款费用：")]),a("el-input",{attrs:{disabled:""},model:{value:e.cash.reduce3,callback:function(t){e.$set(e.cash,"reduce3",t)},expression:"cash.reduce3"}})],1):e._e(),e.reduce.cash4?a("p",{staticClass:"line-item"},[a("label",[e._v("抽取保证金：")]),a("el-input",{model:{value:e.cash.reduce4,callback:function(t){e.$set(e.cash,"reduce4",t)},expression:"cash.reduce4"}})],1):e._e(),a("p",{staticClass:"line-item"},[a("label",[e._v("现金结算金额（小写）：")]),a("el-input",{model:{value:e.cash_real_pay,callback:function(t){e.cash_real_pay=t},expression:"cash_real_pay"}}),e.reduce.cash1||e.reduce.cash2||e.reduce.cash3||e.reduce.cash4?e._e():[a("el-checkbox",{model:{value:e.reduce.cash1,callback:function(t){e.$set(e.reduce,"cash1",t)},expression:"reduce.cash1"}},[e._v("扣除佣金")]),a("el-checkbox",{model:{value:e.reduce.cash2,callback:function(t){e.$set(e.reduce,"cash2",t)},expression:"reduce.cash2"}},[e._v("扣除交易费用")]),a("el-checkbox",{model:{value:e.reduce.cash3,callback:function(t){e.$set(e.reduce,"cash3",t)},expression:"reduce.cash3"}},[e._v("扣除打款费用")]),a("el-checkbox",{model:{value:e.reduce.cash4,callback:function(t){e.$set(e.reduce,"cash4",t)},expression:"reduce.cash4"}},[e._v("抽取保证金")])]],2),a("p",{staticClass:"line-item"},[a("label",[e._v("现金结算金额（大写）：")]),e._v(e._s(this.utils.getCapMoney(e.cash_real_pay))+"\n              ")])],1==e.cooperateType?[a("h3",[e._v("积分部分")]),e.reduce.huan1||e.reduce.huan2||e.reduce.huan3?a("p",{staticClass:"line-item"},[a("label",[e._v("结算金额（小写）：")]),e.isPreview?a("el-input",{attrs:{disabled:""},model:{value:e.edit_settleInfo.all_huanbi,callback:function(t){e.$set(e.edit_settleInfo,"all_huanbi",t)},expression:"edit_settleInfo.all_huanbi"}}):a("el-input",{attrs:{disabled:""},model:{value:e.real_huan,callback:function(t){e.real_huan=t},expression:"real_huan"}}),a("el-checkbox",{model:{value:e.reduce.huan1,callback:function(t){e.$set(e.reduce,"huan1",t)},expression:"reduce.huan1"}},[e._v("扣除佣金")]),a("el-checkbox",{model:{value:e.reduce.huan2,callback:function(t){e.$set(e.reduce,"huan2",t)},expression:"reduce.huan2"}},[e._v("扣除交易费用")]),a("el-checkbox",{model:{value:e.reduce.huan3,callback:function(t){e.$set(e.reduce,"huan3",t)},expression:"reduce.huan3"}},[e._v("扣除打款费用")])],1):e._e(),e.reduce.huan1?a("p",{staticClass:"line-item"},[a("label",[e._v("扣除佣金：")]),a("el-input",{attrs:{disabled:""},model:{value:e.huanbi.reduce1,callback:function(t){e.$set(e.huanbi,"reduce1",t)},expression:"huanbi.reduce1"}})],1):e._e(),e.reduce.huan2?a("p",{staticClass:"line-item"},[a("label",[e._v("扣除交易费用：")]),a("el-input",{attrs:{disabled:""},model:{value:e.huanbi.reduce2,callback:function(t){e.$set(e.huanbi,"reduce2",t)},expression:"huanbi.reduce2"}})],1):e._e(),e.reduce.huan3?a("p",{staticClass:"line-item"},[a("label",[e._v("扣除打款费用：")]),a("el-input",{attrs:{disabled:""},model:{value:e.huanbi.reduce3,callback:function(t){e.$set(e.huanbi,"reduce3",t)},expression:"huanbi.reduce3"}})],1):e._e(),a("p",{staticClass:"line-item"},[a("label",[e._v("积分结算金额（小写）：")]),a("el-input",{model:{value:e.huanbi_real_pay,callback:function(t){e.huanbi_real_pay=t},expression:"huanbi_real_pay"}}),e.reduce.huan1||e.reduce.huan2||e.reduce.huan3?e._e():[a("el-checkbox",{model:{value:e.reduce.huan1,callback:function(t){e.$set(e.reduce,"huan1",t)},expression:"reduce.huan1"}},[e._v("扣除佣金")]),a("el-checkbox",{model:{value:e.reduce.huan2,callback:function(t){e.$set(e.reduce,"huan2",t)},expression:"reduce.huan2"}},[e._v("扣除交易费用")]),a("el-checkbox",{model:{value:e.reduce.huan3,callback:function(t){e.$set(e.reduce,"huan3",t)},expression:"reduce.huan3"}},[e._v("扣除打款费用")])]],2),a("p",{staticClass:"line-item"},[a("label",[e._v("积分结算金额（大写）：")]),e._v(e._s(this.utils.getCapMoney(e.huanbi_real_pay))+"\n              ")])]:e._e()],a("p",{staticClass:"line-item"},[a("label",[e._v("备注：")]),a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.edit_settleInfo.create_log,callback:function(t){e.$set(e.edit_settleInfo,"create_log",t)},expression:"edit_settleInfo.create_log"}})],1)],2)]:[e.settleInfo.status<4&&("operater"===e.role||"all"===e.role)?a("el-button",{staticClass:"right",on:{click:e.edit}},[e._v("编辑")]):e._e(),a("h2",{staticClass:"t-center"},[e._v("对账单")]),a("p",{staticClass:"t-center"},[a("label",{staticStyle:{"margin-right":"20px"}},[e._v(" 打款单ID："+e._s(e.multi_statement_id)+" ")]),a("label",[e._v("\n            结算时间："+e._s(e._f("convertTime")(1e3*e.settleInfo.settlement_start))+"——"+e._s(e._f("convertTime")(1e3*e.settleInfo.settlement_end))+"\n          ")])]),a("div",{staticClass:"t-head"},[a("p",{staticClass:"line-item"},[a("label",[e._v("创建时间：")]),e._v(e._s(e._f("convertTime")(1e3*e.settleInfo.addtime)))]),a("p",{staticClass:"line-item"},[a("label",[e._v("收款单位：")]),e._v(e._s(e.settleInfo.pay_company))]),a("p",{staticClass:"line-item"},[a("label",[e._v("收款人：")]),e._v(e._s(e.settleInfo.payee))]),a("p",{staticClass:"line-item"},[e.settleInfo.remit_type===e.PAYTYPE.ALIPAY?a("label",[e._v("支付宝账号：")]):a("label",[e._v("银行账号：")]),e._v("\n            "+e._s(e.settleInfo.remit_account)+"\n          ")])]),a("div",{staticClass:"t-body"},[a("div",{staticClass:"clearfix"},[e.settleInfo.commission_type===e.COMMISSIONTYPE.SLAES?[a("div",{staticClass:"t-body-left"},[a("h2",[e._v("现金")]),a("p",[a("span",[e._v("待确认结算金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.all_cash_income-e.settleInfo.all_cash_expend)))])]),a("p",[a("span",[e._v("销售额佣金（全款）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.sales_service_fee)))])]),a("p",[a("span",[e._v("抽取保证金")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.bond)))])]),a("p",[a("span",[e._v("实际结算金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.cash_real_pay)))])]),a("p",[a("span",[e._v("金额（大写）")]),a("label",[e._v(e._s(this.utils.getCapMoney(e.settleInfo.cash_real_pay)))])])]),1==e.cooperateType?a("div",{staticClass:"t-body-right"},[a("h2",[e._v("积分")]),a("p",[a("span",[e._v("待确认金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.all_huanbi_income-e.settleInfo.all_huanbi_expend)))])]),a("p",[a("span",[e._v("实际结算金额 （小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.huanbi_real_pay)))])]),a("p",[a("span",[e._v("金额（大写）")]),a("label",[e._v(e._s(this.utils.getCapMoney(e.settleInfo.huanbi_real_pay)))])])]):e._e()]:[a("div",{staticClass:"t-body-left"},[a("h2",[e._v("现金")]),a("p",[a("span",[e._v("待确认结算金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.all_cash_income-e.settleInfo.all_cash_expend)))])]),a("p",[a("span",[e._v("扣除佣金（现金）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.cash_service_fee)))])]),a("p",[a("span",[e._v("扣除交易费用（现金）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.cash_income_fee)))])]),a("p",[a("span",[e._v("抽取保证金（现金）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.bond)))])]),a("p",[a("span",[e._v("扣除打款费用（现金）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.cash_remit_fee)))])]),a("p",[a("span",[e._v("实际结算金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.cash_real_pay)))])]),a("p",[a("span",[e._v("金额（大写）")]),a("label",[e._v(e._s(this.utils.getCapMoney(e.settleInfo.cash_real_pay)))])])]),1==e.cooperateType?a("div",{staticClass:"t-body-right"},[a("h2",[e._v("积分")]),a("p",[a("span",[e._v("待确认金额（小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.all_huanbi_income-e.settleInfo.all_huanbi_expend)))])]),a("p",[a("span",[e._v("扣除积分佣金（个）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.huanbi_service_fee)))])]),a("p",[a("span",[e._v("扣除积分交易费用（人）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.huanbi_income_fee)))])]),a("p",[a("span",[e._v("扣除积分打款费用（人）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.huanbi_remit_fee)))])]),a("p",[a("span",[e._v("实际结算金额 （小写）")]),a("label",[e._v(e._s(e.utils.formatMoney(e.settleInfo.huanbi_real_pay)))])]),a("p",[a("span",[e._v("金额（大写）")]),a("label",[e._v(e._s(this.utils.getCapMoney(e.settleInfo.huanbi_real_pay)))])])]):e._e()]],2),a("p",{staticStyle:{display:"block"}},[a("span",{staticStyle:{display:"inline-block",width:"150px"}},[e._v("备注")]),a("label",[e._v(e._s(e.settleInfo.create_log))])])])],a("div",{staticClass:"t-bottom clearfix"},[a("div",{staticClass:"t-bottom-left"},[e._v("待结算编号")]),a("p",{staticClass:"t-bottom-right"},[e.isPreview?e._l(e.settleInfo.statement_list,function(t,s){return a("span",{key:s},[e._v(e._s(t.statement_no))])}):e._l(e.settleInfo.statement_no,function(t,s){return a("span",{key:s},[e._v(e._s(t))])})],2)]),e.isEdit||3!=e.settleInfo.status||"finance"!==e.role&&"all"!==e.role?e._e():a("div",{staticStyle:{"text-align":"right"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.remit_log,callback:function(t){e.remit_log=t},expression:"remit_log"}}),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认打款")])],1)],2)])])},i=[],r=(a("097d"),a("be94")),n=a("fef7"),l=a("9d62"),o=a("2f62"),c=a("21a6"),u={name:"SettlementAdd",data(){return{PAYTYPE:n["f"],COMMISSIONTYPE:n["b"],multi_statement_id:this.$route.params.id?this.$route.params.id:"",isEdit:!0,isPreview:!0,cash_real_pay:0,huanbi_real_pay:0,edit_settleInfo:{},settleInfo:{},cash:{reduce1:0,reduce2:0,reduce3:0,reduce4:0},huanbi:{reduce1:0,reduce2:0,reduce3:0},reduce:{cash1:!1,cash2:!1,cash3:!1,cash4:!1,huan1:!1,huan2:!1,huan3:!1},remit_log:"",againEdit:this.$route.query.isedit||""}},created(){this.multi_statement_id?(this.isPreview=!1,this.isEdit=!1,this.getStatementInfo()):this.getPreviewInfo()},watch:{sub_settle_cash(e){this.cash_real_pay=e},sub_settle_huan(e){this.huanbi_real_pay=e}},computed:Object(r["a"])({},Object(o["c"])({suppliers_id:e=>e.suppliers.suppliers_id,preview:e=>e.suppliers.preview,stateIdList:e=>e.suppliers.stateIdList,bankList:e=>e.settle.bankList,role:e=>e.settle.role,cooperateType:e=>e.suppliers.cooperateType}),{title(){let e="";return 1==this.settleInfo.status||2==this.settleInfo.status?e="待商家确认":3==this.settleInfo.status?e="商家已确定，待打款":4==this.settleInfo.status&&(e="商家已确定，已打款"),e},real_cash(){return this.edit_settleInfo.all_cash_income-this.edit_settleInfo.all_cash_expend},real_huan(){return this.edit_settleInfo.all_huanbi_income-this.edit_settleInfo.all_huanbi_expend},sub_settle_cash(){let e=this.isPreview?this.edit_settleInfo.all_cash:this.real_cash;return this.reduce.cash1&&(e-=this.cash.reduce1),this.reduce.cash2&&(e-=this.cash.reduce2),this.reduce.cash3&&(e-=this.cash.reduce3),this.reduce.cash4&&(e-=this.cash.reduce4),e=this.utils.formatFloat(e,!0),e},sub_settle_huan(){let e=this.isPreview?this.edit_settleInfo.all_huanbi:this.real_huan;return this.reduce.huan1&&(e-=this.huanbi.reduce1),this.reduce.huan2&&(e-=this.huanbi.reduce2),this.reduce.huan3&&(e-=this.huanbi.reduce3),e=this.utils.formatFloat(e,!0),e},data(){let e={};return e["suppliers_statement_id"]=[...this.stateIdList],e["cash_real_pay"]=this.cash_real_pay,e["huanbi_real_pay"]=this.huanbi_real_pay,e["create_log"]=this.edit_settleInfo.create_log,this.edit_settleInfo.commission_type===n["b"].SLAES?(e["use_sales_service_fee"]=this.reduce.cash1?1:0,e["use_cash_service_fee"]=this.reduce.cash1?0:1):(e["use_sales_service_fee"]=this.reduce.cash1?0:1,e["use_cash_service_fee"]=this.reduce.cash1?1:0),e["use_cash_income_fee"]=this.reduce.cash2?1:0,e["use_cash_remit_fee"]=this.reduce.cash3?1:0,e["bond"]=this.reduce.cash4?this.cash.reduce4:0,e["use_huanbi_service_fee"]=this.reduce.huan1?1:0,e["use_huanbi_income_fee"]=this.reduce.huan2?1:0,e["use_huanbi_remit_fee"]=this.reduce.huan3?1:0,e},bondLimit(){let e=this.real_cash-this.cash.reduce1-this.cash.reduce2-this.cash.reduce3;return this.utils.formatFloat(e,!0)}}),methods:Object(r["a"])({},Object(o["b"])({saveCooperateType:"saveCooperateType"}),{getPreviewInfo(){this.settleInfo=this.preview,this.transCash(),this.transHuanbi(),this.edit_settleInfo=this.settleInfo},transCash(){if(this.settleInfo.commission_type===n["b"].SLAES){let e=this.isPreview?Number(this.settleInfo.all_cash)+Number(this.settleInfo.all_huanbi):Number(this.real_cash)+Number(this.real_huan);this.cash.reduce1=this.utils.formatFloat(e*this.settleInfo.sales_service_percent/100,!0)}else this.cash.reduce1=this.transCashItem(this.settleInfo.cash_service_percent),this.cash.reduce2=this.transCashItem(this.settleInfo.cash_income_percent),this.cash.reduce3=this.transCashLimit(this.settleInfo.cash_remit_percent)},transCashItem(e){let t=this.isPreview?this.settleInfo.all_cash:this.real_cash;return this.utils.formatFloat(t*e/100,!0)},transCashLimit(e){let t=this.isPreview?this.settleInfo.all_cash:this.real_cash;return t=t*e/100,this.settleInfo.remit_type===n["f"].BANK?(t<n["a"].BANK.MIN&&(t=n["a"].BANK.MIN),t>n["a"].BANK.MAX&&(t=n["a"].BANK.MAX)):(t<n["a"].ALIPAY.MIN&&(t=n["a"].ALIPAY.MIN),t>n["a"].ALIPAY.MAX&&(t=n["a"].ALIPAY.MAX)),this.utils.formatFloat(t,!0)},transHuanbi(){this.settleInfo.commission_type!==n["b"].SLAES&&(this.huanbi.reduce1=this.transHuanbiItem(this.settleInfo.huanbi_service_percent),this.huanbi.reduce2=this.transHuanbiItem(this.settleInfo.huanbi_income_percent),this.huanbi.reduce3=this.transHuanbiItem(this.settleInfo.huanbi_remit_percent))},transHuanbiItem(e){let t=this.isPreview?this.settleInfo.all_huanbi:this.real_huan;return this.utils.formatFloat(t*e/100,!0)},submit(){this.edit_settleInfo.create_log?this.edit_settleInfo.remit_account&&this.edit_settleInfo.pay_company&&this.edit_settleInfo.payee?this.cash.reduce4>this.bondLimit?this.$alert("现金结算金额不能为负数"):(this.data.suppliers_id=this.suppliers_id,Object(l["d"])(this.data).then(e=>{this.$alert(e.info),this.isPreview=!1,this.isEdit=!1,this.multi_statement_id=e.multi_statement_id,this.getStatementInfo()},e=>{this.$alert(e.errorMsg)})):this.$alert("未设置汇款信息","",{callback:()=>{this.$router.push({name:"SettleSetting"})}}):this.$alert("备注不能为空")},getStatementInfo(){Object(l["r"])(this.multi_statement_id).then(e=>{this.settleInfo=e,this.saveCooperateType(e.cooperate_type),this.againEdit&&(this.edit_settleInfo=this.settleInfo,this.transCash(),this.transHuanbi(),this.isEdit=!0)},e=>{console.log(e)})},editDone(){this.data.multi_statement_id=this.multi_statement_id,this.data.statement_no=this.settleInfo.statement_no,Object(l["x"])(this.data).then(e=>{this.$alert(e.info,"",{callback:()=>{this.goBack()}}),this.isEdit=!1,this.getStatementInfo()},e=>{this.$alert(e.errorMsg)})},exportSettlement(){const e=this.$loading({lock:!0,text:"下载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(l["f"])(this.multi_statement_id).then(e=>{const t=this.utils.formatDate("YYYY-MM-DD",(new Date).getTime());Object(c["saveAs"])(new Blob([e.data]),e.filename||this.settleInfo.pay_company+t+"汇总单.pdf")}).finally(()=>{e.close()})},edit(){this.edit_settleInfo=this.settleInfo,this.transCash(),this.transHuanbi(),this.isEdit=!0},goBack(){this.$router.go(-1)},cancel(){this.isPreview||this.againEdit?this.goBack():this.isEdit=!1},confirm(){this.remit_log?Object(l["b"])(this.multi_statement_id,this.remit_log).then(e=>{this.$alert(e.info),this.$root.reload()},e=>{this.$alert(e.errorMsg)}):this.$alert("请输入打款备注")},bankName(e){if(this.bankList.length){let t="";return this.bankList.forEach(a=>{if(a.short===e)return t=a.name,!1}),t}return e}})},p=u,m=(a("9677"),a("2877")),d=Object(m["a"])(p,s,i,!1,null,"c6a2c86c",null);t["default"]=d.exports},bba4:function(e,t,a){"use strict";var s=a("d02f"),i=a.n(s);i.a},bcaa:function(e,t,a){var s=a("cb7c"),i=a("d3f4"),r=a("a5b8");e.exports=function(e,t){if(s(e),i(t)&&t.constructor===e)return t;var a=r.f(e),n=a.resolve;return n(t),a.promise}},c0e0:function(e,t,a){"use strict";var s=a("9d5d"),i=a.n(s);i.a},c56f:function(e,t,a){"use strict";var s=a("1c4b"),i=a.n(s);i.a},c6a9:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"b",function(){return i}),a.d(t,"e",function(){return r}),a.d(t,"d",function(){return n}),a.d(t,"a",function(){return l});const s=[{name:"全部",id:"3"},{name:"未开始",id:"0"},{name:"进行中",id:"1"},{name:"已结束",id:"2"}],i=[{name:"现金红包",id:"1"},{name:"现金红包",id:"2"},{name:"优惠券",id:"3"}],r=[{name:"新用户",id:"1"},{name:"全部",id:"2"}],n=[{name:"指定商品",id:"1"},{name:"全部商品",id:"0"}],l=[{name:"全部",id:"-1"},{name:"返现冻结",id:"0"},{name:"返现到账",id:"1"},{name:"撤销返现",id:"2"}]},c819:function(e,t,a){"use strict";var s=a("92d2"),i=a.n(s);i.a},ccc5:function(e,t,a){"use strict";var s=a("db09"),i=a.n(s);i.a},ce70:function(e,t,a){"use strict";var s=a("df16"),i=a.n(s);i.a},d02f:function(e,t,a){},d2de:function(e,t,a){"use strict";var s=a("2065"),i=a.n(s);i.a},d38a:function(e,t,a){},d4c3:function(e,t,a){},d60a:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},d89d:function(e,t,a){"use strict";var s=a("f008"),i=a.n(s);i.a},db09:function(e,t,a){},df16:function(e,t,a){},df6d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"对账单列表"}}),a("section",{staticClass:"search-wrapper"},[a("el-form",{attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"对账单状态"}},[a("el-select",{staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:""},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},e._l(e.statusList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})}),1)],1),"supplier"!==e.role?a("el-form-item",{attrs:{label:"商家名称"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入商家名称"},model:{value:e.params.suppliers_name,callback:function(t){e.$set(e.params,"suppliers_name",t)},expression:"params.suppliers_name"}})],1):e._e()],1),a("el-form",[a("el-form-item",{attrs:{label:"对账单生成时间"}},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{placeholder:"开始时间",type:"date","value-format":"timestamp"},model:{value:e.params.addtime,callback:function(t){e.$set(e.params,"addtime",t)},expression:"params.addtime"}}),e._v("\n        -\n        "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{placeholder:"结束时间",type:"date","value-format":"timestamp"},model:{value:e.params.endtime,callback:function(t){e.$set(e.params,"endtime",t)},expression:"params.endtime"}}),a("div",{staticClass:"radio-wrapper"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.selecttime},model:{value:e.timeselect,callback:function(t){e.timeselect=t},expression:"timeselect"}},e._l(e.timelist,function(t,s){return a("el-radio-button",{key:s,attrs:{label:t.value}},[e._v("\n              "+e._s(t.name)+"\n            ")])}),1)],1)],1),[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),a("el-button",{on:{click:e.clear}},[e._v("清空筛选条件")])]],2)],1),a("section",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"multi_statement_id",label:"对账ID"}}),"supplier"!==e.role?a("el-table-column",{attrs:{prop:"suppliers_name",label:"商家名称"}}):e._e(),a("el-table-column",{attrs:{prop:"addtime",label:"对账单生成时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"cash_real_pay",label:"实际现金结算金额"}}),1==e.cooperateType?a("el-table-column",{attrs:{prop:"huanbi_real_pay",label:"实际积分结算金额"}}):e._e(),a("el-table-column",{attrs:{prop:"",label:"结算时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.dateFormatCol(t.row.settlement_start))+" --- "),a("br"),e._v(e._s(e.dateFormatCol(t.row.settlement_end))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"对账单状态",formatter:e.fmtStatus}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.viewDetail(t.row.multi_statement_id)}}},[e._v("查看")])]}}])})],1),a("el-pagination",{attrs:{background:"","current-page":e.params.page,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],r=(a("097d"),a("6b54"),a("be94")),n=a("9d62"),l=a("fef7"),o=a("2f62"),c={name:"WaitSettle",data(){return{params:{page:1,size:10},statusList:l["g"],params:{addtime:"",endtime:"",suppliers_name:"",status:"",page:1,size:10},timeselect:"",timelist:l["k"],list:[],total:0,isLoading:!1}},computed:Object(r["a"])({},Object(o["c"])({role:e=>e.settle.role,cooperateType:e=>e.suppliers.cooperateType}),{fmtParams(){let e=JSON.parse(JSON.stringify(this.params));return e.addtime.toString().length>10&&(e.addtime=parseInt(e.addtime/1e3)),e.endtime.toString().length>10&&(e.endtime=parseInt(e.endtime/1e3)),e}}),created(){this.getSettleList(),this.getRole()},methods:Object(r["a"])({},Object(o["b"])({saveRole:"saveRole",saveCooperateType:"saveCooperateType"}),{getRole(){Object(n["o"])().then(e=>{this.saveRole(e.role),e.cooperate_type&&this.saveCooperateType(e.cooperate_type)})},getSettleList(){this.isLoading=!0,Object(n["q"])(this.fmtParams).then(e=>{this.list=e.list,this.total=e.paged.total}).finally(()=>{this.isLoading=!1})},selecttime(e){let t,a=(new Date).getTime(),s=new Date((new Date).toLocaleDateString()).getTime(),i=new Date((new Date).toLocaleDateString()).getTime()-864e5,r=new Date((new Date).toLocaleDateString()).getTime()-6048e5,n=new Date((new Date).toLocaleDateString()).getTime()-2592e6,l=a;e?1===e?(t=i,l=s-1):7===e?t=r:30===e&&(t=n):t=s,this.params.addtime=t,this.params.endtime=l,this.getStateList()},search(){this.params.page=1,this.getSettleList()},clear(){this.timeselect="";for(let e in this.params)this.params[e]="";this.params.page=1,this.params.size=10,this.getSettleList()},dateFormat(e,t){let a=e[t.property];return this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a)},dateFormatCol(e){return this.utils.formatDate("YYYY-MM-DD",1e3*e)},fmtStatus(e,t,a){let s="";return this.statusList.forEach(e=>{e.value==a&&(s=e.name)}),s},viewDetail(e){this.role&&this.$router.push({name:"waitConfirm",query:{id:e}})},handleCurrentChange(e){this.params.page=e,this.getSettleList()}})},u=c,p=(a("bba4"),a("2877")),m=Object(p["a"])(u,s,i,!1,null,"5d64d8ec",null);t["default"]=m.exports},e350:function(e,t,a){},e769:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v(e._s(e.name)+"平台")]),a("el-breadcrumb-item",[e._v("代付明细")])],1)],1),a("div",{staticClass:"search-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchParams}},[a("el-form-item",{attrs:{label:"订单号"}},[a("el-input",{attrs:{placeholder:"订单号"},model:{value:e.searchParams.orderId,callback:function(t){e.$set(e.searchParams,"orderId",t)},expression:"searchParams.orderId"}})],1),a("el-form-item",{attrs:{label:"出借人"}},[a("el-input",{attrs:{placeholder:"出借人或手机号"},model:{value:e.searchParams.nameOrMobile,callback:function(t){e.$set(e.searchParams,"nameOrMobile",t)},expression:"searchParams.nameOrMobile"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{on:{click:e.clear}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"createdAt",label:"时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"userName",label:"出借人"}}),a("el-table-column",{attrs:{prop:"mobilePhone",label:"手机号"}}),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),a("el-table-column",{attrs:{prop:"changeToken",label:"代付数额"}})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.searchParams.limit,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)},i=[],r={name:"PayDetails",data(){let e=localStorage.getItem("partnerName");return{name:e,total:0,currentPage:1,searchParams:{page:1,limit:10,orderId:"",nameOrMobile:""},list:[]}},methods:{getList(){this.replaceDatas(this.searchParams),this.$api.post("hd/itzUserTokenLog/prepare_detail",this.searchParams,e=>{200==e.status&&(this.list=e.data.rows,this.total=e.data.total)})},replaceDatas(e){for(let t in e)""!=e[t]&&null!=e[t]||delete e[t]},handleCurrentChange(e){this.searchParams.page=e,this.getList()},clear(){this.searchParams.page=1,this.searchParams.size=10,this.searchParams.nameOrMobile="",this.searchParams.orderId="",this.getList()},search(){this.searchParams.page=1,this.getList()},dateFormat:function(e,t,a){return this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a)}},created(){this.getList()}},n=r,l=(a("90f8"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"253367d1",null);t["default"]=o.exports},e8ae:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("优惠券")]),a("el-breadcrumb-item",[e._v("新建优惠券")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.newCouponLoading,expression:"newCouponLoading"}],staticClass:"list-wrapper"},[a("el-form",{ref:"newCouponData",attrs:{"label-position":"center",model:e.newCouponData,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"优惠券名称：",prop:"couponName"}},[a("el-input",{staticStyle:{width:"30%"},attrs:{type:"text",placeholder:"优惠券名称"},on:{input:function(t){return e.checkTel("coupon",t)}},model:{value:e.newCouponData.couponName,callback:function(t){e.$set(e.newCouponData,"couponName","string"===typeof t?t.trim():t)},expression:"newCouponData.couponName"}})],1),a("el-form-item",{attrs:{label:"发放总量：",prop:"totalCount"}},[a("el-input",{staticStyle:{width:"30%"},attrs:{type:"text",placeholder:"发放数量"},on:{input:function(t){return e.checkTel("amount",t)}},model:{value:e.newCouponData.totalCount,callback:function(t){e.$set(e.newCouponData,"totalCount","string"===typeof t?t.trim():t)},expression:"newCouponData.totalCount"}})],1),a("el-form-item",{attrs:{label:"使用门槛：",prop:"thresholdType"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.newCouponData.thresholdType,callback:function(t){e.$set(e.newCouponData,"thresholdType",t)},expression:"newCouponData.thresholdType"}},[a("el-radio",{attrs:{label:0}},[e._v("无门槛")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-radio",{attrs:{label:1}},[e._v("订单满")])],1)],1),1==e.newCouponData.thresholdType?a("el-form-item",{staticClass:"left_flex",attrs:{prop:"thresholdAmount"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"text",placeholder:"金额( 0.1-999999.99 )"},on:{input:function(t){return e.checkTel("reduction",t)}},model:{value:e.newCouponData.thresholdAmount,callback:function(t){e.$set(e.newCouponData,"thresholdAmount","string"===typeof t?t.trim():t)},expression:"newCouponData.thresholdAmount"}}),e._v("\n          元")],1):e._e()],1),a("el-form-item",{attrs:{label:"优惠内容：",prop:"preferentialAmount"}},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("减")]),a("el-input",{staticStyle:{width:"120px"},attrs:{type:"text",placeholder:"金额(元)"},on:{input:function(t){return e.checkTel("couponPro",t)}},model:{value:e.newCouponData.preferentialAmount,callback:function(t){e.$set(e.newCouponData,"preferentialAmount","string"===typeof t?t.trim():t)},expression:"newCouponData.preferentialAmount"}}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("元")])],1),a("el-form-item",{attrs:{label:"有效期：",prop:"order_valid",required:""}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.newCouponData.order_valid,callback:function(t){e.$set(e.newCouponData,"order_valid",t)},expression:"newCouponData.order_valid"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-radio",{attrs:{label:0}},[e._v("选日期")]),0==e.newCouponData.order_valid?a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"time_value"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.optTime},model:{value:e.time_value,callback:function(t){e.time_value=t},expression:"time_value"}})],1):e._e()],1),a("div",{staticClass:"coup_time"},[a("el-radio",{attrs:{label:2}},[e._v("领劵后")]),2==e.newCouponData.order_valid?a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"periodType"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{type:"text",placeholder:"1-999"},on:{input:function(t){return e.checkTel("timeDay",t)}},model:{value:e.newCouponData.periodType,callback:function(t){e.$set(e.newCouponData,"periodType","string"===typeof t?t.trim():t)},expression:"newCouponData.periodType"}})],1):e._e()],1)]),2==e.newCouponData.order_valid?a("div",{staticClass:"left_flex",staticStyle:{"vertical-align":"bottom","margin-left":"10px"}},[e._v("\n          天\n        ")]):e._e()],1),a("el-form-item",{attrs:{label:"适用商品：",prop:"applicableGoods"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.newCouponData.applicableGoods,callback:function(t){e.$set(e.newCouponData,"applicableGoods",t)},expression:"newCouponData.applicableGoods"}},[a("div",{staticClass:"coup_time"},[a("el-radio",{attrs:{label:2}},[e._v("指定商品")]),a("el-button",{staticClass:"input-box",attrs:{type:"primary",size:"small"}},[e._v("\n              批量导入商品\n              "),a("input",{ref:"referenceUpload",attrs:{type:"file"},on:{change:function(t){return e.ossUpload(t)}}})])],1)]),a("div",{staticStyle:{"margin-left":"100px"}},[a("el-button",{staticClass:"input-box",attrs:{type:"text",size:"small"}},[a("a",{attrs:{href:e.down}},[e._v("下载模板")])])],1),a("div",{staticClass:"add-online"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogTableVisible=!0,e.goodsType=!1}}},[e._v("批量添加商品")]),a("span",{staticClass:"goods-in"},[e._v("已添加商品：")]),a("span",{staticStyle:{color:"#41a5e1",cursor:"pointer"},on:{click:function(t){e.dialogTableVisible=!0,e.goodsType=!0}}},[e._v(e._s(e.addAmount))])],1)],1),a("el-form-item",{attrs:{label:"领取人：",prop:"targetUsers"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.newCouponData.targetUsers,callback:function(t){e.$set(e.newCouponData,"targetUsers",t)},expression:"newCouponData.targetUsers"}},[a("el-radio",{attrs:{label:1}},[e._v("全部")]),a("el-radio",{attrs:{label:2}},[e._v("新用户")])],1)],1),a("el-form-item",{attrs:{label:"领取限制：",prop:"order_number"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.newCouponData.order_number,callback:function(t){e.$set(e.newCouponData,"order_number",t)},expression:"newCouponData.order_number"}},[a("el-radio",{attrs:{label:-1}},[e._v("不限")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-radio",{attrs:{label:2}},[e._v("次数")]),2==e.newCouponData.order_number?a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"receiveLimit"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{type:"text",placeholder:"1-99"},on:{input:function(t){return e.checkTel("receive",t)}},model:{value:e.newCouponData.receiveLimit,callback:function(t){e.$set(e.newCouponData,"receiveLimit","string"===typeof t?t.trim():t)},expression:"newCouponData.receiveLimit"}})],1):e._e()],1)],1)],1),a("el-form-item",{attrs:{label:"使用说明：",prop:"useDescription"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",maxlength:"60"},model:{value:e.newCouponData.useDescription,callback:function(t){e.$set(e.newCouponData,"useDescription",t)},expression:"newCouponData.useDescription"}})],1),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",maxlength:"60"},model:{value:e.newCouponData.remarks,callback:function(t){e.$set(e.newCouponData,"remarks",t)},expression:"newCouponData.remarks"}})],1),a("div",{staticStyle:{width:"80%",margin:"0 auto","text-align":"center"}},[a("el-button",{staticStyle:{margin:"0 20px"},on:{click:function(t){return e.resetForm("newCouponData")}}},[e._v("取消")]),a("el-button",{staticStyle:{margin:"0 20px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("newCouponData")}}},[e._v("确认")])],1)],1)],1),a("el-dialog",{attrs:{title:"商品列表",visible:e.dialogTableVisible,width:"90%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[e.dialogTableVisible?a("goods-online",{attrs:{isdisabled:e.goodsType,couponid:e.newCouponData.id},on:{"add-goods":e.addGoodsOnline}}):e._e()],1)],1)},i=[],r=(a("a481"),a("91bd")),n=a("ccd9"),l={name:"newCoupon",components:{goodsOnline:r["a"]},data(){let e=(e,t,a)=>{null==this.time_value?a(new Error("请选择有效期限")):a()};return{newCoupon:!1,newCouponData:{id:"",couponName:"",totalCount:"",thresholdAmount:"",preferentialAmount:"",order_valid:0,periodType:"",periodStartTime:"",periodEndTime:"",applicableGoods:2,targetUsers:1,receiveLimit:"",useDescription:"",remarks:"",instructions:"0",thresholdType:0,order_number:-1},rules:{couponName:[{required:!0,message:"请输入优惠券名称！",trigger:"blur"},{min:3,max:15,message:"长度3~15个字符",trigger:"blur"}],totalCount:{required:!0,message:"请输入0-99999999整数！",trigger:"blur"},thresholdType:{required:!0,message:"请选择使用条件！",trigger:"change"},preferentialAmount:{required:!0,message:"请输入0.1-999999.99的数字",trigger:"blur"},time_value:{validator:e,trigger:"blur"},periodType:{required:!0,message:"请选择失效天数！",trigger:"blur"},thresholdAmount:{required:!0,message:"请填写满减金额！",trigger:"blur"},receiveLimit:{required:!0,message:"请填写次数！",trigger:"blur"},applicableGoods:{required:!0,message:"请选择适用商品！",trigger:"change"},targetUsers:{required:!0,message:"请选择领券人！",trigger:"change"},order_number:{required:!0,message:"请选择领取限制！",trigger:"change"},useDescription:{required:!0,message:"请填写使用说明！",trigger:"blur"}},newCouponLoading:!1,isShowAdem:!0,down:"#",time_value:null,addAmount:0,dialogTableVisible:!1,goodsType:!1}},methods:{addGoodsOnline(e){this.$message.success(e),this.dialogTableVisible=!1,this.getAmount()},getAmount(){this.$api.get("hd/itzCouponGoods/page/list",{couponId:this.newCouponData.id,page:1,limit:10},e=>{200==e.status&&(this.addAmount=e.data.total)})},getList(){this.$api.post("hd/itzCoupon/to",{},e=>{200==e.status&&(this.newCouponData.id=e.data)})},checkTel(e,t){"coupon"==e?this.newCouponData.couponName=this.utils.checkTel("15",t):"amount"==e?this.newCouponData.totalCount=this.utils.checkTel("8",t).replace(/[^\d]+/g,""):"reduction"==e?this.newCouponData.thresholdAmount=this.utils.checkTel("9",t).replace(/^\D*([1-9]\d*\.?\d{0,2})?.*$/,"$1"):"couponPro"==e?this.newCouponData.preferentialAmount=this.utils.checkTel("9",t).replace(/^\D*([1-9]\d*\.?\d{0,2})?.*$/,"$1"):"timeDay"==e?this.newCouponData.periodType=this.utils.checkTel("3",t).replace(/[^\d]+/g,""):"receive"==e&&(this.newCouponData.receiveLimit=this.utils.checkTel("2",t).replace(/[^\d]+/g,""))},optTime(){let e=this.time_value?this.time_value:[];e.length>0?(this.newCouponData.periodStartTime=this.utils.format_date(e[0],"-1")/1e3,this.newCouponData.periodEndTime=this.utils.format_date(e[1],"-1")/1e3):(this.newCouponData.periodStartTime="",this.newCouponData.periodEndTime="")},submit(e){0==this.newCouponData.thresholdType&&(this.newCouponData.thresholdAmount=""),2==this.newCouponData.order_valid?(this.newCouponData.periodStartTime=parseInt((new Date).getTime()/1e3),this.newCouponData.periodEndTime=0):0==this.newCouponData.order_valid&&(this.newCouponData.periodType=0),-1==this.newCouponData.order_number&&(this.newCouponData.receiveLimit=-1),this.newCouponLoading=!0,this.$api.put("hd/itzCoupon/"+this.newCouponData.id,this.newCouponData,e=>{200===e.status&&(this.newCoupon=!1,this.newCouponLoading=!1,this.$message.success("添加成功！"),setTimeout(()=>{this.$router.push({name:"couponList"})},2e3))},e=>{this.$message.error(e),this.newCouponLoading=!1})},submitForm(e){this.$refs[e].validate(e=>{return e?2==this.newCouponData.applicableGoods&&0==this.addAmount?(this.$message.error("请添加商品！"),!1):void this.submit():(console.log("error submit!!"),!1)})},resetForm(e){this.newCoupon=!1,this.$refs[e].resetFields(),this.$router.push({name:"couponList"})},ossUpload(e){let t=this,a=e.target.files;for(let i of a)if(i.name&&-1==i.name.indexOf(".csv"))return t.$message.error("请上传 .CSV 文件"),!1;t.online_loading=!0;let s=new FormData;s.append("goodsFile",a[0]),s.append("id",this.newCouponData.id),t.newCouponLoading=!0,t.$api.post("hd/itzCoupon/goods/csv",s,e=>{200===e.status&&(t.newCouponLoading=!1,t.$message.success("文件上传成功！"),t.$refs.referenceUpload.value=null,t.getAmount())},e=>{console.log(e),t.newCouponLoading=!1})}},created(){this.getList();for(let e in n["a"])"hd/"==n["a"][e].key&&(this.down=n["a"][e].val+"/coupon-template(GBK).csv")}},o=l,c=(a("3784"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"71b07e5b",null);t["default"]=u.exports},ebbc:function(e,t,a){"use strict";var s=a("9009"),i=a.n(s);i.a},f008:function(e,t,a){},f01a:function(e,t,a){"use strict";var s=a("a60e"),i=a.n(s);i.a},f0ef:function(e,t,a){},f4a3:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"出借人列表"}}),a("div",{staticClass:"button-wrapper"}),a("div",{staticClass:"search-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"网贷平台名称"}},[a("el-input",{attrs:{placeholder:"网贷平台名称"},model:{value:e.params.platformName,callback:function(t){e.$set(e.params,"platformName",t)},expression:"params.platformName"}})],1),a("el-form-item",{attrs:{label:"出借人名称"}},[a("el-input",{attrs:{placeholder:"出借人名称"},model:{value:e.params.userName,callback:function(t){e.$set(e.params,"userName",t)},expression:"params.userName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getlenderList()}}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:function(t){return e.clear()}}},[e._v("清空")])],1)],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.lebder_loading,expression:"lebder_loading"}],staticStyle:{width:"100%"},attrs:{data:e.lebderArr,stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),a("el-table-column",{attrs:{prop:"mobilePhone",label:"手机号"}}),a("el-table-column",{attrs:{prop:"partnerName",label:"网贷平台"}}),a("el-table-column",{attrs:{prop:"totalToken",label:"代付额度"}}),a("el-table-column",{attrs:{prop:"useToken",label:"已代付数额"}}),a("el-table-column",{attrs:{prop:"token",label:"剩余额度"}}),a("el-table-column",{attrs:{prop:"",label:"导入时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utils.format_date(t.row.createTime)))])]}}])})],1)],1),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.params.limit,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)},i=[],r=(a("a481"),{name:"RetailActivityList",data(){return{lebder_loading:!1,lebderArr:[],currentPage:1,params:{platformName:"",userName:"",page:1,limit:10},total:0,addPlatform_loading:!1,addPlatform:!1}},created(){this.params.platformName=this.$route.params.partners,this.getlenderList()},methods:{replaceDatas(e){for(let t in e)""!=e[t]&&null!=e[t]||delete e[t]},getlenderList(){this.lebder_loading=!0,this.replaceDatas(this.params);let e=JSON.stringify(this.params).replace(/:/g,"=").replace("{","").replace("}","").replace(/,/g,"&").replace(/"/g,"").replace(/\s+/g,"");this.$api.get("hd/itzPartnerUser/page/list?"+e,null,e=>{console.log(e.data),200===e.status&&(this.lebderArr=e.data.rows,this.total=e.data.total,this.lebder_loading=!1)})},handleCurrentChange(e){this.params.page=e,this.getlenderList()},clear(){this.params={platformName:"",userName:"",page:1,limit:10},this.getlenderList()}},watch:{addPlatform(e){!1!==e&&"false"!==e||console.log("重置add_Platform")}}}),n=r,l=(a("2123"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"6e2fa731",null);t["default"]=o.exports},fef7:function(e,t,a){"use strict";a.d(t,"j",function(){return s}),a.d(t,"i",function(){return i}),a.d(t,"k",function(){return r}),a.d(t,"f",function(){return n}),a.d(t,"b",function(){return l}),a.d(t,"a",function(){return o}),a.d(t,"c",function(){return c}),a.d(t,"e",function(){return u}),a.d(t,"d",function(){return p}),a.d(t,"g",function(){return m}),a.d(t,"h",function(){return d});const s=["","待确认","","已确认","已打款"],i={UNCONFIRM:1,UNREMIT:3,HADREMIT:4},r=(i.UNCONFIRM,i.UNREMIT,i.HADREMIT,[{name:"今",value:0},{name:"昨",value:1},{name:"近7天",value:7},{name:"近30天",value:30}]),n={ALIPAY:1,BANK:2},l={SLAES:1,CASHHUAN:2},o={ALIPAY:{MIN:2,MAX:25},BANK:{MIN:1,MAX:25}},c={COR_RESIDENT:1,COR_SUPPLIERS:2},u={1:"结算",0:"不结算"},p={SETTLEMENT:1,UNSETTLEMENT:0},m=[{name:"待运营确认",value:1},{name:"待商家确认",value:2},{name:"待财务确认",value:3},{name:"已完成",value:4}],d=[{name:"待打款",value:1},{name:"已完成",value:2}]}}]);
//# sourceMappingURL=Settle.16c1f8c2.js.map