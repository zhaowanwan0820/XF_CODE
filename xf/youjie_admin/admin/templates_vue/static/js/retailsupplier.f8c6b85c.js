(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["retailsupplier"],{2360:function(t,e,a){"use strict";var s=a("9484"),o=a.n(s);o.a},3391:function(t,e,a){},9484:function(t,e,a){},"94e5":function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return o});new Date;const s=[{name:"待审核",id:0},{name:"已拒绝",id:2},{name:"已停用",id:3},{name:"未开始",id:5},{name:"进行中",id:6},{name:"已结束",id:7}],o=[{id:1,name:"retailing",label:"分销中"},{id:0,name:"removed",label:"已移除"}]},aaff:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"分销商品列表"}}),a("div",{staticClass:"button-wrapper"},[a("el-upload",{staticClass:"uploadfil",attrs:{action:t.Upload,"on-success":t.getfilelist,"show-file-list":!1,accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}},[a("el-button",{attrs:{type:"primary"}},[t._v("添加新商品")])],1),a("el-button",{attrs:{type:"primary"},on:{click:t.downLoad}},[t._v("导出")])],1),a("div",{staticClass:"search-wrapper"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick}},t._l(t.retailState,function(e){return a("el-tab-pane",{key:e.id,attrs:{label:e.label}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[a("el-form-item",{attrs:{label:"商品编号"}},[a("el-input",{attrs:{placeholder:"商品编号",clearable:""},model:{value:t.params.goodsId,callback:function(e){t.$set(t.params,"goodsId",e)},expression:"params.goodsId"}})],1),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{placeholder:"商品名称",clearable:""},model:{value:t.params.goodsName,callback:function(e){t.$set(t.params,"goodsName",e)},expression:"params.goodsName"}})],1),a("el-form-item",{attrs:{label:"商家"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入内容",clearable:""},model:{value:t.params.supplier,callback:function(e){t.$set(t.params,"supplier",e)},expression:"params.supplier"}})],1),a("el-form-item",{attrs:{label:"SPU货号"}},[a("el-input",{attrs:{placeholder:"SPU货号",clearable:""},model:{value:t.params.spu,callback:function(e){t.$set(t.params,"spu",e)},expression:"params.spu"}})],1),a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{placeholder:"活动名称",clearable:""},model:{value:t.params.actName,callback:function(e){t.$set(t.params,"actName",e)},expression:"params.actName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-left"},on:{click:t.clear}},[t._v("清空")])],1)],1),a("div",{staticClass:"list-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.retailsupplier_list,"header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"goodsId",label:"商品编码",width:"50"}}),a("el-table-column",{attrs:{prop:"spu",label:"SPU货号"}}),a("el-table-column",{attrs:{label:"商品图"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{"v-show":t.row.goodsPic,src:t.row.goodsPic,width:"50",height:"50"}})]}}],null,!0)}),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"createdAt",label:"分销底价设置时间",formatter:t.dateFormat}}),a("el-table-column",{attrs:{label:"本店售价/积分价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.ourShopPrice))]),a("span",[t._v("Ⓗ "+t._s(e.row.ourShopCoin))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"分销底价/积分价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.realShopPrice))]),a("span",[t._v("Ⓗ "+t._s(e.row.distributionCoin))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"+￥+Ⓗ"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.differencePrice))]),a("span",[t._v("Ⓗ "+t._s(e.row.differenceCoin))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"运营底价/积分价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.shopPrice))]),a("span",[t._v("Ⓗ "+t._s(e.row.operationCoin))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"列表推荐排序值",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击修改内容",placement:"bottom"}},[a("span",{attrs:{id:e.row.goodsId+"as"},on:{click:function(a){return t.changeNum(e.row.goodsId+"a")}}},[t._v(t._s(e.row.listRecommendSort))])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.listRecommendSort,expression:"scope.row.listRecommendSort"}],staticClass:"nums",attrs:{id:e.row.goodsId+"a",type:"text"},domProps:{value:e.row.listRecommendSort},on:{blur:function(a){return t.saveNum(e.row.goodsId+"a",e.row.goodsId,e.row.listRecommendSort,"listRecommendSort")},input:function(a){a.target.composing||t.$set(e.row,"listRecommendSort",a.target.value)}}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"分类推荐排序值",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击修改内容",placement:"bottom"}},[a("span",{attrs:{id:e.row.goodsId+"bs"},on:{click:function(a){return t.changeNum(e.row.goodsId+"b")}}},[t._v(t._s(e.row.categoryRecommendSort))])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.categoryRecommendSort,expression:"scope.row.categoryRecommendSort"}],staticClass:"nums",attrs:{id:e.row.goodsId+"b",type:"text"},domProps:{value:e.row.categoryRecommendSort},on:{blur:function(a){return t.saveNum(e.row.goodsId+"b",e.row.goodsId,e.row.categoryRecommendSort,"categoryRecommendSort")},input:function(a){a.target.composing||t.$set(e.row,"categoryRecommendSort",a.target.value)}}})]}}],null,!0)}),a("el-table-column",{attrs:{prop:"actName",label:"活动名称"}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",formatter:t.dateFormat}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",formatter:t.dateFormat}}),a("el-table-column",{attrs:{label:"活动运营底价/积分价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.actOperationPrice))]),a("span",[t._v("Ⓗ "+t._s(e.row.actOperationCoin))])]}}],null,!0)}),a("el-table-column",{attrs:{prop:"newcomerCommission",label:"拉新奖励",width:"50",formatter:t.Moneyico}}),a("el-table-column",{attrs:{prop:"activityCommission",label:"活动奖励",width:"50",formatter:t.Moneyico}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.dialogshow(e.row.goodsId,e.row.isOnSale)}}},[t._v(t._s(t.buttonName(e.row.isOnSale)))]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.pricehistory(e.row.goodsId)}}},[t._v("历史调价")])]}}],null,!0)})],1)],1),a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.params.pageSize,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)}),1)],1),a("el-dialog",{staticClass:"retails",attrs:{title:"确认加入分销返佣",visible:t.dialogVisibleAdd,"show-close":!1,center:""},on:{"update:visible":function(e){t.dialogVisibleAdd=e}}},[a("span",{staticClass:"message"},[t._v("确定要加入商品吗？ "),a("br"),t._v("\n      加入后分销返佣专区中将展示该商品")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleAdd=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.changelist(t.goodIds,1)}}},[t._v("确 定")])],1)]),a("el-dialog",{staticClass:"retails",attrs:{title:"确认移除分销返佣",visible:t.dialogVisibleRemove,"show-close":!1},on:{"update:visible":function(e){t.dialogVisibleRemove=e}}},[a("span",{staticClass:"message"},[t._v("确定要移除该商品吗？"),a("br"),t._v("移除后分销返佣专区中将不再暂时该商品 "),a("br"),t._v("已经分享出去的分销商品链接将失效\n    ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleRemove=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.changelist(t.goodIds,0)}}},[t._v("确 定")])],1)])],1)},o=[],l=(a("a481"),a("94e5")),r=(a("90a2"),{name:"RetailSupplierList",data(){return{retailsupplier_list:[],currentPage:1,retailState:l["b"],params:{pageNumber:1,pageSize:10,isOnSale:"1",goodsId:"",spu:"",goodsName:"",actName:"",supplier:""},total:0,dialogVisibleRemove:!1,dialogVisibleAdd:!1,Upload:"https://docker.youjiemall.com/mlm/goods/list/excel",dataurl:"",goodIds:"",restaurants:[]}},created(){this.getList()},mounted(){this.restaurants=this.getSer()},methods:{downLoad(){let t=document.createElement("a");t.href=this.Upload,t.click()},search(){this.params.pageNumber=1,this.getList()},getSer(){this.$api.get(this.dataurl+"/wo/merchant/userType",null,t=>{if(1==t.code){var e=[];t.data.suppliersList.forEach(function(t){let a={};a["value"]=t.suppliersName,e.push(a)}),this.restaurants=e}else this.$message.error(t.msg)})},getList(){this.replaceDatas(this.params);let t=JSON.stringify(this.params).replace(/:/g,"=").replace("{","").replace("}","").replace(/,/g,"&").replace(/"/g,"").replace(/\s+/g,"");this.$api.get(this.dataurl+"/mlm/goods/list?"+t,null,t=>{1==t.code?(this.retailsupplier_list=t.data.goodsMlmList,this.total=t.data.totalElements):(this.list={},this.$message.error(t.msg))})},replaceDatas(t){for(let e in t)""!=t[e]&&null!=t[e]||delete t[e]},handleClick(t){this.clear(),this.retailsupplier_list.length=[],"0"==t.index?this.params.isOnSale="1":this.params.isOnSale="0",console.log(this.params.isOnSale),this.getList()},dialogshow(t,e){this.goodIds=t,0==e?this.dialogVisibleAdd=!0:this.dialogVisibleRemove=!0},changelist(t,e){this.dialogVisibleAdd=!1,this.dialogVisibleRemove=!1,this.$api.put(this.dataurl+"/mlm/goods/"+t+"/is-on-sale?isOnSale="+e,null,t=>{1==t.code?this.getList():this.$message.error(t.msg)})},handleCurrentChange(t){this.params.pageNumber=t,this.getList()},dateFormat:function(t,e){let a=t[e.property];return a?this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a):a},Moneyico:function(t,e){let a=t[e.property];return a?"￥"+a:""},clear(){this.params.pageNumber=1,this.params.pageSize=10,this.params.goodsId="",this.params.spu="",this.params.goodsName="",this.params.actName="",this.params.supplier=""},pricehistory(t){let e=this.retailsupplier_list.findIndex(e=>e.goodsId==t);localStorage.setItem("msg",JSON.stringify(this.retailsupplier_list[e])),this.$router.push({name:"PriceHistory",params:{id:t}})},buttonName(t){return 0==t?"加入":"移除"},changeNum(t){$("#"+t).show(),$("#"+t+"s").hide()},saveNum(t,e,a,s){$("#"+t).hide(),$("#"+t+"s").show(),(isNaN(Number(a))||0==Number(a))&&(a=0);let o="",l="";o="listRecommendSort"==s?"list-recommend-sort":"category-recommend-sort",l=this.dataurl+"/mlm/goods/"+e+"/"+o+"?"+s+"="+a,this.$api.put(l,null,t=>{1==t.code?console.log("修改成功"):this.$message.error(t.msg)})},getfilelist(t){let e="";if(0==t.code)e=t.msg;else{var a="",s="",o="";t.failInfos.forEach(t=>{o+="\n          <tr>\n            <td>".concat(t.failGoodsNum,"</td>\n            <td>").concat(t.failMsg,"</td>\n          </tr>")}),s='\n        <div class="failist">\n          <p>上传失败商品列表</p>\n          <table width="100%" cellspacing="1" cellpadding="10">\n            <tr><th>商品编码</th><th width="80%">消息提示</th></tr>\n            '.concat(o,"\n          </table>\n        </div>\n        "),a='\n          <div class="filealert">\n            <p>文件上传结果：</p>\n            <p class="green">成功：<span>'.concat(t.successCount,'</span> 条</p>\n            <p class="red">失败：<span>').concat(t.failCount,"</span> 条</p>\n          </div>\n        "),e=t.failCount>0?a+s:a}this.$alert(e,"添加新商品",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",callback:()=>{t.successCount>0&&this.getList()}})},querySearch(t,e){var a=this.restaurants,s=t?a.filter(this.createFilter(t)):a;e(s)},createFilter(t){return e=>{return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}}}}),i=r,n=(a("2360"),a("2877")),c=Object(n["a"])(i,s,o,!1,null,null,null);e["default"]=c.exports},e2cc:function(t,e,a){"use strict";var s=a("3391"),o=a.n(s);o.a},fcec:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"历史调价信息"}}),a("div",{staticClass:"list-wrapper"},[a("el-table",{attrs:{data:t.priceHistory,stripe:"",id:"table_history","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"goodsId",label:"商品编码"}}),a("el-table-column",{attrs:{prop:"spu",label:"SPU货号"}}),a("el-table-column",{attrs:{label:"商品图"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{directives:[{name:"show",rawName:"v-show",value:t.row.goodsPic,expression:"scope.row.goodsPic"}],attrs:{src:t.row.goodsPic,width:"50",height:"50"}})]}}])}),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"createdAt",label:"分销底价设置时间",formatter:t.dateFormat}}),a("el-table-column",{attrs:{label:"本店售价/积分价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.ourShopPrice))]),a("span",[t._v("Ⓗ "+t._s(e.row.ourShopCoin))])]}}])}),a("el-table-column",{attrs:{label:"分销底价/积分价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.realShopPrice))]),a("span",[t._v("Ⓗ "+t._s(e.row.distributionCoin))])]}}])}),a("el-table-column",{attrs:{label:"+￥+Ⓗ"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.differencePrice))]),a("span",[t._v("Ⓗ "+t._s(e.row.differenceCoin))])]}}])}),a("el-table-column",{attrs:{label:"运营底价/积分价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.shopPrice))]),a("span",[t._v("Ⓗ "+t._s(e.row.operationCoin))])]}}])}),a("el-table-column",{attrs:{prop:"actName",label:"活动名称"}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",formatter:t.dateFormat}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",formatter:t.dateFormat}}),a("el-table-column",{attrs:{label:"活动运营底价/积分价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.actOperationPrice))]),a("span",[t._v("Ⓗ "+t._s(e.row.actOperationCoin))])]}}])}),a("el-table-column",{attrs:{prop:"newcomerCommission",label:"拉新奖励",formatter:t.Moneyico}}),a("el-table-column",{attrs:{prop:"activityCommission",label:"活动奖励",formatter:t.Moneyico}})],1)],1)],1)},o=[],l={name:"PriceHistory",data(){return{good_id:this.$route.params.id?this.$route.params.id:"",priceHistory:[],dataurl:"",total:0}},created(){this.getList()},methods:{getList(){this.$api.get(this.dataurl+"/mlm/goods/price/history/"+this.good_id,null,t=>{if(1==t.code){this.priceHistory=t.data,console.log(this.priceHistory);let e=JSON.parse(localStorage.getItem("msg"));this.priceHistory[0]["goodsName"]=e.goodsName,this.priceHistory[0]["goodsPic"]=e.goodsPic,this.priceHistory[0]["goodsId"]=e.goodsId,this.priceHistory[0]["spu"]=e.spu}else this.$message.error(t.msg)})},Moneyico:function(t,e){let a=t[e.property];return a?"￥"+a:""},dateFormat:function(t,e){let a=t[e.property];return a?this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*a):a}}},r=l,i=(a("e2cc"),a("2877")),n=Object(i["a"])(r,s,o,!1,null,"00a64898",null);e["default"]=n.exports}}]);
//# sourceMappingURL=retailsupplier.f8c6b85c.js.map