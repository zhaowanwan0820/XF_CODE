(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-668d9082"],{"0a49":function(t,e,r){var a=r("9b43"),s=r("626a"),i=r("4bf8"),o=r("9def"),n=r("cd1c");t.exports=function(t,e){var r=1==t,l=2==t,c=3==t,u=4==t,p=6==t,d=5==t||p,m=e||n;return function(e,n,f){for(var h,b,g=i(e),_=s(g),y=a(n,f,3),v=o(_.length),w=0,k=r?m(e,v):l?m(e,0):void 0;v>w;w++)if((d||w in _)&&(h=_[w],b=y(h,w,g),t))if(r)k[w]=b;else if(b)switch(t){case 3:return!0;case 5:return h;case 6:return w;case 2:k.push(h)}else if(u)return!1;return p?-1:c||u?u:k}}},1169:function(t,e,r){var a=r("2d95");t.exports=Array.isArray||function(t){return"Array"==a(t)}},"20d6":function(t,e,r){"use strict";var a=r("5ca1"),s=r("0a49")(6),i="findIndex",o=!0;i in[]&&Array(1)[i](function(){o=!1}),a(a.P+a.F*o,"Array",{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(i)},"6b9b":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("page-title",{attrs:{"first-title":"线上选品"}}),r("div",{staticClass:"search-wrapper"},[r("el-tabs",{attrs:{type:"card"}},t._l(t.retailState,function(e){return r("el-tab-pane",{key:e.id,attrs:{label:e.label}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(e.label)+"\n          "),r("span",{directives:[{name:"show",rawName:"v-show",value:"2"==e.id,expression:"item.id == '2'"}]},[t._v("( "+t._s(t.checklist.length)+" )")])]),r("el-form",{directives:[{name:"show",rawName:"v-show",value:"1"==e.id,expression:"item.id == '1'"}],staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[r("el-form-item",{attrs:{label:"商品编号"}},[r("el-input",{attrs:{placeholder:"商品编号",clearable:""},model:{value:t.params.goods_id,callback:function(e){t.$set(t.params,"goods_id",e)},expression:"params.goods_id"}})],1),r("el-form-item",{attrs:{label:"报名主题"}},[r("el-select",{staticStyle:{display:"block"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.params.signup_id,callback:function(e){t.$set(t.params,"signup_id",e)},expression:"params.signup_id"}},t._l(t.options1,function(t){return r("el-option",{key:t.id,attrs:{label:t.secName,value:t.id}})}),1)],1),r("el-form-item",{attrs:{label:"商品分类"}},[r("el-select",{staticStyle:{display:"block"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.params.category_id,callback:function(e){t.$set(t.params,"category_id",e)},expression:"params.category_id"}},t._l(t.options,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),r("el-form-item",{attrs:{label:"所属店铺"}},[r("el-select",{staticStyle:{display:"block"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.params.suppliers_id,callback:function(e){t.$set(t.params,"suppliers_id",e)},expression:"params.suppliers_id"}},t._l(t.options2,function(t){return r("el-option",{key:t.suppliersId,attrs:{label:t.suppliersName,value:t.suppliersId}})}),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-left"},on:{click:t.clear}},[t._v("清空")])],1)],1),r("div",{staticClass:"list-wrapper"},[r("p",{staticClass:"red"},[t._v("填写秒杀库存之后的商品可选择，每人限购值为“0”代表不限购")]),r("el-table",{ref:"1"==e.id?"tableData":"",refInFor:!0,staticStyle:{width:"100%"},attrs:{data:"1"==e.id?t.list:t.checklist,"tooltip-effect":"dark","header-cell-style":{background:"#eef1f6"},"row-key":t.getRowKeys},on:{select:function(r){var a=arguments.length,s=Array(a);while(a--)s[a]=arguments[a];return t.checked.apply(void 0,s.concat([e.id]))},"select-all":function(r){var a=arguments.length,s=Array(a);while(a--)s[a]=arguments[a];return t.checkAll.apply(void 0,s.concat([e.id]))},"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"30",selectable:t.checkboxT,"reserve-selection":!0}}),r("el-table-column",{attrs:{prop:"goods_id",label:"商品编号"}}),r("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),r("el-table-column",{attrs:{prop:"goods_number",label:"可售库存"}}),r("el-table-column",{attrs:{prop:"surplus_quantity",label:"秒杀可售库存",sortable:""}}),r("el-table-column",{attrs:{label:"秒杀库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.row.secbuy_quantity,expression:"scope.row.secbuy_quantity",modifiers:{number:!0}}],staticClass:"nums",attrs:{type:"number"},domProps:{value:e.row.secbuy_quantity},on:{blur:[function(r){return t.changeNum(e.row,0)},function(e){return t.$forceUpdate()}],input:function(r){r.target.composing||t.$set(e.row,"secbuy_quantity",t._n(r.target.value))}}}),r("p",{staticClass:"red"},[t._v(t._s(e.row.number1))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"每人限购"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.row.max_quantity,expression:"scope.row.max_quantity",modifiers:{number:!0}}],staticClass:"nums",attrs:{type:"number"},domProps:{value:e.row.max_quantity},on:{blur:[function(r){return t.changeNum(e.row,2)},function(e){return t.$forceUpdate()}],input:function(r){r.target.composing||t.$set(e.row,"max_quantity",t._n(r.target.value))}}}),r("p",{staticClass:"red"},[t._v(t._s(e.row.number1))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"排序值"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.row.goods_order,expression:"scope.row.goods_order",modifiers:{number:!0}}],staticClass:"nums",attrs:{type:"number",min:1,max:100},domProps:{value:e.row.goods_order},on:{blur:[function(r){return t.changeNum(e.row.goods_order,1)},function(e){return t.$forceUpdate()}],input:function(r){r.target.composing||t.$set(e.row,"goods_order",t._n(r.target.value))}}}),r("p",{staticClass:"red"},[t._v(t._s(e.row.number2))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"原价"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(t.utils.formatMoney(e.row.goods_shop_price)))]),r("p",[t._v("\n                  "+t._s("(现金价:"+t.utils.formatMoney(e.row.goods_cash)+" + 积分支付上限:"+t.utils.formatMoney(e.row.goods_money_line)+")")+"\n                ")])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"shop_price",label:"秒杀总价",sortable:""}}),r("el-table-column",{attrs:{prop:"cash_price",label:"秒杀现金价"}}),r("el-table-column",{attrs:{prop:"huanbi_price",label:"秒杀积分上限"}}),r("el-table-column",{attrs:{prop:"shop_name",label:"所属店铺"}}),r("el-table-column",{attrs:{prop:"signup_discount",label:"秒杀折扣",formatter:t.forscale,sortable:""}}),r("el-table-column",{attrs:{prop:"signup_proportion",label:"积分比例",formatter:t.forscale,sortable:""}}),r("el-table-column",{attrs:{prop:"signup_frequency",label:"参与秒杀次数",sortable:""}}),r("el-table-column",{attrs:{prop:"signup_sales",label:"秒杀累计销量",sortable:""}}),r("el-table-column",{attrs:{prop:"project_sales",label:"商品销量",sortable:""}})],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"1"!=e.id,expression:"item.id != '1'"}],staticStyle:{"margin-top":"20px"}},[r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.deleteItem}},[t._v("删除")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.id,expression:"item.id == '1'"}]},[r("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.params.limit,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),r("div",{staticClass:"btn-box"},[r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.submitcheck}},[t._v("提交")]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.canlecheck}},[t._v("取消")])],1)],1)],1)}),1)],1)],1)},s=[],i=(r("a481"),r("7514"),r("f499")),o=r.n(i),n=(r("20d6"),{name:"RetailSupplierList",data:function(){return{getRowKeys:function(t){return t.goods_id},list:[],options:[],options1:[],options2:[],checklist:[],currentPage:1,retailState:[{label:"全部",id:"1"},{label:"已选中",id:"2"}],params:{page:1,limit:6,signup_id:"",goods_id:"",category_id:"",suppliers_id:"",secbuy_id:this.$route.query.id?this.$route.query.id:""},total:0,multipleSelection:[],checkable:!0,deleteArr:[],hodeArr:[]}},created:function(){this.gettypeList()},methods:{changeNum:function(t,e){0==e?t.secbuy_quantity>t.surplus_quantity?this.$message.error("秒杀库存不能大于秒杀可售库存"):t.secbuy_quantity<1&&this.$message.error("秒杀库存不能小于1"):1==e&&((t>100||t<1)&&(this.$message.error("排序值取值范围为1-100"),t=100),t.length>3&&(t=t.splice(0,3)))},handleSelectionChange:function(t){var e=this;this.multipleSelection=t,this.select_order_number=this.multipleSelection.length,this.select_orderId=[],t&&t.forEach(function(t){t&&e.select_orderId.push(t.orderid)})},gettypeList:function(){var t=this;this.$api.get("hd/itzSecbuyGoods/selection",null,function(e){200==e.status&&(t.options=e.data.category,t.options1=e.data.signupNames,t.options2=e.data.suppliers)})},search:function(){this.params.page=1,this.params.signup_id?this.getList():this.$message.error("请选择报名主题")},getList:function(){var t=this;this.$api.get("hd/itzSecbuyGoods",this.params,function(e){200==e.status?e.data.total>0?(t.list=e.data.rows,t.total=e.data.total,t.checklist.length>0&&t.checklist.forEach(function(e){t.list.forEach(function(r,a){r.goods_id==e.goods_id&&(t.list[a]=e)})})):t.$confirm("该报名主题下暂时没有候选商品","提示",{confirmButtonText:"确定",type:"warning"}):(t.list={},t.$message.error(e.msg))})},handleCurrentChange:function(t){this.params.page=t,this.getList()},dateFormat:function(t,e){var r=t[e.property];return r?this.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*r):r},forscale:function(t,e){var r=t[e.property];return r?r+"%":""},clear:function(){this.params.page=1,this.params.limit=6,this.params.signup_id="",this.params.goods_id="",this.params.category_id="",this.params.suppliers_id=""},pricehistory:function(t){var e=this.list.findIndex(function(e){return e.goodsId==t});localStorage.setItem("msg",o()(this.list[e])),this.$router.push({name:"PriceHistory",params:{id:t}})},checkboxT:function(t){return!!t.secbuy_quantity},checked:function(t,e,r){var a=this;if("1"==r){var s=t.length&&-1!==t.indexOf(e);s?this.$api.put("hd/itzSecbuySignupGoods/goods/lock/".concat(e.signup_id),null,function(t){},function(t){console.log("失败"),a.$confirm("".concat(t.message),"提示",{confirmButtonText:"确定"}),a.$refs.tableData[0].toggleRowSelection(e)}):this.$api.put("hd/itzSecbuySignupGoods/goods/unlock/".concat(e.signup_id),null,function(t){},function(t){a.$confirm("".concat(t.message),"提示",{confirmButtonText:"确定"}),a.$refs.tableData[0].toggleRowSelection(e)}),this.checklist=t}else this.deleteArr=t},checkAll:function(t,e){var r=this;if("1"==e){var a=[];t.length>0?(t.forEach(function(t){a.push(t.signup_id)}),this.$api.put("hd/itzSecbuySignupGoods/goods/lock/",a,function(t){if(200==t.status&&t.data&&t.data.length>0){r.$confirm("".concat(t.message),"提示",{confirmButtonText:"确定"});var e=[],a={};t.data.forEach(function(t){a=r.list.find(function(e){return e.signup_id==t}),e.push(a)}),e.forEach(function(t){r.$refs.tableData[0].toggleRowSelection(t)})}})):(this.list.forEach(function(t){t.secbuy_quantity&&a.push(t.signup_id)}),this.$api.put("hd/itzSecbuySignupGoods/goods/unlock/",a,function(t){})),this.checklist=t}else this.deleteArr=t},canlecheck:function(){localStorage.clear(),this.$router.go(-1)},submitcheck:function(){if(this.checklist.length>0){this.checklist.forEach(function(t){return t.goods_order?t.goods_order:t.goods_order=100}),localStorage.setItem("productlist",o()(this.checklist));var t=this.$route.query.id,e=this.$route.query.status;this.$router.replace({name:"SecondKillAdd",query:{operate:"productlist",id:t,status:e}})}else this.$confirm("请选择商品后再提交","提示",{confirmButtonText:"确定",type:"warning"})},deleteItem:function(){for(var t=this.checklist,e=this.deleteArr,r=[],a=0;a<e.length;a++){r.push(e[a].signup_id);for(var s=0;s<t.length;s++)t[s]===e[a]&&(t.splice(s,1),s--)}this.checklist=t,this.$api.put("hd/itzSecbuySignupGoods/goods/unlock/",r,function(t){})}}}),l=n,c=(r("6bd1"),r("2877")),u=Object(c["a"])(l,a,s,!1,null,"04dbda9a",null);e["default"]=u.exports},"6bd1":function(t,e,r){"use strict";var a=r("f1d9"),s=r.n(a);s.a},7514:function(t,e,r){"use strict";var a=r("5ca1"),s=r("0a49")(5),i="find",o=!0;i in[]&&Array(1)[i](function(){o=!1}),a(a.P+a.F*o,"Array",{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(i)},cd1c:function(t,e,r){var a=r("e853");t.exports=function(t,e){return new(a(t))(e)}},e853:function(t,e,r){var a=r("d3f4"),s=r("1169"),i=r("2b4c")("species");t.exports=function(t){var e;return s(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)||(e=void 0),a(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}},f1d9:function(t,e,r){}}]);
//# sourceMappingURL=chunk-668d9082-legacy.bc7abb3a.js.map