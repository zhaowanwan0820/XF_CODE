(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0546f2d6"],{"01c3":function(e,t,a){},2209:function(e,t,a){"use strict";var i=a("01c3"),n=a.n(i);n.a},2477:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("page-title",{attrs:{"first-title":"push管理"}}),a("div",{staticClass:"btn-box"},[a("el-button",{staticClass:"btn-add",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addRecord()}}},[e._v("新增")])],1),a("section",{staticClass:"search-wrapper"},[a("el-form",{attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.params.title,callback:function(t){e.$set(e.params,"title",t)},expression:"params.title"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择发送状态"},model:{value:e.params.exe_code,callback:function(t){e.$set(e.params,"exe_code",t)},expression:"params.exe_code"}},e._l(e.PUSH_STATUS,function(e){return a("el-option",{key:e.exe_code,attrs:{label:e.name,value:e.exe_code}})}),1)],1),a("el-form-item",{attrs:{label:"推送时间"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.timeVal,callback:function(t){e.timeVal=t},expression:"timeVal"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),a("el-button",{on:{click:e.clear}},[e._v("清空")])],1)],1)],1),a("section",{staticClass:"search-result"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"push-list",attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"序号",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"title",label:"标题",align:"center"}}),a("el-table-column",{attrs:{prop:"plan_exe_time",label:"推送时间",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.utils.formatDate("YYYY-MM-DD HH:mm:ss",1e3*t.row.plan_exe_time))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.getTagType(t.row.format_exe_code).name)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"operation",label:"操作",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.exe_code==e.ENUM.PUSH_STATUS.SUCCESS?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.checkRecord(t.row)}}},[e._v("查看")]):e._e(),t.row.exe_code!=e.ENUM.PUSH_STATUS.SUCCESS?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editRecord(t.row)}}},[e._v("编辑")]):e._e(),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.delRecord(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"pagenation-wrapper",attrs:{background:"","current-page":e.params.page,"page-size":e.params.size,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.pageChanged}})],1)],1)},n=[],s=a("be94"),r=a("9cab"),l=a("822c");const o=[{exe_code:r["a"].PUSH_STATUS.ALL,name:"全部",type:""},{exe_code:r["a"].PUSH_STATUS.SUCCESS,name:"已发送",type:"success"},{exe_code:r["a"].PUSH_STATUS.UNEXECUTED,name:"未发送",type:"warning"},{exe_code:r["a"].PUSH_STATUS.EXECUTORY,name:"发送中",type:"warning"},{exe_code:r["a"].PUSH_STATUS.FAILED,name:"发送失败",type:"danger"}],c=[{text:"最近一周",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}];var p={name:"PushManagement",data(){return{ENUM:r["a"],loading:!1,pickerOptions:{shortcuts:c},PUSH_STATUS:o,list:[],timeVal:[],params:{title:"",exe_code:"",page:1,size:10},total:100,activeItem:{}}},created(){this.getList()},methods:{getList(){const e=Object(s["a"])({},this.params,this.getSearchTime());this.loading=!0,Object(l["e"])(e).then(e=>{this.list=e.list,this.total=e.paged.total,this.loading=!1})},initList(e){e?(this.params={title:"",exe_code:"",page:1,size:10},this.timeVal=[]):this.params.page=1,this.getList()},onSubmit(){this.initList()},clear(){this.initList(!0)},getSearchTime(){const e={start:"",end:""};return this.timeVal[0]&&this.timeVal[1]?(e.start=new Date(this.timeVal[0].getFullYear(),this.timeVal[0].getMonth(),this.timeVal[0].getDate(),"0","0","0").getTime()/1e3,e.end=new Date(this.timeVal[1].getFullYear(),this.timeVal[1].getMonth(),this.timeVal[1].getDate(),"23","59","59").getTime()/1e3,e):e},getTagType(e){let t={};return this.PUSH_STATUS.map(a=>{a.exe_code==e&&(t=Object(s["a"])({},a))}),t},pageChanged(e){this.params.page=e,this.getList()},checkRecord(e){this.$router.push({name:"pushEdit",query:{id:e.id,isCheck:1}})},addRecord(e){this.$router.push({name:"pushEdit"})},editRecord(e){this.$router.push({name:"pushEdit",query:{id:e.id}})},delRecord(e){this.$confirm("确定删除该条记录吗？","提示").then(()=>{this.loading=!0,Object(l["a"])(e.id).then(e=>{this.initList()})})}}},d=p,u=(a("2209"),a("2877")),m=Object(u["a"])(d,i,n,!1,null,"57b3dcf5",null);t["default"]=m.exports},"822c":function(e,t,a){"use strict";a.d(t,"e",function(){return n}),a.d(t,"a",function(){return s}),a.d(t,"d",function(){return r}),a.d(t,"c",function(){return l}),a.d(t,"b",function(){return o});var i=a("65c6");const n=e=>{const t={page:e.page,size:e.size,title:e.title,exe_time_start:e.start,exe_time_end:e.end};return"number"==typeof e.exe_code&&(t.exe_code=e.exe_code),Object(i["a"])("/admin/api.app.push.list","POST",t)},s=e=>Object(i["a"])("/admin/api.app.push.delete","POST",{id:e}),r=e=>Object(i["a"])("/admin/api.app.push.info","POST",{id:e}),l=e=>Object(i["a"])("/admin/api.app.push.save","POST",e),o=e=>Object(i["b"])("/admin/api.app.push.down.template","POST",{})}}]);
//# sourceMappingURL=chunk-0546f2d6.a1e922d6.js.map