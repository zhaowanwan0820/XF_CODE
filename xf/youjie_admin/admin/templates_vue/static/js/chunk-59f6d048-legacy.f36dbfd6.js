(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59f6d048"],{"205f":function(e,t,s){"use strict";var i=s("91f5"),a=s.n(i);a.a},"20fd":function(e,t,s){"use strict";var i=s("d9f6"),a=s("aebd");e.exports=function(e,t,s){t in e?i.f(e,t,a(0,s)):e[t]=s}},"2fdb":function(e,t,s){"use strict";var i=s("5ca1"),a=s("d2c8"),o="includes";i(i.P+i.F*s("5147")(o),"String",{includes:function(e){return!!~a(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"3a9e":function(e,t,s){},"469f":function(e,t,s){s("6c1c"),s("1654"),e.exports=s("7d7b")},5147:function(e,t,s){var i=s("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(s){try{return t[i]=!1,!"/./"[e](t)}catch(a){}}return!0}},"549b":function(e,t,s){"use strict";var i=s("d864"),a=s("63b6"),o=s("241e"),r=s("b0dc"),n=s("3702"),l=s("b447"),c=s("20fd"),u=s("7cd6");a(a.S+a.F*!s("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,s,a,p,d=o(e),g="function"==typeof this?this:Array,b=arguments.length,m=b>1?arguments[1]:void 0,h=void 0!==m,f=0,y=u(d);if(h&&(m=i(m,b>2?arguments[2]:void 0,2)),void 0==y||g==Array&&n(y))for(t=l(d.length),s=new g(t);t>f;f++)c(s,f,h?m(d[f],f):d[f]);else for(p=y.call(d),s=new g;!(a=p.next()).done;f++)c(s,f,h?r(p,m,[a.value,f],!0):a.value);return s.length=f,s}})},"5d73":function(e,t,s){e.exports=s("469f")},6762:function(e,t,s){"use strict";var i=s("5ca1"),a=s("c366")(!0);i(i.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")("includes")},"774e":function(e,t,s){e.exports=s("d2d5")},7821:function(e,t,s){"use strict";var i=s("a7b3"),a=s.n(i);a.a},"7d7b":function(e,t,s){var i=s("e4ae"),a=s("7cd6");e.exports=s("584a").getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},"91f5":function(e,t,s){},a7b3:function(e,t,s){},b406:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"details"},[s("page-title",{attrs:{"first-title":"秒杀活动报名","second-title":"报名详情"}}),s("div",{staticClass:"btn-box"},["signUp"==e.mark?s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("提交商品")]):e._e()],1),s("div",{staticClass:"button-wrapper"},[s("div",{staticClass:"title"},[s("div",{staticClass:"title-name"},[s("span",[e._v("报名主题：")]),s("span",{staticClass:"rear"},[e._v(e._s(e.form.secName))])]),s("div",{staticClass:"title-name"},[s("span",[e._v("支持类目：")]),s("span",{staticClass:"rear"},[e._v(e._s(e.form.categoryId))])]),s("div",{staticClass:"title-name"},[s("span",[e._v("报名时间：")]),s("span",{staticClass:"rear"},[e._v(e._s(e.utils.format_date(e.form.startTime)))]),s("span",{staticStyle:{margin:"0 10px"}},[e._v("至")]),s("span",{staticClass:"rear"},[e._v(e._s(e.utils.format_date(e.form.endTime)))])])]),s("div",{staticClass:"title-below"},[s("div",{staticClass:"below-title"},[e._v("主题说明：")]),s("div",{staticClass:"below-rear"},[e._v(e._s(e.form.secDesc))])])]),s("p",{staticClass:"border"}),s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"已提交"}},[s("spikeListView",{attrs:{id:e.id},on:{"update:id":function(t){e.id=t},info:e.goodsInfo}})],1),s("el-tab-pane",{attrs:{label:"报名成功"}},[s("successSpikeListView",{attrs:{id:e.id},on:{"update:id":function(t){e.id=t}}})],1)],1),s("el-dialog",{attrs:{title:"提交商品",visible:e.dialogVisible,width:"80%","v-loading":e.dialogLoading,"close-on-click-modal":e.closeModal},on:{"update:visible":function(t){e.dialogVisible=t}}},[[s("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"全部",name:"All"}},[s("div",{staticClass:"goods"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tableIndex,expression:"tableIndex == 0"}],staticClass:"search-wrapper"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",{attrs:{label:"商品名称"}},[s("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.params.goodsName,callback:function(t){e.$set(e.params,"goodsName",t)},expression:"params.goodsName"}})],1),s("el-form-item",{attrs:{label:"商品编号"}},[s("el-input",{attrs:{placeholder:"商品编号"},model:{value:e.params.goodsId,callback:function(t){e.$set(e.params,"goodsId",t)},expression:"params.goodsId"}})],1),s("el-form-item",{attrs:{label:"商品分类"}},[s("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),s("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.clear}},[e._v("清空")])],1)],1)],1),s("div",{staticClass:"list-wrapper"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.goodsListArr,"row-key":e.getRowKey,stripe:"","header-cell-style":{background:"#eef1f6"}},on:{"selection-change":e.selectCall}},[s("el-table-column",{attrs:{type:"selection","reserve-selection":e.isReserve,width:"55"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsId",label:"商品编号"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"商品名称"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsNumber",label:"可售库存"}}),s("el-table-column",{attrs:{align:"center",prop:"surplusQuantity",label:"秒杀可售库存"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"秒杀可售库存"},model:{value:e.objSplike.saleQuantity[t.row.goodsId],callback:function(s){e.$set(e.objSplike.saleQuantity,t.row.goodsId,"string"===typeof s?s.trim():s)},expression:"objSplike.saleQuantity[scope.row.goodsId]"}})]}}])}),s("el-table-column",{attrs:{align:"center",prop:"maxQuantity",label:"每人限购"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"每人限购"},model:{value:e.objSplike.maxQuantity[t.row.goodsId],callback:function(s){e.$set(e.objSplike.maxQuantity,t.row.goodsId,"string"===typeof s?s.trim():s)},expression:"objSplike.maxQuantity[scope.row.goodsId]"}})]}}])}),s("el-table-column",{attrs:{align:"center",prop:"shopPrice",label:"原价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.shopPrice)),s("br"),e._v("\n                    (现金价:"+e._s(t.row.cashPrice)+" + 积分支付上限:"+e._s(t.row.moneyLine)+")\n                  ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"signupShopPrice",label:"秒杀总价"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"秒杀总价"},on:{change:function(s){return e.inputshopPrice(t.row.goodsId)}},model:{value:e.objSplike.shopPrice[t.row.goodsId],callback:function(s){e.$set(e.objSplike.shopPrice,t.row.goodsId,"string"===typeof s?s.trim():s)},expression:"objSplike.shopPrice[scope.row.goodsId]"}})]}}])}),s("el-table-column",{attrs:{align:"center",prop:"signupCashPrice",label:"秒杀现金价"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"秒杀现金价"},on:{change:function(s){return e.inputCashPrice(t.row.goodsId)}},model:{value:e.objSplike.cashPrice[t.row.goodsId],callback:function(s){e.$set(e.objSplike.cashPrice,t.row.goodsId,"string"===typeof s?s.trim():s)},expression:"objSplike.cashPrice[scope.row.goodsId]"}})]}}])}),s("el-table-column",{attrs:{align:"center",prop:"signupMoneyLine",label:"秒杀积分支付上限"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"秒杀积分支付上限",disabled:""},model:{value:e.objSplike.huanbiPrice[t.row.goodsId],callback:function(s){e.$set(e.objSplike.huanbiPrice,t.row.goodsId,"string"===typeof s?s.trim():s)},expression:"objSplike.huanbiPrice[scope.row.goodsId]"}})]}}])}),s("el-table-column",{attrs:{align:"center",prop:"signupMoneyLine",label:"每日限购数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"每日限购数量",disabled:""},model:{value:e.objSplike.maxQuantity[t.row.goodsId],callback:function(s){e.$set(e.objSplike.maxQuantity,t.row.goodsId,"string"===typeof s?s.trim():s)},expression:"objSplike.maxQuantity[scope.row.goodsId]"}})]}}])})],1)],1),s("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.params.pageSize,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)]),s("el-tab-pane",{attrs:{label:e.title,name:"selected"}},[s("div",{staticClass:"goods"},[s("div",{staticClass:"list-wrapper"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingObj,expression:"loadingObj"}],ref:"objTable",staticStyle:{width:"100%"},attrs:{data:e.goodsSpikeArr,"row-key":e.getRowKeyObj,stripe:"","header-cell-style":{background:"#eef1f6"}},on:{"selection-change":e.selectCallObj}},[s("el-table-column",{attrs:{type:"selection","reserve-selection":e.isReserveObj,width:"55"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsId",label:"商品编号"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"商品名称"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsNumber",label:"可售库存"}}),s("el-table-column",{attrs:{align:"center",prop:"surplusQuantity",label:"秒杀可售库存"}}),s("el-table-column",{attrs:{align:"center",prop:"maxQuantity",label:"每人限购"}}),s("el-table-column",{attrs:{align:"center",prop:"shopPrice",label:"原价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.shopPrice)),s("br"),e._v("\n                    (现金价:"+e._s(t.row.cashPrice)+" + 积分支付上限:"+e._s(t.row.moneyLine)+")\n                  ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"signupShopPrice",label:"秒杀总价"}}),s("el-table-column",{attrs:{align:"center",prop:"signupCashPrice",label:"秒杀现金价"}}),s("el-table-column",{attrs:{align:"center",prop:"signupMoneyLine",label:"秒杀积分支付上限"}})],1)],1),s("div",{staticClass:"btn-delete"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.allRemoveGoods(e.tableIndex)}}},[e._v("删除")])],1),s("el-pagination",{attrs:{background:"","current-page":e.currentPageObj,"page-size":e.paramsObj.limit,layout:"prev, pager, next, jumper",total:e.totalObj},on:{"current-change":e.handleCurrentChangeObj,"update:currentPage":function(t){e.currentPageObj=t},"update:current-page":function(t){e.currentPageObj=t}}})],1)])],1)],s("span",{directives:[{name:"show",rawName:"v-show",value:0==e.tableIndex,expression:"tableIndex == 0"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.onSubmit}},[e._v("提 交")]),s("el-button",{on:{click:e.quxiao}},[e._v("取 消")])],1)],2)],1)},a=[],o=s("5d73"),r=s.n(o),n=(s("6762"),s("2fdb"),s("774e")),l=s.n(n),c=(s("6b54"),s("06db"),s("c5f6"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"list"},[s("div",{staticClass:"search-wrapper"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",{attrs:{label:"商品名称"}},[s("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.params.goods_name,callback:function(t){e.$set(e.params,"goods_name",t)},expression:"params.goods_name"}})],1),s("el-form-item",{attrs:{label:"商品编号"}},[s("el-input",{attrs:{placeholder:"商品编号"},model:{value:e.params.goods_number,callback:function(t){e.$set(e.params,"goods_number",t)},expression:"params.goods_number"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),s("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.clear}},[e._v("清空")])],1),e.id?s("div"):e._e()],1)],1),s("div",{staticClass:"list-wrapper"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.spilkeArr,stripe:"","header-cell-style":{background:"#eef1f6"}}},[s("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsId",label:"商品编号"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"商品名称"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsNumber",label:"可售库存"}}),s("el-table-column",{attrs:{align:"center",prop:"surplusQuantity",label:"秒杀可售库存"}}),s("el-table-column",{attrs:{align:"center",prop:"maxQuantity",label:"每人限购"}}),s("el-table-column",{attrs:{align:"center",prop:"shopPrice",label:"原价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.shopPrice)),s("br"),e._v("\n          (现金价:"+e._s(t.row.cashPrice)+" + 积分支付上限:"+e._s(t.row.moneyLine)+")\n        ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"signupShopPrice",label:"秒杀总价"}}),s("el-table-column",{attrs:{align:"center",prop:"signupCashPrice",label:"秒杀现金价"}}),s("el-table-column",{attrs:{align:"center",prop:"signupMoneyLine",label:"秒杀积分支付上限"}}),s("el-table-column",{attrs:{align:"center",prop:"createdAt",label:"提交时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.utils.format_date(t.row.createdAt))+"\n        ")]}}])}),s("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.removeGoods(t.row)}}},[e._v("移除")]),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.editGoods(t.row)}}},[e._v("编辑")])]}}])})],1)],1),s("el-dialog",{attrs:{title:"编辑商品",visible:e.editView,width:"40%","v-loading":e.editLoading,"close-on-click-modal":e.closeModal},on:{"update:visible":function(t){e.editView=t}}},[s("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"商品名称"}},[s("el-input",{attrs:{disabled:""},model:{value:e.form.goodsName,callback:function(t){e.$set(e.form,"goodsName","string"===typeof t?t.trim():t)},expression:"form.goodsName"}})],1),s("el-form-item",{attrs:{label:"商品编号"}},[s("el-input",{attrs:{disabled:""},model:{value:e.form.goodsId,callback:function(t){e.$set(e.form,"goodsId","string"===typeof t?t.trim():t)},expression:"form.goodsId"}})],1),s("el-form-item",{attrs:{label:"秒杀价",prop:"signupShopPrice"}},[s("el-input",{attrs:{type:"number"},model:{value:e.form.signupShopPrice,callback:function(t){e.$set(e.form,"signupShopPrice","string"===typeof t?t.trim():t)},expression:"form.signupShopPrice"}})],1),s("el-form-item",{attrs:{label:"现金价",prop:"signupCashPrice"}},[s("el-input",{attrs:{type:"number"},model:{value:e.form.signupCashPrice,callback:function(t){e.$set(e.form,"signupCashPrice","string"===typeof t?t.trim():t)},expression:"form.signupCashPrice"}})],1),s("el-form-item",{attrs:{label:"积分支付上限",prop:"signupMoneyLine"}},[s("el-input",{attrs:{type:"number"},model:{value:e.form.signupMoneyLine,callback:function(t){e.$set(e.form,"signupMoneyLine","string"===typeof t?t.trim():t)},expression:"form.signupMoneyLine"}})],1),s("el-form-item",{attrs:{label:"原价"}},[s("el-input",{attrs:{disabled:""},model:{value:e.form.shopPrice,callback:function(t){e.$set(e.form,"shopPrice","string"===typeof t?t.trim():t)},expression:"form.shopPrice"}})],1),s("el-form-item",{attrs:{label:"现金价"}},[s("el-input",{attrs:{disabled:""},model:{value:e.form.cashPrice,callback:function(t){e.$set(e.form,"cashPrice","string"===typeof t?t.trim():t)},expression:"form.cashPrice"}})],1),s("el-form-item",{attrs:{label:"积分支付上限"}},[s("el-input",{attrs:{disabled:""},model:{value:e.form.moneyLine,callback:function(t){e.$set(e.form,"moneyLine","string"===typeof t?t.trim():t)},expression:"form.moneyLine"}})],1),s("el-form-item",{attrs:{label:"可售库存"}},[s("el-input",{attrs:{disabled:""},model:{value:e.form.goodsNumber,callback:function(t){e.$set(e.form,"goodsNumber","string"===typeof t?t.trim():t)},expression:"form.goodsNumber"}})],1),s("el-form-item",{attrs:{label:"活动可售库存",prop:"surplusQuantity"}},[s("el-input",{attrs:{type:"number"},model:{value:e.form.surplusQuantity,callback:function(t){e.$set(e.form,"surplusQuantity","string"===typeof t?t.trim():t)},expression:"form.surplusQuantity"}})],1),s("el-form-item",{attrs:{label:"每人限购",prop:"maxQuantity"}},[s("el-input",{attrs:{type:"number"},model:{value:e.form.maxQuantity,callback:function(t){e.$set(e.form,"maxQuantity","string"===typeof t?t.trim():t)},expression:"form.maxQuantity"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.onSubmit(e.form)}}},[e._v("提交")]),s("el-button",{on:{click:function(t){e.editView=!1}}},[e._v("取消")])],1)],1)],1)],1)}),u=[],p={name:"spikeList",props:["id"],data:function(){return{currentPage:1,total:0,params:{id:"",goods_name:"",goods_number:"",type:1},loading:!1,spilkeArr:[],editView:!1,editLoading:!1,closeModal:!1,form:{},btnLoading:!1,signupId:"",rules:{signupShopPrice:[{required:!0,message:"请填写秒杀价",trigger:"blur"}],signupCashPrice:[{required:!0,message:"请填写现金价",trigger:"blur"}],signupMoneyLine:[{required:!0,message:"请填写积分支付上限",trigger:"blur"}],surplusQuantity:[{required:!0,message:"请填写活动可售库存",trigger:"blur"}]}}},created:function(){this.params.id=this.id,this.goodsList()},methods:{handleCurrentChange:function(e){this.params.page=e},search:function(){this.currentPage=1,this.params.page=1,this.goodsList()},clear:function(){this.currentPage=1,this.params.page=1,this.params.goods_name="",this.params.goods_number="",this.goodsList()},goodsList:function(){var e=this;this.loading=!0,this.$api.get("hd/itzSecbuySignupGoods/signup/detail",this.params,function(t){e.loading=!1,200==t.status&&(e.spilkeArr=t.data.goodsList,e.signupId=t.data.signup.id,e.$emit("info",t.data.signup))},function(t){e.loading=!1})},removeGoods:function(e){var t=this;this.$confirm("是否删除此条商品信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.delete("hd/itzSecbuySignupGoods/signup/detail/".concat(e.signupGoodsId),null,function(e){200==e.status&&(t.$message({type:"success",message:"删除成功!"}),t.goodsList())})}).catch(function(){})},editGoods:function(e){var t=this;this.form=e,this.$api.put("hd/itzSecbuySignupGoods/goods/lock/".concat(e.signupGoodsId),null,function(e){200==e.status&&(t.editView=!0,t.goodsList())})},onSubmit:function(e){var t=this;this.btnLoading=!0;var s={shopPrice:e.signupShopPrice,cashPrice:e.signupCashPrice,huanbiPrice:e.signupMoneyLine,surplusQuantity:e.surplusQuantity,goodsId:e.goodsId,signupId:this.signupId,maxQuantity:e.maxQuantity};this.$api.put("hd/itzSecbuySignupGoods/goods/".concat(e.signupGoodsId),s,function(e){200==e.status&&(t.$message({type:"success",message:e.message}),t.editView=!1,t.btnLoading=!1,t.goodsList())},function(e){t.btnLoading=!1})}}},d=p,g=(s("205f"),s("2877")),b=Object(g["a"])(d,c,u,!1,null,"43a88452",null),m=b.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"success"},[s("div",{staticClass:"search-wrapper"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",{attrs:{label:"商品名称"}},[s("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.params.goods_name,callback:function(t){e.$set(e.params,"goods_name",t)},expression:"params.goods_name"}})],1),s("el-form-item",{attrs:{label:"商品编号"}},[s("el-input",{attrs:{placeholder:"商品编号"},model:{value:e.params.goods_number,callback:function(t){e.$set(e.params,"goods_number",t)},expression:"params.goods_number"}})],1),s("el-form-item",{attrs:{label:"活动名称"}},[s("el-input",{attrs:{placeholder:"活动名称"},model:{value:e.params.secbuy_name,callback:function(t){e.$set(e.params,"secbuy_name",t)},expression:"params.secbuy_name"}})],1),s("el-form-item",{attrs:{label:"活动状态"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.secbuy_status,callback:function(t){e.$set(e.params,"secbuy_status",t)},expression:"params.secbuy_status"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),s("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.clear}},[e._v("清空")])],1),e.id?s("div"):e._e()],1)],1),s("div",{staticClass:"list-wrapper"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.spilkeArr,stripe:"","header-cell-style":{background:"#eef1f6"}}},[s("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsId",label:"商品编号"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"商品名称"}}),s("el-table-column",{attrs:{align:"center",prop:"goodsNumber",label:"可售库存"}}),s("el-table-column",{attrs:{align:"center",prop:"surplusQuantity",label:"秒杀库存"}}),s("el-table-column",{attrs:{align:"center",prop:"maxQuantity",label:"每人限购"}}),s("el-table-column",{attrs:{align:"center",prop:"cashPrice",label:"原价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.shopPrice)),s("br"),e._v("\n          (现金价:"+e._s(t.row.cashPrice)+" + 积分支付上限:"+e._s(t.row.moneyLine)+")\n        ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"signupShopPrice",label:"秒杀总价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.signupShopPrice)),s("br"),e._v("\n          (现金价:"+e._s(t.row.signupCashPrice)+" + 积分支付上限:"+e._s(t.row.signupMoneyLine)+")\n        ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"secbuyName",label:"活动名称"}}),s("el-table-column",{attrs:{align:"center",label:"活动时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.utils.format_date(t.row.secbuyStartTime))),s("br"),e._v("\n          至 "),s("br"),e._v(e._s(e.utils.format_date(t.row.secbuyEndTime))+"\n        ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"secbuyStatus_text",label:"活动状态"}}),s("el-table-column",{attrs:{align:"center",label:"活动创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.utils.format_date(t.row.createdAt))+"\n        ")]}}])})],1)],1)])},f=[],y={name:"successSpikeList",props:["id"],data:function(){return{currentPage:1,total:0,params:{id:"",goods_name:"",goods_number:"",secbuy_name:"",secbuy_status:"",type:2},loading:!1,options:[{value:"0",label:"未开始"},{value:"1",label:"进行中"},{value:"2",label:"已结束"},{value:"3",label:"已禁用"}],spilkeArr:[]}},created:function(){this.params.id=this.id,this.goodsList()},methods:{handleCurrentChange:function(e){this.params.pageNum=e},search:function(){this.currentPage=1,this.goodsList()},clear:function(){this.currentPage=1,this.params.goods_name="",this.params.goods_number="",this.params.secbuy_name="",this.params.secbuy_status="",this.goodsList()},goodsList:function(){var e=this;this.loading=!0,this.$api.get("hd/itzSecbuySignupGoods/signup/detail",this.params,function(t){if(e.loading=!1,200==t.status){var s=!0,i=!1,a=void 0;try{for(var o,n=r()(t.data.goodsList);!(s=(o=n.next()).done);s=!0){var l=o.value;switch(l.secbuyStatus){case 0:l.secbuyStatus_text="未开始";break;case 1:l.secbuyStatus_text="进行中";break;case 2:l.secbuyStatus_text="已结束";break;case 3:l.secbuyStatus_text="禁用";break;default:l.secbuyStatus_text=""}}}catch(c){i=!0,a=c}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}e.spilkeArr=t.data.goodsList}},function(t){e.loading=!1})},removeGoods:function(){},editGoods:function(){}}},v=y,k=(s("e043"),Object(g["a"])(v,h,f,!1,null,"854e12ce",null)),S=k.exports,j={name:"registrationDetails",components:{spikeListView:m,successSpikeListView:S},inject:["reload"],data:function(){return{spilkeArr:[],dialogVisible:!1,dialogLoading:!1,activeName:"All",selectedGoods:{index:1,arr:[]},tableIndex:0,closeModal:!1,title:"已选中(0)",mark:"",id:null,editView:!1,editLoading:!1,form:{},currentPage:1,total:0,params:{signUpId:"",goodsName:"",goodsId:"",categories:[],page:1,limit:6},objSplike:{saleQuantity:[],shopPrice:[],cashPrice:[],huanbiPrice:[],max_quantity:[],maxQuantity:[]},isReserve:!0,loading:!1,options:[],value:[],selectAll:[],goodsListArr:[],getRowKey:function(e){return e.goodsId},currentPageObj:1,totalObj:0,paramsObj:{page:1,limit:6},isReserveObj:!0,loadingObj:!1,goodsListobj:[],goodsArrList:[],goodsSpikeArr:[],selectAllObj:[],selectAlls:[],getRowKeyObj:function(e){return e.goodsId},btnLoading:!1}},created:function(){this.mark=this.$route.query.mark,this.id=this.$route.params.id,this.getProductList(this.$route.params.id)},methods:{goodsInfo:function(e){this.form=e,this.params.signUpId=e.id,this.goodsList()},getProductList:function(e){var t=this;this.$api.get("hd/itzSecbuySignup/".concat(e,"/category"),null,function(e){200==e.status&&(t.options=e.data)})},handleCurrentChange:function(e){this.params.page=e,this.goodsList()},handleCurrentChangeObj:function(e){for(var t in this.paramsObj.page=e,console.log(this.goodsArrList),this.goodsArrList)Number(t)+1==e&&(console.log(t+1),this.goodsSpikeArr=this.goodsArrList[t])},reSetData:function(e,t){for(var s=[],i=e.length,a=0;a<i;a+=t)s.push(e.slice(a,a+t));return s},search:function(){this.currentPage=1,this.params.page=1,this.goodsList()},clear:function(){this.currentPage=1,this.params.page=1,this.params.goodsName="",this.params.goodsId="",this.params.categories="",this.value=[],this.goodsList()},inputshopPrice:function(e){if(this.objSplike.cashPrice[e]){if(Number(this.objSplike.cashPrice[e])>Number(this.objSplike.shopPrice[e]))return this.$message({message:"商品编码为".concat(e,"的商品，秒杀总价不能小于秒杀现金价！"),type:"warning"}),void this.$set(this.objSplike.shopPrice,e,"");this.$set(this.objSplike.huanbiPrice,e,Number(this.objSplike.shopPrice[e])-Number(this.objSplike.cashPrice[e]))}else this.$set(this.objSplike.huanbiPrice,e,Number(this.objSplike.shopPrice[e]))},inputCashPrice:function(e){if(this.objSplike.shopPrice[e]){if(Number(this.objSplike.cashPrice[e])>=Number(this.objSplike.shopPrice[e]))return this.$message({message:"商品编码为".concat(e,"的商品，秒杀现金价需小于秒杀总价！"),type:"warning"}),void this.$set(this.objSplike.cashPrice,e,"");this.$set(this.objSplike.huanbiPrice,e,Number(this.objSplike.shopPrice[e])-Number(this.objSplike.cashPrice[e]))}else this.$set(this.objSplike.huanbiPrice,e,Number(this.objSplike.cashPrice[e]))},handleClick:function(e){this.tableIndex=e.index,1==e.index&&(this.forEachArr(this.objSplike.saleQuantity,this.goodsListobj,"surplusQuantity"),this.forEachArr(this.objSplike.shopPrice,this.goodsListobj,"signupShopPrice"),this.forEachArr(this.objSplike.cashPrice,this.goodsListobj,"signupCashPrice"),this.forEachArr(this.objSplike.huanbiPrice,this.goodsListobj,"signupMoneyLine"),this.forEachArr(this.objSplike.maxQuantity,this.goodsListobj,"maxQuantity"))},selectCall:function(e){for(var t in this.forEachArr(this.objSplike.saleQuantity,e,"surplusQuantity"),this.forEachArr(this.objSplike.shopPrice,e,"signupShopPrice"),this.forEachArr(this.objSplike.cashPrice,e,"signupCashPrice"),this.forEachArr(this.objSplike.huanbiPrice,e,"signupMoneyLine"),this.forEachArr(this.objSplike.maxQuantity,this.goodsListobj,"maxQuantity"),this.selectAll=e,this.title="已选中(".concat(e.length,")"),this.goodsListobj=e,this.totalObj=this.goodsListobj.length,this.goodsArrList=this.reSetData(this.goodsListobj,this.paramsObj.limit),this.goodsArrList)Number(t)+1==this.paramsObj.page&&(this.goodsSpikeArr=this.goodsArrList[t])},goodsList:function(){var e=this;this.params.categories=l()(this.value).toString(),this.loading=!0,this.$api.get("hd/itzSecbuySignupGoods/supplierGoods",this.params,function(t){e.loading=!1,200==t.status&&(e.goodsListArr=t.data.rows,e.total=t.data.total)},function(t){e.loading=!1})},selectCallObj:function(e){this.selectAllObj=e},allRemoveGoods:function(e){if(console.log(e),1==e){var t=this.selectAllObj,s=this,i=!0,a=!1,o=void 0;try{for(var n,l=r()(t);!(i=(n=l.next()).done);i=!0){var c=n.value;s.getIndex(s.goodsListobj,c)}}catch(d){a=!0,o=d}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var u=s.selectAllObj.filter(function(e){return!s.goodsListobj.includes(e.goodsId)});for(var p in s.selectAllObj=s.goodsListobj,this.title="已选中(".concat(s.selectAllObj.length,")"),this.selectAlls=u,this.totalObj=this.goodsListobj.length,this.goodsArrList=this.reSetData(this.goodsListobj,this.paramsObj.limit),this.paramsObj.page=1,this.currentPageObj=1,0==this.goodsArrList.length&&(this.goodsSpikeArr=[]),this.goodsArrList)Number(p)+1==this.paramsObj.page&&(console.log(this.goodsArrList[p],"tt"),this.goodsSpikeArr=this.goodsArrList[p])}},getIndex:function(e,t){for(var s=e.length,i=0;i<s;i++)if(e[i]==t)return 0==i?(e.shift(),e):i==s-1?(e.pop(),e):(e.splice(i,1),e)},onSubmit:function(){var e=this;this.forEachArr(this.objSplike.saleQuantity,this.goodsListobj,"surplusQuantity"),this.forEachArr(this.objSplike.shopPrice,this.goodsListobj,"signupShopPrice"),this.forEachArr(this.objSplike.cashPrice,this.goodsListobj,"signupCashPrice"),this.forEachArr(this.objSplike.huanbiPrice,this.goodsListobj,"signupMoneyLine"),this.forEachArr(this.objSplike.maxQuantity,this.goodsListobj,"maxQuantity");var t=this.params.signUpId,s=this.objSplike.saleQuantity,i=this.objSplike.shopPrice,a=this.objSplike.cashPrice,o=this.objSplike.huanbiPrice,n=this.objSplike.maxQuantity,l={},c=[];for(var u in s)l={goodsId:u,signupId:t,saleQuantity:s[u],shopPrice:i[u],cashPrice:a[u],huanbiPrice:o[u],maxQuantity:n[u]},c.push(l);for(var p in this.goodsArrList){var d=!0,g=!1,b=void 0;try{for(var m,h=r()(this.goodsArrList[p]);!(d=(m=h.next()).done);d=!0){var f=m.value;if(!f.surplusQuantity)return void this.$message({message:"商品编码为".concat(f.goodsId,"的商品，秒杀库存不能为空！"),type:"warning"});if(!f.signupShopPrice)return void this.$message({message:"商品编码为".concat(f.goodsId,"的商品，秒杀总价不能为空！"),type:"warning"});if(!f.signupCashPrice)return void this.$message({message:"商品编码为".concat(f.goodsId,"的商品，秒杀现金价不能为空！"),type:"warning"})}}catch(L){g=!0,b=L}finally{try{d||null==h.return||h.return()}finally{if(g)throw b}}}for(var y=c,v=0;v<y.length;v++){var k=y[v],S=!0,j=!1,P=void 0;try{for(var _,w=r()(this.goodsListArr);!(S=(_=w.next()).done);S=!0){var x=_.value;if(k.goodsId==x.goodsId){if(x.goodsNumber<k.saleQuantity)return void this.$message({message:"商品编码为".concat(k.goodsId,"的商品，秒杀库存不能大于商品库存！"),type:"warning"});if(x.shopPrice<k.shopPrice)return void this.$message({message:"商品编码为".concat(k.goodsId,"的商品，秒杀总价不能大于原商品总价！"),type:"warning"});if(x.cashPrice<k.cashPrice)return void this.$message({message:"商品编码为".concat(k.goodsId,"的商品，秒杀现金价不能大于原商品现金价！"),type:"warning"})}}}catch(L){j=!0,P=L}finally{try{S||null==w.return||w.return()}finally{if(j)throw P}}}this.btnLoading=!0,this.$api.post("hd/itzSecbuySignupGoods/batch",c,function(t){e.btnLoading=!1,200==t.status&&(e.$message({message:t.message,type:"success"}),e.dialogVisible=!1,e.totalObj=0,e.goodsListobj=[],e.goodsArrList=[],e.goodsSpikeArr=[],e.selectAllObj=[],e.selectAlls=[],e.selectAll=[],e.objSplike.saleQuantity=[],e.objSplike.shopPrice=[],e.objSplike.cashPrice=[],e.objSplike.huanbiPrice=[],e.objSplike.maxQuantity=[],e.title="已选中(0)",e.$refs.multipleTable.clearSelection(),e.goodsList(),e.reload())},function(t){e.btnLoading=!1})},forEachArr:function(e,t,s){for(var i in e){var a=!0,o=!1,n=void 0;try{for(var l,c=r()(t);!(a=(l=c.next()).done);a=!0){var u=l.value;u.goodsId==i&&(u[s]=e[i],u.signupId=this.params.signUpId)}}catch(p){o=!0,n=p}finally{try{a||null==c.return||c.return()}finally{if(o)throw n}}}},quxiao:function(){this.toggleSelection(),this.dialogVisible=!1,this.objSplike.saleQuantity=[],this.objSplike.shopPrice=[],this.objSplike.cashPrice=[],this.objSplike.huanbiPrice=[],this.objSplike.maxQuantity=[]},toggleSelection:function(e,t){var s=this;e?1==t?e.forEach(function(e){s.$refs.multipleTable.toggleRowSelection(e,!1)}):e.forEach(function(e){s.$refs.objTable.toggleRowSelection(e,!1)}):this.$refs.multipleTable.clearSelection(),this.selectAlls=[]}},watch:{tableIndex:function(e,t){0==e?(console.log(this.selectAlls),this.toggleSelection(this.selectAlls,1)):this.toggleSelection(this.goodsListArr,2)}}},P=j,_=(s("7821"),Object(g["a"])(P,i,a,!1,null,"0bde1d03",null));t["default"]=_.exports},d2c8:function(e,t,s){var i=s("aae3"),a=s("be13");e.exports=function(e,t,s){if(i(t))throw TypeError("String#"+s+" doesn't accept regex!");return String(a(e))}},d2d5:function(e,t,s){s("1654"),s("549b"),e.exports=s("584a").Array.from},e043:function(e,t,s){"use strict";var i=s("3a9e"),a=s.n(i);a.a}}]);
//# sourceMappingURL=chunk-59f6d048-legacy.f36dbfd6.js.map