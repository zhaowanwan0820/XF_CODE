<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>
    var appid = '{$appid}';
    var nonceStr = '{$nonceStr}';
    var timeStamp = '{$timeStamp}';
    var signature = '{$signature}';
    wx.config({
        appId:appid,
        timestamp:timeStamp,
        nonceStr:nonceStr,
        signature:signature,
        jsApiList:[
            'onMenuShareTimeline',
            'onMenuShareAppMessage',
            'hideOptionMenu',
            'showOptionMenu',
            'closeWindow'
        ],
    });
</script>
<script>
    var imgUrl = '{$img}';
    var lineLink = '{$linkUrl}';
    var descContent = '{$desc}';
    var shareTitle = '{$title}';
    wx.ready(function() {
        wx.showOptionMenu();
        wx.onMenuShareTimeline({
            title: shareTitle, // 分享标题
            link: lineLink, // 分享链接
            imgUrl: imgUrl, // 分享图标
            success: function (res) { 
                // 用户确认分享后执行的回调函数
            },
            cancel: function (res) { 
                // 用户取消分享后执行的回调函数
            },
        });
        wx.onMenuShareAppMessage({
            title: shareTitle, // 分享标题
            desc: descContent, // 分享描述
            link: lineLink, // 分享链接
            imgUrl: imgUrl, // 分享图标
            success: function (res) { 
                // 用户确认分享后执行的回调函数
            },
            cancel: function (res) { 
                // 用户取消分享后执行的回调函数
            },
        });
    });
</script>
