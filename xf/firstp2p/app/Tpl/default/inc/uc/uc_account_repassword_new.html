<link rel="stylesheet" type="text/css" href="{$TMPL_NEW}/css/edit-password.css" />

<div class="main">
    <div class="pw-info">
        <h2>修改密码</h2>
        <form method="post" action="{url x="shop" r="uc_account#do_re_password" }" id="modify">
            <ul class="clearfix">
                <li><label> <span>*</span> 旧密码：
                </label> <input type="password" value="" name="old_password" id="old_password" class="txt"> &nbsp;&nbsp;&nbsp;<font class='error_tip old_password_tip' style='color:red'></font></li>
                <li><label> <span>*</span> 新密码：
                </label> <input type="password" value="" name="new_password" id="new_password" class="txt"> &nbsp;&nbsp;&nbsp;<font class='error_tip new_password_tip' style='color:red'></font></li>
                <li><label> <span>*</span> 确认密码：
                </label> <input type="password" value="" name="re_new_password" id="re_new_password" class="txt"> &nbsp;&nbsp;&nbsp;<font class='error_tip re_new_password_tip' style='color:red'></font></li>
                <li><label> <span></span>
                </label> <input type="hidden" value="{$user_info.id}" name="id" /><a class="sumbtn" href="#" id="settings-submit">确定</a></li>
            </ul>
        </form>
    </div>
</div>
<span class="blank80"></span>

<script type="text/javascript">
$("#settings-submit").click(function(){
    $('.error_tip').html('');
    var old_obj = $("#old_password");
    var new_obj = $("#new_password");
    var re_new_obj = $("#re_new_password");

    old_obj.val(old_obj.val().replace(/(^\s*)|(\s*$)/g, "")); 
    new_obj.val(new_obj.val().replace(/(^\s*)|(\s*$)/g, "")); 
    re_new_obj.val(re_new_obj.val().replace(/(^\s*)|(\s*$)/g, "")); 
    
    if(old_obj.val().length == 0){
        old_obj.focus();
        $('.old_password_tip').html('旧密码不能为空！');
        return false;
    }
    if(new_obj.val().length < 6){
        new_obj.focus();
        $('.new_password_tip').html('新密码不能为空，并且大于6位！');
        return false;
    }
    if(old_obj.val() == new_obj.val()){
        new_obj.focus();
        $('.new_password_tip').html('新密码和旧密码不能一致！');
        return false;
    }
    if(new_obj.val() != re_new_obj.val()){
        re_new_obj.focus();
        $('.re_new_password_tip').html('新密码和确认密码不一致！');
        return false;
    }
    
    $('#modify').submit();
});
</script>