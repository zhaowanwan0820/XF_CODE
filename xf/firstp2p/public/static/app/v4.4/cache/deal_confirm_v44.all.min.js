/*! First P2P, JS, uglified
    author : mabaoyue  
    Date: 2019-11-04 */
!function(){"use strict";function a(b,d){function e(a,b){return function(){return a.apply(b,arguments)}}var f;if(d=d||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=d.touchBoundary||10,this.layer=b,this.tapDelay=d.tapDelay||200,this.tapTimeout=d.tapTimeout||700,!a.notNeeded(b)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;j>i;i++)h[g[i]]=e(h[g[i]],h);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(f=b.onclick,b.addEventListener("click",function(a){f(a)},!1),b.onclick=null)}}var b=navigator.userAgent.indexOf("Windows Phone")>=0,c=navigator.userAgent.indexOf("Android")>0&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,e=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=d&&/OS [6-7]_\d/.test(navigator.userAgent),g=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(d&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return c&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,f;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],d){if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},a.prototype.onTouchMove=function(a){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,g,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,g=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),h=k.tagName.toLowerCase(),"label"===h){if(b=this.findControl(k)){if(this.focus(k),c)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-g>100||d&&window.top!==window&&"input"===h?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),d&&"select"===h||(this.targetElement=null,a.preventDefault()),!1);return d&&!e&&(i=k.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,d,e,f;if("undefined"==typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!c)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(d>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(g&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(b=document.querySelector("meta[name=viewport]"),b&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1)},a.attach=function(b,c){return new a(b,c)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a}(),function(){var a,b,c="",d="",e=function(b,d){var e=this,f={delayHiden:function(){},focusFn:function(){},changeFn:function(){},defaultwidth:"100%",defaultheigh:"30px",placeholder:"请输入",defaulvalue:null};e.el=b,$.extend(f,d),e.options=f,e.init(),$(b).length&&($(b).append(c),0==$(".key_ul").length&&$("body").append(a),e.keyboardshow(),e.keyboardhide(),e.kbAddvalue(),$(".key_bg").bind("tap",function(){e.keyboardhide()}))};e.prototype={init:function(){a='<div class="key_ul"><div class="key_bg disnone"></div>',a+='<ul class="clearfix">',a+="  <li data-key=1><span>1</span></li>",a+="  <li data-key=2><span>2</span></li>",a+="  <li data-key=3><span>3</span></li>",a+="  <li data-key=4><span>4</span></li>",a+="  <li data-key=5><span>5</span></li>",a+="  <li data-key=6><span>6</span></li>",a+="  <li data-key=7><span>7</span></li>",a+="  <li data-key=8><span>8</span></li>",a+="  <li data-key=9><span>9</span></li>",a+="  <li data-key=.><span>.</span></li>",a+="  <li data-key=0><span>0</span></li>",a+='  <li data-key="hide"><span><i class="bg_hide"></i></span></li>',a+="</ul>",a+=' <div class="key_right">',a+='<div class="key_del" data-key="del"><span><i class="bg_del"></i></span></div>',a+='<div class="key_sure" data-key="sure"><span>确定</span></div>',a+="</div>",a+="</div>";var b=this;c+='<span class="inp_main">',c+=null==b.options.defaulvalue?'<span class="btn_key"></span>':'<span class="btn_key">'+b.options.defaulvalue+"</span>",c+='<i class="disnone">&nbsp;</i>',c+=null!=b.options.placeholder&&null==b.options.defaulvalue?' <span class="inp_text">'+b.options.placeholder+"</span>":' <span class="inp_text"></span>',c+="</span>"},keyboardshow:function(){var a=this,c=$(a.el),e=$(".key_ul");$(".key_bg").height(document.body.scrollHeight),c.bind("tap",function(){a.options.focusFn(),c.find("i").addClass("disnone"),$(this).find("i").removeClass("disnone"),$(".key_bg").removeClass("disnone"),$(this).find(".inp_text").addClass("disnone"),e.hasClass("show")||e.addClass("show"),b=$(this).find(".btn_key"),d=b.html()})},keyboardhide:function(){var a,b=this,c=$(".key_ul"),d=$(".btn_key");c.hasClass("show")&&c.removeClass("show"),$(".inp_main").find("i").addClass("disnone"),d.each(function(){0==$(this).html().length&&$(this).parent().find(".inp_text").removeClass("disnone")}),a=d.html(),"."==a.slice(-1)&&(a=a.slice(0,-1),d.html(a)),setTimeout(function(){b.options.delayHiden()},250),setTimeout(function(){$(".key_bg").addClass("disnone")},500)},kbAddvalue:function(){var a,c=this,e=$(".key_ul");e.find("ul>li").on("touchstart",function(){$(this).addClass("tap_color").siblings().removeClass("tap_color")}),e.find("ul>li").bind("touchend",function(){if($(this).removeClass("tap_color"),a=$(this).attr("data-key"),"del"==a)""!=d?d=d.substring(0,d.length-1):null,b.html(d),c.options.changeFn();else if("sure"==a)c.keyboardhide();else if("hide"==a)c.keyboardhide();else{var e=$(this).attr("data-key");"."==e&&"-1"==d.indexOf(".")&&(d+=e),/^(([0-9]|([1-9][0-9]{0,9}))((\.[0-9]{1,2})?))$/.test(d+e)&&(d+=e),b.html(d),c.options.changeFn()}}),$(".key_right>div").on("touchstart",function(){$(this).addClass("tap_color").siblings().removeClass("tap_color")}),$(".key_right>div").bind("touchend",function(){$(this).removeClass("tap_color"),a=$(this).attr("data-key"),"del"==a?(""!=d?d=d.substring(0,d.length-1):null,b.html(d),c.options.changeFn()):c.keyboardhide()}),$(".key_del>span").bind("longTap",function(){d="",b.html(""),c.options.changeFn()}),$(".bg_del").bind("longTap",function(){d="",b.html(""),c.options.changeFn()})}},window.virtualKey=e}();var P2PWAP={};P2PWAP.Const={COOKIE_HIDE_APPDOWNLOAD:"mp2p_hide_appdownload",AJAX_SIGN:window._AJAXSIGN_},P2PWAP.Common={},P2PWAP.util={},P2PWAP.util.setCookie=function(a,b,c){var d=new Date;d.setDate(d.getDate()+c),document.cookie=a+"="+escape(b)+";path=/"+(null==c?"":";expires="+d.toGMTString())},P2PWAP.util.request=function(a,b,c,d,e){var f="object"==typeof e?e:{};return f.asgn=P2PWAP.Const.AJAX_SIGN,$.ajax({url:a,type:"post"==d?"post":"get",dataType:"json",data:f,success:function(a){return a?0!=a.errno?void c.call(null,a.error):void b.call(null,a.data):void c.call(null,"服务器忙,请稍后重试")},error:function(){c.call(null,"您的网络貌似不给力,请稍后重试")}})},P2PWAP.util.dataFormat=function(a,b){var c=new Date(1e3*a),d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate(),g=c.getHours(),h=c.getMinutes(),i=c.getSeconds();return 10>e&&(e="0"+e),10>f&&(f="0"+f),10>g&&(g="0"+g),10>h&&(h="0"+h),10>i&&(i="0"+i),"undefined"==typeof b||""==b?d+"-"+e+"-"+f+" "+g+":"+h+":"+i:b.replace("y",d).replace("m",e).replace("d",f).replace("h",g).replace("i",h).replace("s",i)},P2PWAP.util.wxJudge=function(){var a=window.navigator?window.navigator.userAgent:"",b=/MicroMessenger/i;return b.test(a)},P2PWAP.util.checkMobile=function(a){return/^0?(13[0-9]|15[0-9]|17[0-9]|18[0-9]|14[57])[0-9]{8}$/.test(a)},P2PWAP.ui={},P2PWAP.ui.confirm=function(a,b,c,d){var e=document.createElement("div");e.className="ui_confirm";var f="";f+='<div class="opacity"></div>',f+='<div class="confirm_donate">',f+='    <p class="confirm_donate_title">'+a+"</p>",f+='    <p class="confirm_donate_text">'+b+"</p>",f+='    <div class="confirm_donate_but">',f+='        <input type="button" class="JS-cancel confirm_donate_but_del" value="取消">',f+='        <input type="button" class="JS-confirm confirm_donate_but_yes" value="确认">',f+="    </div>",f+="</div>",e.innerHTML=f,$("body").append(e),$(e).find(".JS-cancel").bind("click",function(){$(e).remove(),"function"==typeof d&&d.call(null)}),$(e).find(".JS-confirm").bind("click",function(){$(e).remove(),"function"==typeof c&&c.call(null)})},P2PWAP.ui.showErrorInstance_=null,P2PWAP.ui.showErrorInstanceTimer_=null,P2PWAP.ui.showErrorTip=function(a){P2PWAP.ui.showErrorInstance_?(clearTimeout(P2PWAP.ui.showErrorInstanceTimer_),P2PWAP.ui.showErrorInstance_.updateContent(a)):(P2PWAP.ui.showErrorInstance_=new P2PWAP.ui.ErrorToaster_(a),P2PWAP.ui.showErrorInstance_.show()),P2PWAP.ui.showErrorInstanceTimer_=setTimeout(function(){P2PWAP.ui.showErrorInstance_.dispose(),P2PWAP.ui.showErrorInstance_=null,P2PWAP.ui.showErrorInstanceTimer_=null},2e3)},P2PWAP.ui.toast=P2PWAP.ui.showErrorTip,P2PWAP.ui.ErrorToaster_=function(a){this.ele=null,this.msgHtml=a},P2PWAP.ui.ErrorToaster_.prototype.createDom=function(){this.ele=document.createElement("div"),this.ele.innerHTML="<span class='set_rem' style=\"display: inline-block;color:white;max-width:250px;min-width:100px;word-break:break-word;padding:10px;background:rgba(0,0,0,0.7);border-radius:5px;\">"+this.msgHtml+"</span>",this.ele.setAttribute("style","z-index:1002;position:fixed;width:100%;text-align:center;top:50%;-webkit-transition:opacity linear 0.5s;opacity:0;"),document.body.appendChild(this.ele)},P2PWAP.ui.ErrorToaster_.prototype.updateContent=function(a){this.msgHtml=a,this.ele&&$(this.ele).find("span").html(this.msgHtml)},P2PWAP.ui.ErrorToaster_.prototype.show=function(){this.ele||this.createDom();var a=this;setTimeout(function(){a.ele&&(a.ele.style.opacity="1")},1)},P2PWAP.ui.ErrorToaster_.prototype.hide=function(){if(this.ele){this.ele.style.opacity="0";var a=this.ele;delete this.ele,setTimeout(function(){document.body.removeChild(a)},500)}},P2PWAP.ui.ErrorToaster_.prototype.dispose=function(){this.hide()},P2PWAP.ui.P2PLoadMore=function(a,b,c,d,e,f){this.urlbase=c,this.page=d>1?d:1,this.loading=!1,this.xhr=null,this.hasNoMore=1==f,this.numPerPage=e>1?e:10,this.container=a,this.loadmorepanel=b,this.updateLoadMoreBtn()},P2PWAP.ui.P2PLoadMore.prototype.loadNextPage=function(){if(!this.loading){this.setLoading(!0);var a=this;this.xhr=P2PWAP.util.request(this.urlbase,function(b){a.setLoading(!1),a.processData(b)},function(b){a.setLoading(!1),P2PWAP.ui.toast(b)},"get",{p:this.page})}},P2PWAP.ui.P2PLoadMore.prototype.setLoading=function(a){this.loading=a,0==this.loading&&this.xhr&&delete this.xhr,this.updateLoadMoreBtn()},P2PWAP.ui.P2PLoadMore.prototype.updateLoadMoreBtn=function(){if(this.loading)this.loadmorepanel.innerHTML='<div class="ui_loading"><div class="bar1"></div><div class="bar2"></div><div class="bar3"></div><div class="bar4"></div><div class="bar5"></div><div class="bar6"></div><div class="bar7"></div><div class="bar8"></div><div class="bar9"></div><div class="bar10"></div><div class="bar11"></div><div class="bar12"></div></div>&nbsp;&nbsp;正在加载';else if(this.hasNoMore)this.loadmorepanel.innerHTML="没有更多了";else{this.loadmorepanel.innerHTML='<a href="javascript:void(0)">点击加载更多</a>';var a=this;$(this.loadmorepanel).find("a").unbind("click").bind("click",function(){a.loadNextPage()})}},P2PWAP.ui.P2PLoadMore.prototype.processData=function(a){this.page++;var b=a?a.length:0;if(a&&b>0)for(var c=0;b>c;c++){var d=this.createItem(a[c]);if($.isArray(d))for(var e=0;e<d.length;e++)this.container.appendChild(d[e]);else this.container.appendChild(d)}b>=this.numPerPage||(this.hasNoMore=!0),this.updateLoadMoreBtn()},P2PWAP.ui.P2PLoadMore.prototype.preloadPage=function(a,b){this.page=b,this.processData(a)},P2PWAP.ui.P2PLoadMore.prototype.refresh=function(){this.xhr&&(this.xhr.abort(),delete this.xhr),this.page=1,this.hasNoMore=!1,this.loading=!1,this.container.innerHTML="",this.updateLoadMoreBtn(),this.loadNextPage()},P2PWAP.ui.P2PLoadMore.prototype.createItem=function(){var a=document.createElement("div");return a},P2PWAP.cache={},P2PWAP.cache._StoreKey_="_P2PCACHEKEY_",P2PWAP.cache._CacheData_=null,P2PWAP.cache._init_=function(){var a=localStorage.getItem(P2PWAP.cache._StoreKey_);a||(a=JSON.stringify({}));var b=JSON.parse(a),c=(new Date).getTime();for(var d in b)b[d].timeStamp<c&&delete b[d];P2PWAP.cache._CacheData_=b,P2PWAP.cache._store_()},P2PWAP.cache._store_=function(){try{localStorage.setItem(P2PWAP.cache._StoreKey_,JSON.stringify(P2PWAP.cache._CacheData_))}catch(a){}},P2PWAP.cache.get=function(a){return P2PWAP.cache._init_(),P2PWAP.cache._CacheData_[a]?P2PWAP.cache._CacheData_[a].value:void 0},P2PWAP.cache.set=function(a,b,c){c||(c=60),P2PWAP.cache._init_();var d=(new Date).getTime()+1e3*c;P2PWAP.cache._CacheData_[a]={value:b,timeStamp:d},P2PWAP.cache._store_()},P2PWAP.cache.del=function(a){P2PWAP.cache._init_(),P2PWAP.cache._CacheData_[a]&&(delete P2PWAP.cache._CacheData_[a],P2PWAP.cache._store_())},P2PWAP.ui.instanceTextClip=function(a,b,c,d,e){if("true"!=$(a).attr("data-textclip")){"function"!=typeof b&&(b=function(){}),"function"!=typeof c&&(c=function(){}),"function"!=typeof d&&(d=function(){});var f=new P2PWAP.ui.textClip(a,c,d,e);return b.call(null,f),f.init(),f}},P2PWAP.ui.textClip=function(a,b,c,d){var d="object"==typeof d?d:{};this.showFn=b,this.hideFn=c,this.lineDom=$(a),this.opt=$.extend({},d)},P2PWAP.ui.textClip.prototype.init=function(){$(this.lineDom).attr("data-textclip","true"),this.judgeHeight()},P2PWAP.ui.textClip.prototype.judgeHeight=function(){var a=this;a.lineDom.css({"white-space":"nowrap",overflow:"hidden"}),a.lineHeight=a.lineDom[0].clientHeight,a.lineDom.css({"white-space":"normal",overflow:"visible"}),a.lineDom[0].clientHeight>a.lineHeight&&(a.neddClip=!0,a.setDom())},P2PWAP.ui.textClip.prototype.setDom=function(){var a=this;a.lineDom.addClass("__textClip__"),a.lineDom.css({"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}),a.createArrow(),a.arrowIsDown=!0,a.arrowEvent()},P2PWAP.ui.textClip.prototype.createArrow=function(){this.lineDom.append('<span class="__textClipArrow__ __textClipArrowDown__"></span>'),this.arrowEle=this.lineDom.find(".__textClipArrow__")},P2PWAP.ui.textClip.prototype.arrowEvent=function(){var a=this;$(a.arrowEle).click(function(){a.arrowIsDown?(a.arrowIsDown=!1,$(this).removeClass("__textClipArrowDown__").addClass("__textClipArrowUp__"),a.lineDom.css({"white-space":"normal",overflow:"visible","text-overflow":"clip"}),a.showFn.call(null,a)):(a.arrowIsDown=!0,$(this).removeClass("__textClipArrowUp__").addClass("__textClipArrowDown__"),a.lineDom.css({"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}),a.hideFn.call(null,a))})},$(function(){$("#JS-downloadPanelClose").bind("click",function(){P2PWAP.util.setCookie(P2PWAP.Const.COOKIE_HIDE_APPDOWNLOAD,"true",259200),$("#JS-headPanel").addClass("down_app_none")})}),"undefined"==typeof WXP2P&&(WXP2P={}),"undefined"==typeof WXP2P.APP&&(WXP2P.APP={}),WXP2P.APP.browser_model=!1,WXP2P.APP.warpAnchorSchema=function(a){if(1!=this.browser_model&&"javascript:void(0);"!=a.href){var b=a.getAttribute("data-proto");if(null!=b&&""!=b){for(var c=b+"?url="+encodeURIComponent(a.href),d=["title","backtype","backid","type","identity","needcloseall"],e=["needback","needrefresh"],f=0;f<d.length;f++){var g=a.getAttribute("data-"+d[f]);null!=g&&""!=g&&(c+="&"+d[f]+"="+encodeURIComponent(g))}for(var f=0;f<e.length;f++){var h=a.getAttribute("data-"+e[f]);c+="true"==h?"&"+e[f]+"=true":"&"+e[f]+"=false"}a.href=c}}},WXP2P.APP.batchWarpAnchorSchema=function(a){$(a).each(function(a,b){WXP2P.APP.warpAnchorSchema($(b)[0])})},"undefined"==typeof WXP2P.UI&&(WXP2P.UI={}),WXP2P.APP.setCookie=function(a,b,c){var d=new Date;d.setDate(d.getDate()+c),document.cookie=a+"="+escape(b)+";path=/"+(null==c?"":";expires="+d.toGMTString())},WXP2P.APP.getCookie=function(a){var b=document.cookie;if(null==b||""==b)return null;for(var c=b.split(";"),d=c.length-1;d>=0;d--){var e=$.trim(c[d]),f=e.split("="),g=f[0],h=decodeURIComponent(f[1]);if(g==a)return h}return null},WXP2P.UI.P2PLoadMore=function(a,b,c,d,e,f){var g=this;g.urlbase=c,g.page=d>1?d:1,g.loading=!1,g.ajaxType="post"==e?"post":"get",g.numPerPage=f>1?f:10,g.container=a,g.loadmorepanel=b,$(g.loadmorepanel).find("a").bind("click",function(){g.loadNextPage()})},WXP2P.UI.P2PLoadMore.prototype.loadNextPage=function(){var a=this;a.loading||(a.setLoading(!0),$.ajax({url:a.urlbase+"&page="+a.page,type:a.ajaxType,dataType:"json",success:function(b){a.setLoading(!1),a.processData(b)},error:function(){a.setLoading(!1),P2PWAP.ui.showErrorTip("<p>网络错误</p>")}}))},WXP2P.UI.P2PLoadMore.prototype.setLoading=function(a){this.loading=a,this.loadmorepanel.innerHTML="加载中..."},WXP2P.UI.P2PLoadMore.prototype.preProcessData=function(a){return a},WXP2P.UI.P2PLoadMore.prototype.processData=function(a){var b=this;if(a=this.preProcessData(a),a.data){b.page++;var c=a.data;if(c.length>0)for(var d=0;d<c.length;d++)b.container.appendChild(b.createItem(c[d]));c.length>=b.numPerPage?(b.loadmorepanel.innerHTML='<a href="javascript:void(0);">点击加载更多</a>',$(b.loadmorepanel).find("a").unbind("click").bind("click",function(){b.loadNextPage()})):b.loadmorepanel.innerHTML="没有更多了"}},WXP2P.UI.P2PLoadMore.prototype.createItem=function(){var a=document.createElement("div");return a},"undefined"==typeof WXP2P.UTIL&&(WXP2P.UTIL={}),WXP2P.UTIL._notificationScriptTagMap={},WXP2P.UTIL.longLoopLink=function(a,b,c){null!=WXP2P.UTIL._notificationScriptTagMap[c]&&(document.body.removeChild(WXP2P.UTIL._notificationScriptTagMap[c]),delete WXP2P.UTIL._notificationScriptTagMap[c]),WXP2P.UTIL._notificationScriptTagMap[c]=document.createElement("script"),WXP2P.UTIL._notificationScriptTagMap[c].src=a,WXP2P.UTIL._notificationScriptTagMap[c].onerror=function(){document.body.removeChild(WXP2P.UTIL._notificationScriptTagMap[c]),delete WXP2P.UTIL._notificationScriptTagMap[c],WXP2P.UTIL._notificationScriptTagMap[c]=null,b.call(null)},WXP2P.UTIL._notificationScriptTagMap[c].onload=function(){document.body.removeChild(WXP2P.UTIL._notificationScriptTagMap[c]),delete WXP2P.UTIL._notificationScriptTagMap[c],WXP2P.UTIL._notificationScriptTagMap[c]=null},document.body.appendChild(WXP2P.UTIL._notificationScriptTagMap[c])},WXP2P.UTIL.dataFormat=function(a,b,c){var d=new Date(1e3*a),e=d.getFullYear(),f=d.getMonth()+1,g=d.getDate(),h=d.getHours(),i=d.getMinutes(),j=d.getSeconds();return 10>f&&(f="0"+f),10>g&&(g="0"+g),10>h&&(h="0"+h),10>i&&(i="0"+i),10>j&&(j="0"+j),"undefined"==typeof b||""==b?1==c?f+"-"+g+" "+h+":"+i:e+"-"+f+"-"+g+" "+h+":"+i+":"+j:1==c?b.replace("m",f).replace("d",g).replace("h",h).replace("i",i):b.replace("y",e).replace("m",f).replace("d",g).replace("h",h).replace("i",i).replace("1s",j)},WXP2P.UI.showErrorInstance_=null,WXP2P.UI.showErrorInstanceTimer_=null,WXP2P.UI.showErrorTip=function(a){WXP2P.UI.showErrorInstance_?(clearTimeout(WXP2P.UI.showErrorInstanceTimer_),WXP2P.UI.showErrorInstance_.updateContent(a)):(WXP2P.UI.showErrorInstance_=new WXP2P.UI.ErrorToaster_(a),WXP2P.UI.showErrorInstance_.show()),WXP2P.UI.showErrorInstanceTimer_=setTimeout(function(){WXP2P.UI.showErrorInstance_.dispose(),WXP2P.UI.showErrorInstance_=null,WXP2P.UI.showErrorInstanceTimer_=null},2e3)},WXP2P.UI.toast=WXP2P.UI.showErrorTip,WXP2P.UI.ErrorToaster_=function(a){this.ele=null,this.msgHtml=a},WXP2P.UI.ErrorToaster_.prototype.createDom=function(){this.ele=document.createElement("div"),this.ele.innerHTML='<span style="display: inline-block;color:white;max-width:250px;min-width:100px;word-break:break-word;padding:10px;background:rgba(0,0,0,0.7);border-radius:5px;">'+this.msgHtml+"</span>",this.ele.setAttribute("style","z-index:1002;position:fixed;width:100%;text-align:center;top:45%;-webkit-transition:opacity linear 0.5s;opacity:0;"),document.body.appendChild(this.ele)},WXP2P.UI.ErrorToaster_.prototype.updateContent=function(a){this.msgHtml=a,this.ele&&$(this.ele).find("span").html(this.msgHtml)},WXP2P.UI.ErrorToaster_.prototype.show=function(){this.ele||this.createDom();var a=this;setTimeout(function(){a.ele&&(a.ele.style.opacity="1")},1)},WXP2P.UI.ErrorToaster_.prototype.hide=function(){if(this.ele){this.ele.style.opacity="0";var a=this.ele;delete this.ele,setTimeout(function(){document.body.removeChild(a)},500)}},WXP2P.UI.ErrorToaster_.prototype.dispose=function(){this.hide()},$(function(){WXP2P.APP.batchWarpAnchorSchema("body a");var a='<meta name="format-detection" content="telephone=no" />';$("head").append(a)}),$(function(){function a(a){for(var b=a.toString().split("."),c=b[0].split("").reverse(),d=0,e=c.length/3,f=1;e>f;f++)c.splice(3*f+d,0,","),d++;return c.reverse().concat(".",b[1]).join("")}function b(a,b){var c=0,d=a.toString(),e=b.toString();try{c+=d.split(".")[1].length}catch(f){}try{c+=e.split(".")[1].length}catch(f){}return Number(d.replace(".",""))*Number(e.replace(".",""))/Math.pow(10,c)}function c(a){a._isScroller||a.preventDefault()}function d(){j=$(".investmentID").html();var c=1*$(".ui_input .btn_key").html(),d=1*$(".val_discount_bidAmount").html(),e=Math.max(1*$(".val_mini").html().replace(/\,|元/g,""),d);n=$(".val_code").html(),o=$(".is_fixed").html();var f=$(".perpent").html(),g=0;if(""!=f&&(g=parseFloat($(".perpent").html())),$(".inp_text").html(e+"元起投"),""==c?($(".dit_yq").html(""),q=!1):/^(\d+|\d+\.|\d+\.\d{1,2})$/.test(c)?e>c?($(".dit_yq").html("起投金额为"+e+"元").addClass("ai_color"),q=!1):q=!0:($(".dit_yq").html("输入有误").addClass("ai_color"),q=!1),k="&money="+c+"&code="+n+"&couponIsFixed="+o,k=k+"&discount_id="+$(".val_discount_id").html()+"&discount_group_id="+$(".val_discount_group_id").html()+"&discount_type="+$(".val_discount_type").html()+"&discount_sign="+$(".val_discount_sign").html()+"&discount_bidAmount="+$(".val_discount_bidAmount").html()+"&discount_goodprice="+$(".val_discount_goodprice").html(),$(".ditf_list a.to_coupon").attr("href","invest://api?type=searchCoupon&id="+j+k),$("a.to_recharge").attr("href","invest://api?type=recharge&id="+j+k),$("a.to_contractList").attr("href","invest://api?type=contractList&id="+j+k),$("a.to_youhuiquanList").attr("href","invest://api?type=selectCoupon&deal_id="+j+k+"&discount_type=0"),q){if("1"!=$(".istongzhi").html()){var h=a((b(c,g)/100).toFixed(2));0==window.deal_type?$(".dit_yq").html("借款利息:"+h+"元").removeClass("ai_color"):$(".dit_yq").html("预期收益:"+h+"元").removeClass("ai_color")}else $(".dit_yq").html("");$(".sub_btn").removeClass("sub_gay").addClass("sub_red"),s||c>remainNum||s&&remainNum>=c?(c>remainNum&&(r=!1),(0==window._needForceAssess_||0==window._is_check_risk_)&&$(".sub_btn").attr("href","invest://api?type=invest&id="+j+k)):$(".sub_btn").attr("href","javascript:void(0);")}else $(".sub_btn").removeClass("sub_red").addClass("sub_gay").attr("href","javascript:void(0);")}function e(a,b){$.ajax({type:"post",dataType:"json",async:!1,url:"/discount/AjaxExpectedEarningInfo?token="+$(".token").html()+"&id="+$(".investmentID").html()+"&money="+a+"&discount_id="+b,success:function(a){a.data&&($(".coupon_detail .con").html(a.data.discountDetail),$(".val_discount_goodprice").html(a.data.discountGoodPrice),l=$(".val_discount_goodprice").html(),d())}})}function f(){function a(){0==b?($("#quantou_all")[0].removeAttribute("disabled"),b=2):($("#quantou_all")[0].setAttribute("disabled",!0),b--,setTimeout(function(){a()},1e3))}var b=2;$("#quantou_all").bind("click",function(){a();var b=$(".ketou_money").html().trim(),c=$(".deal_money").html().trim();$(".ui_input .btn_key").html(Math.min(c,b)),$(".inp_text").addClass("disnone"),t(),d()})}function g(){$.ajax({type:"post",dataType:"json",url:"/discount/AjaxAvaliableCount?token="+$(".token").html()+"&deal_id="+$(".investmentID").html(),success:function(a){function b(){for(var a=WXP2P.APP.getCookie(c),b=null!=a&&""!=a?a.split(","):[],d=b.length-1;d>=0;d--)if(b[d]==window._userid_)return;$(".JS-touziyindao").show(),$(".ui_mask_white").click(function(){$(".JS-touziyindao").hide()}),b.push(window._userid_),WXP2P.APP.setCookie(c,b.join(","),365)}if($(".JS-couponnum_label").html("未选择"),$(".can_use").show(),$(".JS_coupon_num").text(a.data),a.data<1&&($(".JS_coupon_num").removeClass("num_canuse"),$(".can_use").removeClass("color_red")),a.data>0){var c="_app_touziquanguide_";b()}}})}function h(a){return a=isNaN(a)?0:Number(a)}function i(){var a=!0,b=!1,c=$(".ui_input .btn_key").html();c=h($.trim(c));var d=function(){var a={},b=$("#limitMoney").val(),c=$("#levelName").val(),d=$("#remainingAssessNum").val();return""===b|""===c?a=null:(a.limitMoney=h(b),a.levelName=c,""!==d&&(a.remainingAssessNum=d)),a}(),e="";if(null!=d&&d.limitMoney<c){a=!1,d.levelName=function(){var a=d.levelName;return"型"==a.charAt(a.length-1)&&(a=a.slice(0,-1)),a}(),e="您的风险承受能力为 "+d.levelName+" 型,<br/>单笔最高投资额度为 "+d.limitMoney/1e4+" 万元","undefined"!=$.type(d.remainingAssessNum)?(e+='<br/><span class="sy_num color_gray f13">本年度剩余评估'+d.remainingAssessNum+"次</span>",d.remainingAssessNum>0&&(b=!0)):b=!0,$("#ui_confirm").find(".confirm_donate_text").html(e);var f=$("#ui_confirm .confirm_donate_but a");f.unbind("click").hide(),f.on("click",function(){$("#ui_confirm").hide()}),f.eq(1).on("click",function(){var a=location.origin,b=a+"/user/risk_assess?token="+$(".token").html()+"&from_confirm=1";$(this).attr("href","firstp2p://api?type=webview&money=&discount_id=&discount_bidAmount=&gobackrefresh=true&url="+encodeURIComponent(b))}),b?f.eq(0).add(f.eq(1)).show():f.eq(2).show(),$("#ui_confirm").css("display","block")}return a}Number.prototype.toFixed=function(a){if(0>=a)return parseInt(Number(this));var b=Number(this)*Math.pow(10,a),c=parseInt(b)/Math.pow(10,a);"-1"==c.toString().indexOf(".")&&(c=c.toString()+".");var d=c.toString().split(".")[1].length;if(a>d)for(var e=0;a-d>e;e++)c=c.toString()+"0";return c};var j,k,l,m,n,o,p=0,q=!1,r=!1,s=($("input[name='isChoose']").val(),$(".val_discount_id").html()),t=function(){p=0;var a=$(".ui_input .btn_key").html();e(a,s);var b=Math.max(1*$(".val_mini").html().replace(/\,|元/g,""),1*$(".val_bidAmount").html());if(a=parseFloat(a),(0!=a&&a>=b&&remainNum>=a||a>remainNum)&&!s){r=!0,$(".load_box").empty(),$(".tab_con").scrollTop(0),loadmoreC=new WXP2P.UI.P2PLoadMore($(".load_box")[0],$(".tb0-more")[0],"/discount/AjaxConfirmPickList?token="+usertoken+"&deal_id="+discount_id+"&site_id="+siteId+"&money="+a,1,"post",10),loadmoreC.createItem=function(b){var c="invest://api?type=invest&id="+discount_id+"&money="+a+"&code="+n+"&couponIsFixed="+o;c+="&discount_id="+b.id+"&discount_group_id="+b.discountGroupId+"&discount_sign="+b.sign+"&discount_bidAmount="+b.bidAmount+"&discount_type="+b.type;var d="",e=document.createElement("div"),f="";return f+='<div class="con">',f+='<a class="j-selectA" data-id="'+b.id+'" href="javascript:;" data-href="'+c+'" data-profit="'+b.goodsPrice+'" data-goodstype="'+b.goodsType+'" data-type="'+b.type+'">',f+="<dl>",1==b.recommend&&(1==b.type?f+='<div class="icon_kzs_blue"></div>':2==b.type&&(f+='<div class="icon_kzs_yellow"></div>')),discount_id==b.id&&(d=" icon_select"),f+='<div class="j-icon-select'+d+'"></div>',f+="<dt>",1==b.type?f+='<h2><span class="f28">'+b.goodsPrice+"</span>元</h2>返现券":2==b.type&&(f+='<h2>+<span class="f28">'+b.goodsPrice+"</span>%</h2>加息券"),f+="</dt>",f+="<dd>",f+="<p>"+b.name+"</p>",1==b.type?f+='<p class="color_blue">':2==b.type&&(f+='<p class="color_yellow">'),f+=""!=b.bidDayLimit&&b.bidDayLimit>0?"金额满"+b.bidAmount+"元，期限满"+b.bidDayLimit+"天可用":"金额满"+b.bidAmount+"元可用",f+="</p><p>"+WXP2P.UTIL.dataFormat(b.useStartTime,"",1)+"至"+WXP2P.UTIL.dataFormat(b.useEndTime,"",1)+"有效</p>",f+="</dd>",f+="</dl>",f+="</a>",e.innerHTML=f,e.className=1==b.type?"card":2==b.type?"card rate_increases":"card",e
},loadmoreC.preProcessData=function(a){m=a.data.list.length,p=a.data.totalPage,m||(0==window._needForceAssess_||0==window._is_check_risk_)&&$(".sub_btn").attr("href","invest://api?type=invest&id="+j+k);var b=a.data?a.data.list:[];return{data:b,errno:a.errno,error:a.error}},loadmoreC.processData=function(a){var b=this;if(a=this.preProcessData(a),a.data){b.page++;var c=a.data;if(c.length>0)for(var d=0;d<c.length;d++)b.container.appendChild(b.createItem(c[d]));this.page>p?b.loadmorepanel.innerHTML="没有更多了":(b.loadmorepanel.innerHTML='<a href="javascript:void(0);">点击加载更多</a>',$(b.loadmorepanel).find("a").unbind("click").bind("click",function(){b.loadNextPage()}))}},loadmoreC.loadNextPage();var d=function(a){a.addEventListener("touchstart",function(){var b=a.scrollTop,c=a.scrollHeight,d=b+a.offsetHeight;0===b?a.scrollTop=1:d===c&&(a.scrollTop=b-1)}),a.addEventListener("touchmove",function(b){a.offsetHeight<a.scrollHeight&&(b._isScroller=!0),document.body.addEventListener("touchmove",c)})};d(document.querySelector(".tab_con"));var f=document.querySelector(".investBg"),g=document.querySelector(".investChoose"),h=document.querySelector(".investList");f.addEventListener("touchmove",c),g.addEventListener("touchmove",c),h.addEventListener("touchmove",c)}};$(".tab_con").on("tap",".j-selectA",function(){var a=$(".ui_input .btn_key").html(),b=$(this),c=b.data("href"),d=b.data("id");$(".j-icon-select").removeClass("icon_select"),b.find(".j-icon-select").addClass("icon_select"),e(a,d),c=c+"&discount_goodprice="+l+"&fromOptimize=1",$(".chooseYes").addClass("chooseConfirm").attr("href",c)});var u=(new virtualKey($(".ui_input"),{placeholder:Math.max(1*$(".val_mini").html().replace(/\,|元/g,""),1*$(".val_bidAmount").html())+"起投",delayHiden:function(){t(),d(),document.body.removeEventListener("touchmove",c)},focusFn:function(){p=0,$(".sub_btn").removeClass("sub_red").addClass("sub_gay").attr("href","javascript:void(0);")}}),$(".val_money").html());u>0&&($(" .ui_input .btn_key").html(u),$(".inp_text").addClass("disnone")),d(),f(),$(".JS-selected_discount").length<1?g():$(".JS-couponnum_label").html("已选择"),$(".JS-selected_discount .JS_close").bind("click",function(){$(".JS-selected_discount").remove(),$(".val_discount_id").html(""),$(".val_discount_group_id").html(""),$(".val_discount_type").html(""),$(".val_discount_sign").html(""),$(".val_discount_bidAmount").html(""),$(".val_discount_goodprice").html(""),s="",deal_min=1*$(".val_mini").html().replace(/\,|元/g,""),t(),d(),g()}),$("#closeInvest,.investBg").bind("click",function(){r=!0,$(".investBg").addClass("disnone"),$(".investChoose").addClass("disnone"),$(".investList").removeClass("show"),$(".JS-selected_discount").remove(),$(".val_discount_id").html(""),$(".val_discount_group_id").html(""),$(".val_discount_type").html(""),$(".val_discount_sign").html(""),$(".val_discount_bidAmount").html(""),$(".val_discount_goodprice").html(""),s="",deal_min=1*$(".val_mini").html().replace(/\,|元/g,""),oldMoney=newMoney,t(),d(),$(".chooseYes").removeClass("chooseConfirm").attr("href","javascript:void(0);"),document.body.removeEventListener("touchmove",c),$(".j-icon-select").removeClass("icon_select"),$(".tab_con").scrollTop(0)}),$(".sub_btn").bind("click",function(){var a=$(this);if(!q)return!0;if(1==window._needForceAssess_){$(".is_eval").show(),$("#JS-is-evaluate").show();var b=location.origin,c=b+"/user/risk_assess?token="+$(".token").html()+"&from_confirm=1";return $(".eval_btn").attr("href","firstp2p://api?type=webview&money=&discount_id=&discount_bidAmount=&gobackrefresh=true&url="+encodeURIComponent(c)),$(".no_eval,.eval_btn").click(function(){$(".is_eval").hide(),$("#JS-is-evaluate").hide()}),!1}if(1==window._is_check_risk_){var b=location.origin,c=b+"/user/risk_assess?token="+$(".token").html()+"&from_confirm=1";return $("#ui_conf_risk").css("display","block"),$("#JS-confirm").attr("href","firstp2p://api?type=webview&money=&discount_id=&discount_bidAmount=&gobackrefresh=true&url="+encodeURIComponent(c)),$("#JS-cancel,#JS-know,#JS-confirm").click(function(){$("#ui_conf_risk").hide()}),!1}return 0!=$("#dealType").val()||i()?"7"==window._BIDTYPE_?($(".JS-gongyiconfirm.ui_mask").show(),$("#JS-confirmdonate").show(),$("#JS-confirmdonate .J_ok").attr("href",a.attr("href")),$("#JS-confirmdonate .J_no").click(function(){$("#JS-confirmdonate").hide(),$(".JS-gongyiconfirm.ui_mask").hide()}),!1):(s||r&&p>0&&($(".investBg").removeClass("disnone"),$(".investChoose").removeClass("disnone"),$(".investList").addClass("show"),$(".chooseNo").attr("href","invest://api?type=invest&id="+j+k)),!0):!1})});